let POWERMODE=(()=>{let e=document.createElement("canvas"),n=e.getContext("2d"),l=[],s=0,m=!1,t=()=>{e.width=window.innerWidth,e.height=window.innerHeight},o=(e,t)=>Math.random()*(t-e)+e,p=e=>{var t;return POWERMODE.colorful?(t=o(0,360),`hsla(${o(t-10,t+10)}, 100%, ${o(50,80)}%, 1)`):window.getComputedStyle(e).color},h=()=>{m=!0,n.clearRect(0,0,e.width,e.height);let t=!1,o=e.getBoundingClientRect();l.forEach(e=>{e.alpha<=.1||(e.velocity.y+=.075,e.x+=e.velocity.x,e.y+=e.velocity.y,e.alpha*=.96,n.globalAlpha=e.alpha,n.fillStyle=e.color,n.fillRect(Math.round(e.x-1.5)-o.left,Math.round(e.y-1.5)-o.top,3,3),t=!0)}),t?requestAnimationFrame(h):m=!1},i={colorful:!1,shake:!0,mobile:!1,init:()=>{!i.mobile&&/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)||(e.width=window.innerWidth,e.height=window.innerHeight,e.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",document.body.appendChild(e),window.addEventListener("resize",t))},explode:()=>{var e,t,o,n=d="TEXTAREA"===(d=document.activeElement).tagName||"INPUT"===d.tagName&&["text","email"].includes(d.type)?({left:o,top:t}=d.getBoundingClientRect(),{x:(e=((e,t)=>{var o=null!=window.mozInnerScreenX,n=document.createElement("div");n.id="input-textarea-caret-position-mirror-div",document.body.appendChild(n);let i=n.style,r=window.getComputedStyle?getComputedStyle(e):e.currentStyle;return i.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(i.wordWrap="break-word"),i.position="absolute",i.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach(e=>{i[e]=r[e]}),o?e.scrollHeight>parseInt(r.height)&&(i.overflowY="scroll"):i.overflow="hidden",n.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(n.textContent=n.textContent.replace(/\s/g,"Â ")),(o=document.createElement("span")).textContent=e.value.substring(t)||".",n.appendChild(o),e={top:o.offsetTop+parseInt(r.borderTopWidth),left:o.offsetLeft+parseInt(r.borderLeftWidth)},document.body.removeChild(n),e})(d,d.selectionEnd)).left+o,y:e.top+t,color:p(d),element:d}):(o=window.getSelection()).rangeCount?(t=(e=o.getRangeAt(0)).startContainer.nodeType===Node.TEXT_NODE?e.startContainer.parentNode:e.startContainer,{left:d,top:o}=e.getBoundingClientRect(),{x:d,y:o,color:p(t),element:t}):{x:0,y:0,color:"transparent",element:null},i=5+Math.round(10*Math.random());for(let e=0;e<i;e++)l[s]={x:n.x,y:n.y,alpha:1,color:n.color,velocity:{x:2*Math.random()-1,y:2*Math.random()-3.5}},s=(s+1)%500;var r=d.element;if(POWERMODE.shake){var a=(d=1+2*Math.random())*(.5<Math.random()?-1:1),d=d*(.5<Math.random()?-1:1);if(document.body.style.marginLeft=a+"px",document.body.style.marginTop=d+"px",!r||"INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName)setTimeout(()=>{document.body.style.marginLeft="",document.body.style.marginTop=""},75);else{let e=r.style.position,t=r.style.transition;r.style.position="relative",r.style.transition="none",r.style.transform=`translate(${a}px, ${d}px)`,setTimeout(()=>{r.style.position=e,r.style.transition=t,r.style.transform="",document.body.style.marginLeft="",document.body.style.marginTop=""},75)}}m||requestAnimationFrame(h)}};return i})();POWERMODE.init(),document.body.addEventListener("input",POWERMODE.explode);