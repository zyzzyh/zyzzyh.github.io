let POWERMODE=(()=>{let e=document.createElement("canvas"),n=e.getContext("2d"),a=[],d=0,l=!1,t=()=>{e.width=window.innerWidth,e.height=window.innerHeight},o=(e,t)=>Math.random()*(t-e)+e,s=e=>{if(POWERMODE.colorful){let e=o(0,360);return`hsla(${o(e-10,e+10)}, 100%, ${o(50,80)}%, 1)`}return window.getComputedStyle(e).color},m=()=>{l=!0,n.clearRect(0,0,e.width,e.height);let t=!1,o=e.getBoundingClientRect();a.forEach(e=>{e.alpha<=.1||(e.velocity.y+=.075,e.x+=e.velocity.x,e.y+=e.velocity.y,e.alpha*=.96,n.globalAlpha=e.alpha,n.fillStyle=e.color,n.fillRect(Math.round(e.x-1.5)-o.left,Math.round(e.y-1.5)-o.top,3,3),t=!0)}),t?requestAnimationFrame(m):l=!1},i={colorful:!1,shake:!0,mobile:!1,init:()=>{!i.mobile&&/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)||(e.width=window.innerWidth,e.height=window.innerHeight,e.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",document.body.appendChild(e),window.addEventListener("resize",t))},explode:()=>{var o=(()=>{let n=document.activeElement;if("TEXTAREA"===n.tagName||"INPUT"===n.tagName&&["text","email"].includes(n.type)){let{left:e,top:t}=n.getBoundingClientRect(),o=((e,t)=>{var o=null!=window.mozInnerScreenX,n=document.createElement("div");n.id="input-textarea-caret-position-mirror-div",document.body.appendChild(n);let i=n.style,r=window.getComputedStyle?getComputedStyle(e):e.currentStyle;i.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(i.wordWrap="break-word"),i.position="absolute",i.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach(e=>{i[e]=r[e]}),o?e.scrollHeight>parseInt(r.height)&&(i.overflowY="scroll"):i.overflow="hidden",n.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(n.textContent=n.textContent.replace(/\s/g,"Â "));o=document.createElement("span"),o.textContent=e.value.substring(t)||".",n.appendChild(o),e={top:o.offsetTop+parseInt(r.borderTopWidth),left:o.offsetLeft+parseInt(r.borderLeftWidth)};return document.body.removeChild(n),e})(n,n.selectionEnd);return{x:o.left+e,y:o.top+t,color:s(n),element:n}}let i=window.getSelection();if(i.rangeCount){let e=i.getRangeAt(0),t=e.startContainer.nodeType===Node.TEXT_NODE?e.startContainer.parentNode:e.startContainer,{left:o,top:n}=e.getBoundingClientRect();return{x:o,y:n,color:s(t),element:t}}return{x:0,y:0,color:"transparent",element:null}})(),t=o,n=5+Math.round(10*Math.random());for(let e=0;e<n;e++)a[d]={x:t.x,y:t.y,alpha:1,color:t.color,velocity:{x:2*Math.random()-1,y:2*Math.random()-3.5}},d=(d+1)%500;var i=o.element;if(POWERMODE.shake){var o=1+2*Math.random(),r=o*(.5<Math.random()?-1:1),o=o*(.5<Math.random()?-1:1);if(document.body.style.marginLeft=r+"px",document.body.style.marginTop=o+"px",!i||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName)setTimeout(()=>{document.body.style.marginLeft="",document.body.style.marginTop=""},75);else{let e=i.style.position,t=i.style.transition;i.style.position="relative",i.style.transition="none",i.style.transform=`translate(${r}px, ${o}px)`,setTimeout(()=>{i.style.position=e,i.style.transition=t,i.style.transform="",document.body.style.marginLeft="",document.body.style.marginTop=""},75)}}l||requestAnimationFrame(m)}};return i})();POWERMODE.init(),document.body.addEventListener("input",POWERMODE.explode);