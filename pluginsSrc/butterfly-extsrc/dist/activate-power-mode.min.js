let POWERMODE=(()=>{let e=document.createElement("canvas"),n=e.getContext("2d"),d=[],l=0,s=!1,t=()=>{e.width=window.innerWidth,e.height=window.innerHeight},o=(e,t)=>Math.random()*(t-e)+e,m=e=>{var t;return POWERMODE.colorful?(t=o(0,360),`hsla(${o(t-10,t+10)}, 100%, ${o(50,80)}%, 1)`):window.getComputedStyle(e).color},p=()=>{s=!0,n.clearRect(0,0,e.width,e.height);let t=!1,o=e.getBoundingClientRect();d.forEach(e=>{e.alpha<=.1||(e.velocity.y+=.075,e.x+=e.velocity.x,e.y+=e.velocity.y,e.alpha*=.96,n.globalAlpha=e.alpha,n.fillStyle=e.color,n.fillRect(Math.round(e.x-1.5)-o.left,Math.round(e.y-1.5)-o.top,3,3),t=!0)}),t?requestAnimationFrame(p):s=!1},i={colorful:!1,shake:!0,mobile:!1,init:()=>{!i.mobile&&/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)||(e.width=window.innerWidth,e.height=window.innerHeight,e.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",document.body.appendChild(e),window.addEventListener("resize",t))},explode:()=>{var e,t,o=a="TEXTAREA"===(a=document.activeElement).tagName||"INPUT"===a.tagName&&["text","email"].includes(a.type)?({left:t,top:e}=a.getBoundingClientRect(),{x:(r=((e,t)=>{var o=null!=window.mozInnerScreenX,n=document.createElement("div");n.id="input-textarea-caret-position-mirror-div",document.body.appendChild(n);let i=n.style,r=window.getComputedStyle?getComputedStyle(e):e.currentStyle;return i.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(i.wordWrap="break-word"),i.position="absolute",i.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach(e=>{i[e]=r[e]}),o?e.scrollHeight>parseInt(r.height)&&(i.overflowY="scroll"):i.overflow="hidden",n.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(n.textContent=n.textContent.replace(/\s/g,"Â ")),(o=document.createElement("span")).textContent=e.value.substring(t)||".",n.appendChild(o),e={top:o.offsetTop+parseInt(r.borderTopWidth),left:o.offsetLeft+parseInt(r.borderLeftWidth)},document.body.removeChild(n),e})(a,a.selectionEnd)).left+t,y:r.top+e,color:m(a),element:a}):(t=window.getSelection()).rangeCount?(e=(r=t.getRangeAt(0)).startContainer.nodeType===Node.TEXT_NODE?r.startContainer.parentNode:r.startContainer,{left:a,top:t}=r.getBoundingClientRect(),{x:a,y:t,color:m(e),element:e}):{x:0,y:0,color:"transparent",element:null},n=5+Math.round(10*Math.random());for(let e=0;e<n;e++)d[l]={x:o.x,y:o.y,alpha:1,color:o.color,velocity:{x:2*Math.random()-1,y:2*Math.random()-3.5}},l=(l+1)%500;var i=a.element;if(POWERMODE.shake){var r=(a=1+2*Math.random())*(.5<Math.random()?-1:1),a=a*(.5<Math.random()?-1:1);if(document.body.style.marginLeft=r+"px",document.body.style.marginTop=a+"px",!i||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName)setTimeout(()=>{document.body.style.marginLeft="",document.body.style.marginTop=""},75);else{let e=i.style.position,t=i.style.transition;i.style.position="relative",i.style.transition="none",i.style.transform=`translate(${r}px, ${a}px)`,setTimeout(()=>{i.style.position=e,i.style.transition=t,i.style.transform="",document.body.style.marginLeft="",document.body.style.marginTop=""},75)}}s||requestAnimationFrame(p)}};return i})();POWERMODE.init(),document.body.addEventListener("input",POWERMODE.explode);