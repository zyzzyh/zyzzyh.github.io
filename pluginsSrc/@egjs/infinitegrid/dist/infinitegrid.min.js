((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).InfiniteGrid=t()})(this,function(){var G=function(e,t){return(G=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _=function(){return(_=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function k(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function t(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(s=(o<3?r(s):3<o?r(t,n,s):r(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function d(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||((i=i||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function A(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(((e,t)=>{var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s})(arguments[t]));return e}function a(e){return void 0===e}(s=H.prototype).stop=function(){this._canceled=!0},s.isCanceled=function(){return this._canceled};var K=H,n=((s=W.prototype).trigger=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var i=t instanceof K?t.eventType:t;return(i=A(this._eventHandler[i]||[])).length<=0||(t instanceof K?(t.currentTarget=this,i.forEach(function(e){e(t)})):i.forEach(function(e){e.apply(void 0,A(n))})),this},s.once=function(n,i){var r,o=this;if("object"==typeof n&&a(i)){var e,t=n;for(e in t)this.once(e,t[e])}else"string"==typeof n&&"function"==typeof i&&(r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.apply(void 0,A(e)),o.off(n,r)},this.on(n,r));return this},s.hasOn=function(e){return!!this._eventHandler[e]},s.on=function(e,t){if("object"==typeof e&&a(t)){var n,i=e;for(n in i)this.on(n,i[n])}else{var r;"string"==typeof e&&"function"==typeof t&&(a(r=this._eventHandler[e])&&(this._eventHandler[e]=[],r=this._eventHandler[e]),r.push(t))}return this},s.off=function(e,t){if(a(e))this._eventHandler={};else if(a(t))if("string"==typeof e)delete this._eventHandler[e];else{var n,i=e;for(n in i)this.off(n,i[n])}else{var r=this._eventHandler[e];if(r)for(var o=r.length,s=0;s<o;++s)if(r[s]===t){r.splice(s,1),o<=1&&delete this._eventHandler[e];break}}return this},W.VERSION="3.0.5",W),I=K,V=((s=B.prototype).get=function(e){return this.values[this.keys.indexOf(e)]},s.set=function(e,t){var n=this.keys,i=this.values,r=n.indexOf(e);n[r=-1===r?n.length:r]=e,i[r]=t},B),U=((s=Y.prototype).get=function(e){return this.object[e]},s.set=function(e,t){this.object[e]=t},Y),j="function"==typeof Map,F=((s=q.prototype).connect=function(e,t){this.prev=e,this.next=t,e&&(e.next=this),t&&(t.prev=this)},s.disconnect=function(){var e=this.prev,t=this.next;e&&(e.next=t),t&&(t.prev=e)},s.getIndex=function(){for(var e=this,t=-1;e;)e=e.prev,++t;return t},q);function q(){}function Y(){this.object={}}function B(){this.keys=[],this.values=[]}function W(){this._eventHandler={}}function H(e,t){var n,i;if(this._canceled=!1,t)try{for(var r=(e=>{var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")})(Object.keys(t)),o=r.next();!o.done;o=r.next()){var s=o.value;this[s]=t[s]}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.eventType=e}s=X.prototype,Object.defineProperty(s,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(s,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),s.caculateOrdered=function(){e=this.changedBeforeAdded,n=this.fixed,r=[],o=[],e.forEach(function(e){var t=e[0],e=e[1],n=new F;o[e]=r[t]=n}),r.forEach(function(e,t){e.connect(r[t-1])});var n,r,o,e=e.filter(function(e,t){return!n[t]}).map(function(e,t){var n,i=e[0];return i===(e=e[1])?[0,0]:(e=o[e-1],n=(i=r[i]).getIndex(),i.disconnect(),e?i.connect(e,e.next):i.connect(void 0,r[0]),[n,i.getIndex()])}),s=this.changed,a=[];this.cacheOrdered=e.filter(function(e,t){var n=e[0],e=e[1],i=(t=s[t])[0],t=t[1];if(n!==e)return a.push([i,t]),!0}),this.cachePureChanged=a};var Z=X;function X(e,t,n,i,r,o,s,a){this.prevList=e,this.list=t,this.added=n,this.removed=i,this.changed=r,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}function Q(e,t,n){var i=j?Map:n?U:V,n=n||function(e){return e},r=[],o=[],s=[],a=e.map(n),n=t.map(n),u=new i,c=new i,h=[],l=[],d={},p=[],f=0,g=0;return a.forEach(function(e,t){u.set(e,t)}),n.forEach(function(e,t){c.set(e,t)}),a.forEach(function(e,t){void 0===(e=c.get(e))?(++g,o.push(t)):d[e]=g}),n.forEach(function(e,t){void 0===(e=u.get(e))?(r.push(t),++f):(s.push([e,t]),g=d[t]||0,h.push([e-g,t-f]),l.push(t===e),e!==t&&p.push([e,t]))}),o.reverse(),new Z(e,t,r,o,p,s,h,l)}var J,$="function"==typeof Map?void 0:(J=0,function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++J)});function ee(e,t){return Q(e,t,$)}var te=function(e,t){return(te=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=(s="undefined"!=typeof window)?window.navigator.userAgent:"",ie=s&&!!("getComputedStyle"in window),re=/MSIE|Trident|Windows Phone|Edge/.test(r),oe=s&&!!("addEventListener"in document),se="width",ae="height";function ue(e,t){return e.getAttribute(t)||""}function ce(e){return[].slice.call(e)}function he(e,t){return void 0===t&&(t="data-"),"loading"in e&&"lazy"===e.getAttribute("loading")||!!e.getAttribute(t+"lazy")}function le(e,t,n){oe?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function de(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function pe(e,t){var n=e["client"+t]||e["offset"+t];return parseFloat(n||(n=e,((ie?window.getComputedStyle(n):n.currentStyle)||{})[t.toLowerCase()]))||0}var o=[];function fe(e,t){o.length||le(window,"resize",me),e.__PREFIX__=t,o.push(e),ge(e)}function ge(e,t){void 0===t&&(t="data-");var n,t=e.__PREFIX__||t,i=parseInt(ue(e,""+t+se),10)||0,r=parseInt(ue(e,""+t+ae),10)||0;ue(e,t+"fixed")===ae?(n=pe(e,"Height")||r,e.style[se]=i/r*n+"px"):(n=pe(e,"Width")||i,e.style[ae]=r/i*n+"px")}function me(){o.forEach(function(e){ge(e)})}i(De,Ee=n),(l=De.prototype).check=function(){return this.isSkip||!this.checkElement()?(this.onAlreadyReady(!0),!1):(this.hasDataSize&&fe(this.element,this.options.prefix),(this.hasDataSize||this.hasLoading)&&this.onAlreadyPreReady(),!0)},l.addEvents=function(){var t=this,n=this.element;this.constructor.EVENTS.forEach(function(e){le(n,e,t.onCheck)})},l.clear=function(){var t=this,n=this.element;this.constructor.EVENTS.forEach(function(e){de(n,e,t.onCheck)}),this.removeAutoSizer()},l.destroy=function(){this.clear(),this.off()},l.removeAutoSizer=function(){var e,t,n;this.hasDataSize&&(t=this.options.prefix,e=this.element,(n=o.indexOf(e))<0||(t=ue(e,t+"fixed"),delete e.__PREFIX__,e.style[t===ae?se:ae]="",o.splice(n,1),o.length)||de(window,"resize",me))},l.onError=function(e){this.trigger("error",{element:this.element,target:e})},l.onPreReady=function(){this.isPreReady||(this.isPreReady=!0,this.trigger("preReady",{element:this.element,hasLoading:this.hasLoading,isSkip:this.isSkip}))},l.onReady=function(e){this.isReady||((e=!this.isPreReady&&e)&&(this.isPreReady=!0),this.removeAutoSizer(),this.isReady=!0,this.trigger("ready",{element:this.element,withPreReady:e,hasLoading:this.hasLoading,isSkip:this.isSkip}))},l.onAlreadyError=function(e){var t=this;setTimeout(function(){t.onError(e)})},l.onAlreadyPreReady=function(){var e=this;setTimeout(function(){e.onPreReady()})},l.onAlreadyReady=function(e){var t=this;setTimeout(function(){t.onReady(e)})},De.EVENTS=[],i(we,ze=r=De),(l=we.prototype).setHasLoading=function(e){this.hasLoading=e},l.check=function(){return this.isSkip?(this.onAlreadyReady(!0),!1):(this.hasDataSize?(fe(this.element,this.options.prefix),this.onAlreadyPreReady()):this.trigger("requestChildren"),!0)},l.checkElement=function(){return!0},l.destroy=function(){this.clear(),this.trigger("requestDestroy"),this.off()},l.onAlreadyPreReady=function(){ze.prototype.onAlreadyPreReady.call(this),this.trigger("reqeustReadyChildren")},we.EVENTS=[];var ye,Re,ve,Se,ze,Ee,_e=we,s=(i(xe,Se=n),(l=xe.prototype).check=function(e){var o=this,n=this.options.prefix,e=(this.clear(),this.elementInfos=ce(e).map(function(e,r){var t=o.getLoader(e,{prefix:n});return t.check(),t.on("error",function(e){o.onError(r,e.target)}).on("preReady",function(e){(t=o.elementInfos[r]).hasLoading=e.hasLoading,t.isSkip=e.isSkip;var t=o.checkPreReady(r);o.onPreReadyElement(r),t&&o.onPreReady()}).on("ready",function(e){var t=e.withPreReady,n=e.hasLoading,e=e.isSkip,n=((i=o.elementInfos[r]).hasLoading=n,i.isSkip=e,t&&o.checkPreReady(r)),i=o.checkReady(r);t&&o.onPreReadyElement(r),o.onReadyElement(r),n&&o.onPreReady(),i&&o.onReady()}),{loader:t,element:e,hasLoading:!1,hasError:!1,isPreReady:!1,isReady:!1,isSkip:!1}}),this.elementInfos.length);return(this.totalCount=e)||setTimeout(function(){o.onPreReady(),o.onReady()}),this},l.getTotalCount=function(){return this.totalCount},l.isPreReady=function(){return this.elementInfos.every(function(e){return e.isPreReady})},l.isReady=function(){return this.elementInfos.every(function(e){return e.isReady})},l.hasError=function(){return 0<this.totalErrorCount},l.clear=function(){this.isPreReadyOver=!1,this.totalCount=0,this.preReadyCount=0,this.readyCount=0,this.totalErrorCount=0,this.elementInfos.forEach(function(e){e.loader&&e.loader.destroy()}),this.elementInfos=[]},l.destroy=function(){this.clear(),this.off()},l.getLoader=function(r,e){var o,t,s,a,u=this,n=r.tagName.toLowerCase(),i=this.options.loaders,c=e.prefix,h=Object.keys(i);return i[n]?new i[n](r,e):(o=new _e(r,e),t=ce(r.querySelectorAll(h.join(", "))),o.setHasLoading(t.some(function(e){return he(e,c)})),s=!1,a=this.clone().on("error",function(e){o.onError(e.target)}).on("ready",function(){o.onReady(s)}),o.on("requestChildren",function(){var e=r,t=h,n=u.options.prefix,i=ce(e.querySelectorAll(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}(["["+n+"skip] ["+n+"width]"],t.map(function(e){return["["+n+"skip] "+e,e+"["+n+"skip]","["+n+"width] "+e].join(", ")})).join(", "))),e=ce(e.querySelectorAll("["+n+"width], "+t.join(", "))).filter(function(e){return-1===i.indexOf(e)});a.check(e).on("preReady",function(e){(s=e.isReady)||o.onPreReady()})}).on("reqeustReadyChildren",function(){a.check(t)}).on("requestDestroy",function(){a.destroy()}),o)},l.clone=function(){return new xe(ne({},this.options))},l.checkPreReady=function(e){return this.elementInfos[e].isPreReady=!0,++this.preReadyCount,!(this.preReadyCount<this.totalCount)},l.checkReady=function(e){return this.elementInfos[e].isReady=!0,++this.readyCount,!(this.readyCount<this.totalCount)},l.onError=function(e,t){var n=this.elementInfos[e];n.hasError=!0,this.trigger(new I("error",{element:n.element,index:e,target:t,errorCount:this.getErrorCount(),totalErrorCount:++this.totalErrorCount}))},l.onPreReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new I("preReadyElement",{element:t.element,index:e,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isSkip:t.isSkip}))},l.onPreReady=function(){this.isPreReadyOver=!0,this.trigger(new I("preReady",{readyCount:this.readyCount,totalCount:this.totalCount,isReady:this.isReady(),hasLoading:this.hasLoading()}))},l.onReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new I("readyElement",{index:e,element:t.element,hasError:t.hasError,errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isPreReadyOver:this.isPreReadyOver,isSkip:t.isSkip}))},l.onReady=function(){this.trigger(new I("ready",{errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,totalCount:this.totalCount}))},l.getErrorCount=function(){return this.elementInfos.filter(function(e){return e.hasError}).length},l.hasLoading=function(){return this.elementInfos.some(function(e){return e.hasLoading})},xe),Ie=(i(Me,ve=r),Me.prototype.checkElement=function(){var e=this.element,t=e.getAttribute("src");if(e.complete){if(t)return e.naturalWidth||this.onAlreadyError(e),!1;this.onAlreadyPreReady()}return this.addEvents(),re&&e.setAttribute("src",t),!0},Me.EVENTS=["load","error"],Me),Ce=(i(Te,Re=r),Te.prototype.checkElement=function(){var e=this.element;return!(1<=e.readyState||(e.error?(this.onAlreadyError(e),1):(this.addEvents(),0)))},Te.EVENTS=["loadedmetadata","error"],Te),Oe=(i(be,ye=s),be),Pe=function(e,t){return(Pe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function be(e){return ye.call(this,ne({loaders:{img:Ie,video:Ce}},e=void 0===e?{}:e))||this}function Te(){return null!==Re&&Re.apply(this,arguments)||this}function Me(){return null!==ve&&ve.apply(this,arguments)||this}function xe(e){void 0===e&&(e={});var t=Se.call(this)||this;return t.readyCount=0,t.preReadyCount=0,t.totalCount=0,t.totalErrorCount=0,t.isPreReadyOver=!0,t.elementInfos=[],t.options=ne({loaders:{},prefix:"data-"},e),t}function we(){return null!==ze&&ze.apply(this,arguments)||this}function De(e,t){void 0===t&&(t={});var n,i=Ee.call(this)||this,t=(i.isReady=!1,i.isPreReady=!1,i.hasDataSize=!1,i.hasLoading=!1,i.isSkip=!1,i.onCheck=function(e){i.clear(),e&&"error"===e.type&&i.onError(i.element),i.hasLoading&&i.checkElement()||(e=!i.hasDataSize&&!i.hasLoading,i.onReady(e))},i.options=ne({prefix:"data-"},t),i.element=e,i.options.prefix);return i.hasDataSize=(n=t,!!e.getAttribute((void 0===t?"data-":n)+"width")),i.isSkip=(n=t,!!e.getAttribute((void 0===t?"data-":n)+"skip")),i.hasLoading=he(e,t),i}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Le(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(s=(o<3?r(s):3<o?r(t,n,s):r(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function g(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var c,C,m,h={horizontal:!1,useTransform:!1,percentage:!1,isEqualSize:!1,isConstantSize:!1,gap:0,attributePrefix:"data-grid-",resizeDebounce:100,maxResizeDebounce:0,autoResize:!0,preserveUIOnDestroy:!1,defaultDirection:"end",externalContainerManager:null,externalItemRenderer:null,renderOnPropertyChange:!0,useFit:!0,outlineLength:0,outlineSize:0,useRoundedSize:!0,useResizeObserver:!1,observeChildren:!1},l=((r=c={})[r.PROPERTY=1]="PROPERTY",r[r.RENDER_PROPERTY=2]="RENDER_PROPERTY",(s=C={})[s.UNCHECKED=1]="UNCHECKED",s[s.UNMOUNTED=2]="UNMOUNTED",s[s.MOUNTED=3]="MOUNTED",(r=m={})[r.NEED_UPDATE=1]="NEED_UPDATE",r[r.WAIT_LOADING=2]="WAIT_LOADING",r[r.UPDATED=3]="UPDATED",{gap:c.RENDER_PROPERTY,defaultDirection:c.PROPERTY,renderOnPropertyChange:c.PROPERTY,preserveUIOnDestroy:c.PROPERTY,useFit:c.PROPERTY,outlineSize:c.RENDER_PROPERTY,outlineLength:c.RENDER_PROPERTY}),Ne={horizontal:{inlinePos:"top",contentPos:"left",inlineSize:"height",contentSize:"width"},vertical:{inlinePos:"left",contentPos:"top",inlineSize:"width",contentSize:"height"}};function Ge(n,i){var e=ke(n);return ee(i.map(function(e){return e.target}),e.map(function(e){return e.element})).maintained.filter(function(e){var t=e[0],e=e[1],t=i[t].size;return!(e=n[e]).inlineSize||!e.contentSize||t.inlineSize!==e.computedInlineSize||t.blockSize!==e.computedContentSize}).map(function(e){return e=e[1],n[e]})}function ke(e){return e.filter(function(e){return e.element})}function Ae(e){return ke(e).map(function(e){return e.element})}function Ke(e){return"string"==typeof e}function Ve(e){return"object"==typeof e}function Ue(e){return"number"==typeof e}function p(e){return e.reduce(function(e,t){return e+t},0)}function y(e){var t,r=e.prototype,o=e.propertyTypes;for(t in o)(n=>{var i=o[n]===c.RENDER_PROPERTY,e=(t=Object.getOwnPropertyDescriptor(r,n)||{}).get||function(){return this.options[n]},t=t.set||function(e){var t=this.options;t[n]!==e&&(t[n]=e,i)&&t.renderOnPropertyChange&&this.scheduleRender()};Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:e,set:t})})(t)}function N(e){for(var t=[],n=0;n<e;++n)t.push(n);return t}function je(e,t){return Math.max(e-t[1],t[0]-e,0)+1}function Fe(e,t,n){return Math.min(n,Math.max(e,t))}function qe(e,t){var n;return t?(n=1/t,Math.round(e/t)/n):e}(v=tt.prototype).getRect=function(){return this.rect},v.setRect=function(e){this.rect=f({},e)},v.isObserverEnabled=function(){return!!this._observer},v.resize=function(){var e=this.container;this.setRect("border-box"===this._options.rectBox?{width:e.offsetWidth,height:e.offsetHeight}:{width:e.clientWidth,height:e.clientHeight})},v.observeChildren=function(e){var t,n=this._observer;n&&(t=this._options.childrenRectBox,e.forEach(function(e){e&&n.observe(e,{box:t})}))},v.unobserveChildren=function(e){var t=this._observer;t&&e.forEach(function(e){e&&t.unobserve(e)})},v.listen=function(e){return this._emitter.on("resize",e),this},v.destroy=function(){var e;null!=(e=this._observer)&&e.disconnect(),this._options.useWindowResize&&window.removeEventListener("resize",this._onWindowResize)},v._init=function(){var e=this.container,t=this._options;this._emitter=new n,t.useResizeObserver&&window.ResizeObserver&&(this._observer=new window.ResizeObserver(this._onObserve),this._observer.observe(e,{box:t.rectBox})),t.useWindowResize&&window.addEventListener("resize",this._onWindowResize),this.resize()};var Ye,Be,We=tt,He=(u(et,Be=n),(v=et.prototype).resize=function(){var e=this.container;this.setRect({width:e.clientWidth,height:e.clientHeight})},v.isObserverEnabled=function(){return this._watcher.isObserverEnabled()},v.getRect=function(){return this._watcher.getRect()},v.observeChildren=function(e){this._watcher.observeChildren(e)},v.unobserveChildren=function(e){this._watcher.unobserveChildren(e)},v.setRect=function(e){this._watcher.setRect(e)},v.getInlineSize=function(){return this.getRect()[this._names.inlineSize]},v.getContentSize=function(){return this.getRect()[this._names.contentSize]},v.getStatus=function(){return{rect:this._watcher.getRect()}},v.setStatus=function(e){this.setRect(e.rect),this.setContentSize(this.getContentSize())},v.setContentSize=function(e){var t,n=this.options.horizontal?"width":"height";this.setRect(f(f({},this.getRect()),((t={})[n]=e,t))),this.container.style[n]=e+"px"},v.destroy=function(e){void 0===e&&(e={}),this._watcher.destroy(),e.preserveUI||(this.container.style.cssText=this.orgCSSText)},v._init=function(){var e=this.container,t=window.getComputedStyle(e),t=(this.orgCSSText=e.style.cssText,"static"===t.position&&(e.style.position="relative"),this.options);this._watcher=new We(e,{useWindowResize:t.autoResize,useResizeObserver:t.useResizeObserver,resizeDebounce:t.resizeDebounce,maxResizeDebounce:t.maxResizeDebounce,watchDirection:!!t.useResizeObserver&&this._names.inlineSize}).listen(this._onResize)},Object.defineProperty(v,"_names",{get:function(){return Ne[this.options.horizontal?"horizontal":"vertical"]},enumerable:!1,configurable:!0}),et),Ze=((v=$e.prototype).resize=function(){this.initialRects={}},v.renderItems=function(e){var t=this;e.forEach(function(e){t._renderItem(e)})},v.getInlineSize=function(){return this.containerRect[this.options.horizontal?"height":"width"]},v.setContainerRect=function(e){this.containerRect=e},v.updateEqualSizeItems=function(t,e){var n=this,i=(this.updateItems(t),t.some(function(e){return e.attributes.sizeGroup}));(this.options.isEqualSize||i)&&t.some(function(e){return e.updateState===m.UPDATED})&&e.forEach(function(e){-1===t.indexOf(e)&&n.updateItem(e,!0)})},v.updateItems=function(e){var t=this;e.forEach(function(e){t.updateItem(e)})},v.getStatus=function(){return{initialRects:this.initialRects}},v.setStatus=function(e){this.initialRects=e.initialRects},v._init=function(){var e=this.options.percentage,t=!1,n=!1;!0===e?n=t=!0:e&&(-1<e.indexOf("position")&&(n=!0),-1<e.indexOf("size"))&&(t=!0),this.posPercetage=n,this.sizePercetage=t},v.updateItem=function(e,t){var n=(r=this.options).isEqualSize,i=r.isConstantSize,r=r.useRoundedSize,o=this.initialRects,s=e.orgRect,a=e.element,u=e.updateState===m.WAIT_LOADING,c=s&&s.width&&s.height,h=a?(e=>{for(var t={},n=a.attributes,i=n.length,r=0;r<i;++r){var o=(s=n[r]).name,s=s.value;-1!==o.indexOf(e)&&(t[o.replace(e,"").replace(/[\s-_]([a-z])/g,function(e,t){return t.toUpperCase()})]=s)}return t})(this.options.attributePrefix):e.attributes,l=null!=(l=h.sizeGroup)?l:"",d=h.notEqualSize;if(""!==l&&o[l])p=o[l];else if(n&&!d&&!l&&o[""])p=o[""];else if(i&&c&&!u)p=s;else{if(t||!a)return;var p={left:a.offsetLeft,top:a.offsetTop,width:0,height:0};r?(p.width=a.offsetWidth,p.height=a.offsetHeight):(n=a.getBoundingClientRect(),p.width=n.width,p.height=n.height)}return e.attributes=h,e.shouldReupdate=!1,e.isFirstUpdate&&c||(e.orgRect=f({},p)),e.rect=f({},p),t||(e.element&&(e.mountState=C.MOUNTED),e.updateState===m.NEED_UPDATE&&(e.updateState=m.UPDATED,e.isFirstUpdate=!0),u)||d||o[l]||(o[l]=f({},p)),p},v._renderItem=function(e){var n,i,t,r,o,s,a,u,c=e.element,h=e.cssRect;c&&h&&(a=(e=this.options).horizontal,e=e.useTransform,n=this.posPercetage,i=this.sizePercetage,t=["position: absolute;"],r=(a=Ne[a?"horizontal":"vertical"]).inlineSize,o=a.inlinePos,s=this.getInlineSize(),u=0<(a=Object.keys(h)).length,e&&(a=a.filter(function(e){return"top"!==e&&"left"!==e}),t.push("transform: translate("+(h.left||0)+"px, "+(h.top||0)+"px);")),t.push.apply(t,a.map(function(e){var t=h[e];return e===r&&i||e===o&&n?e+": "+t/s*100+"%;":e+": "+t+"px;"})),u)&&(c.style.cssText+=t.join(""))},$e),Xe=(v=Je.prototype,Object.defineProperty(v,"orgInlineSize",{get:function(){var e=this._names.inlineSize;return this.orgRect[e]||this.rect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"orgContentSize",{get:function(){var e=this._names.contentSize;return this.orgRect[e]||this.rect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"inlineSize",{get:function(){return this.rect[this._names.inlineSize]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"contentSize",{get:function(){return this.rect[this._names.contentSize]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"cssInlineSize",{get:function(){return this.cssRect[this._names.inlineSize]},set:function(e){this.cssRect[this._names.inlineSize]=e},enumerable:!1,configurable:!0}),Object.defineProperty(v,"cssContentSize",{get:function(){return this.cssRect[this._names.contentSize]},set:function(e){this.cssRect[this._names.contentSize]=e},enumerable:!1,configurable:!0}),Object.defineProperty(v,"cssInlinePos",{get:function(){return this.cssRect[this._names.inlinePos]},set:function(e){this.cssRect[this._names.inlinePos]=e},enumerable:!1,configurable:!0}),Object.defineProperty(v,"cssContentPos",{get:function(){return this.cssRect[this._names.contentPos]},set:function(e){this.cssRect[this._names.contentPos]=e},enumerable:!1,configurable:!0}),Object.defineProperty(v,"computedInlineSize",{get:function(){var e=this._names.inlineSize;return this.cssRect[e]||this.rect[e]||this.orgRect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"computedContentSize",{get:function(){var e=this._names.contentSize;return this.cssRect[e]||this.rect[e]||this.orgRect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"computedInlinePos",{get:function(){var e,t=this._names.inlinePos;return null!=(e=this.cssRect[t])?e:this.rect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(v,"computedContentPos",{get:function(){var e,t=this._names.contentPos;return null!=(e=this.cssRect[t])?e:this.rect[t]},enumerable:!1,configurable:!0}),v.setCSSGridRect=function(e){var t,n=Ne[this.horizontal?"horizontal":"vertical"],i={};for(t in e)i[n[t]]=e[t];this.cssRect=i},v.getStatus=function(){return{index:this.index,mountState:this.mountState,updateState:this.updateState,attributes:this.attributes,orgCSSText:this.orgCSSText,isFirstUpdate:this.isFirstUpdate,element:null,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,gridData:this.gridData,data:this.data}},v.getMinimizedStatus=function(){var e={orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes,gridData:this.gridData},t=(o=this).key,n=o.mountState,i=o.updateState,r=o.isFirstUpdate,o=o.orgCSSText;return void 0!==t&&(e.key=t),n!==C.UNCHECKED&&(e.mountState=n),i!==m.NEED_UPDATE&&(e.updateState=i),r&&(e.isFirstUpdate=!0),o&&(e.orgCSSText=o),e},Object.defineProperty(v,"_names",{get:function(){return this.horizontal?Ne.horizontal:Ne.vertical},enumerable:!1,configurable:!0}),Je),R=(u(Qe,Ye=n),(v=Qe.prototype).getContainerElement=function(){return this.containerElement},v.getItems=function(){return this.items},v.getChildren=function(){return[].slice.call(this.containerElement.children)},v.setItems=function(e){e.forEach(function(e,t){e.index=t});var t=this.options;return t.useResizeObserver&&t.observeChildren&&((t=this.containerManager).unobserveChildren(Ae(this.items)),t.observeChildren(Ae(e))),this.items=e,this},v.getContainerInlineSize=function(){return this.containerManager.getInlineSize()},v.getOutlines=function(){return this.outlines},v.setOutlines=function(e){return this.outlines=e,this},v.syncElements=function(e){void 0===e&&(e={});var n=this.items,t=this.options.horizontal,i=this.getChildren(),r=(a=ee(this.items.map(function(e){return e.element}),i)).added,o=a.maintained,s=a.changed,a=a.removed,u=[];return o.forEach(function(e){var t=e[0];u[e=e[1]]=n[t]}),r.forEach(function(e){u[e]=new Xe(t,{element:i[e]})}),this.setItems(u),(r.length||a.length||s.length)&&this.renderItems(e),this},v.updateItems=function(e,t){void 0===e&&(e=this.items);var n=(t=void 0===t?{}:t).useOrgResize;return e.forEach(function(e){var t;n&&((t=e.orgRect).width=0,t.height=0),e.updateState=m.NEED_UPDATE}),this.checkReady(t),this},v.renderItems=function(e){return this._renderItems(e=void 0===e?{}:e),this},v.getStatus=function(t){return{outlines:this.outlines,items:this.items.map(function(e){return t?e.getMinimizedStatus():e.getStatus()}),containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus()}},v.setStatus=function(e){var t=this,n=this.options.horizontal,i=this.containerManager,r=i.getInlineSize(),o=this.getChildren();return this.itemRenderer.setStatus(e.itemRenderer),i.setStatus(e.containerManager),this.outlines=e.outlines,this.items=e.items.map(function(e,t){return new Xe(n,f(f({},e),{element:o[t]}))}),this.itemRenderer.renderItems(this.items),r!==i.getInlineSize()?this.renderItems({useResize:!0}):window.setTimeout(function(){t._renderComplete({direction:t.defaultDirection,mounted:t.items,updated:[],isResize:!1})}),this},v.getComputedOutlineSize=function(e){return void 0===e&&(e=this.items),this.options.outlineSize||this.getContainerInlineSize()},v.getComputedOutlineLength=function(e){return void 0===e&&(e=this.items),this.options.outlineLength||1},v.destroy=function(e){e=void 0===(e=(e=void 0===e?{}:e).preserveUI)?this.options.preserveUIOnDestroy:e,this.containerManager.destroy({preserveUI:e}),e||this.items.forEach(function(e){var t=e.element,e=e.orgCSSText;t&&(t.style.cssText=e)}),null!=(e=this._im)&&e.destroy()},v.getInlineGap=function(){return this._getDirectionalGap("inline")},v.getContentGap=function(){return this._getDirectionalGap("content")},v.checkReady=function(n){var i=this,e=(void 0===n&&(n={}),this.items),r=e.filter(function(e){var t;return(null==(t=e.element)?void 0:t.parentNode)&&e.updateState!==m.UPDATED}),t=e.filter(function(e){var t;return(null==(t=e.element)?void 0:t.parentNode)&&e.mountState!==C.MOUNTED}),o=[];t.filter(function(e){var t;return!!e.hasTransition||(t=e.element,0<parseFloat(getComputedStyle(t).transitionDuration)&&(e.hasTransition=!0,e.transitionDuration=t.style.transitionDuration,!0))}).forEach(function(e){e.element.style.transitionDuration="0s"}),null!=(e=this._im)&&e.destroy(),this._im=new Oe({prefix:this.options.attributePrefix}).on("preReadyElement",function(e){r[e.index].updateState=m.WAIT_LOADING}).on("preReady",function(){r.forEach(function(e){var t=e.orgRect.width&&e.orgRect.height,n=e.cssRect.width||e.cssRect.height;!t&&n&&(e.element.style.cssText=e.orgCSSText)}),i._updateItems(r),i.readyItems(t,r,n)}).on("readyElement",function(e){var t=r[e.index];t.updateState=m.NEED_UPDATE,e.isPreReadyOver&&(t.isRestoreOrgCSSText&&(t.element.style.cssText=t.orgCSSText),i._updateItems([t]),i.readyItems([],[t],n))}).on("error",function(e){var t=r[e.index];i.trigger("contentError",{element:e.element,target:e.target,item:t,update:function(){o.push(t)}})}).on("ready",function(){o.length&&i.updateItems(o)}).check(r.map(function(e){return e.element}))},v.scheduleRender=function(){var e=this;this._clearRenderTimer(),this._renderTimer=window.setTimeout(function(){e.renderItems()})},v.fitOutlines=function(e){void 0===e&&(e=this.useFit);var t=this.outlines,n=t.start,i=t.end,r=n.length?Math.min.apply(Math,n):0;!e&&0<r||(t.start=n.map(function(e){return e-r}),t.end=i.map(function(e){return e-r}),this.items.forEach(function(e){var t=e.cssContentPos;Ue(t)&&(e.cssContentPos=t-r)}))},v.readyItems=function(e,t,n){var i=this.outlines,r=n.direction||this.options.defaultDirection,i=n.outline||i["end"===r?"start":"end"],o=this.items,s={start:g([],i),end:g([],i)};e.forEach(function(e){e.mountState=C.MOUNTED}),t.forEach(function(e){e.isUpdating=!0}),o.length&&(s=this.applyGrid(this.items,r,i)),t.forEach(function(e){e.isUpdating=!1}),this.setOutlines(s),this.fitOutlines(),this.itemRenderer.renderItems(this.items),this._refreshContainerContentSize(),(o=e.filter(function(e){return e.hasTransition})).length&&(this.containerManager.resize(),o.forEach(function(e){e.element.style.transitionDuration=e.transitionDuration})),this._renderComplete({direction:r,mounted:e,updated:t,isResize:!!n.useResize}),(i=t.filter(function(e){return e.shouldReupdate})).length&&this.updateItems(i)},v._isObserverEnabled=function(){return this.containerManager.isObserverEnabled()},v._updateItems=function(e){this.itemRenderer.updateEqualSizeItems(e,this.getItems())},v._getDirectionalGap=function(e){var t=this.options.horizontal,n=this.options.gap;return"number"==typeof n?n:null!=(t=t&&"inline"===e||!t&&"content"===e?n.vertical:n.horizontal)?t:h.gap},v._renderComplete=function(e){this.trigger("renderComplete",e)},v._clearRenderTimer=function(){clearTimeout(this._renderTimer),this._renderTimer=0},v._refreshContainerContentSize=function(){var e=(t=this.outlines).start,t=t.end,n=this.getContentGap(),t=t.length?Math.max.apply(Math,t):0,e=e.length?Math.max.apply(Math,e):0,e=Math.max(e,t-n);this.containerManager.setContentSize(e)},v._resizeContainer=function(){this.containerManager.resize(),this.itemRenderer.setContainerRect(this.containerManager.getRect())},v._init=function(){this._resizeContainer()},v._renderItems=function(e,t){void 0===e&&(e={}),this._clearRenderTimer();var n=e.useResize||e.useOrgResize;n&&!t&&(this._resizeContainer(),this.itemRenderer.resize()),!this.getItems().length&&this.getChildren().length?this.syncElements(e):n?this.updateItems(this.items,e):this.checkReady(e)},Qe.defaultOptions=h,Qe.propertyTypes=l,Le([y],Qe));function Qe(e,t){void 0===t&&(t={});var n=Ye.call(this)||this,e=(n.items=[],n.outlines={start:[],end:[]},n._renderTimer=0,n._onResize=function(e){e.isResizeContainer?n._renderItems({useResize:!0},!0):0<(e=Ge(n.items,e.childEntries)).length&&n.updateItems(e)},n.options=f(f({},n.constructor.defaultOptions),t),n.containerElement=Ke(e)?document.querySelector(e):e,(t=n.options).isEqualSize),i=t.isConstantSize,r=t.useTransform,o=t.horizontal,s=t.percentage,a=t.externalContainerManager,u=t.externalItemRenderer,c=t.resizeDebounce,h=t.maxResizeDebounce,l=t.autoResize,d=t.useRoundedSize,t=t.useResizeObserver;return n.containerManager=a||new He(n.containerElement,{horizontal:o,resizeDebounce:c,maxResizeDebounce:h,autoResize:l,useResizeObserver:t}).on("resize",n._onResize),n.itemRenderer=u||new Ze({useTransform:r,isEqualSize:e,isConstantSize:i,percentage:s,useRoundedSize:d}),n._init(),n}function Je(e,t){void 0===t&&(t={}),this.horizontal=e,this.isUpdating=!1,this.shouldReupdate=!1,this.hasTransition=!1,this.transitionDuration="",this.isRestoreOrgCSSText=!0;var n,e=t.element,i=f({key:"",index:0,orgRect:{left:0,top:0,width:0,height:0},rect:{left:0,top:0,width:0,height:0},cssRect:{},attributes:{},data:{},isFirstUpdate:!1,mountState:C.UNCHECKED,updateState:m.NEED_UPDATE,element:e||null,orgCSSText:null!=(e=null==e?void 0:e.style.cssText)?e:"",gridData:{}},t);for(n in i)this[n]=i[n]}function $e(e){this.initialRects={},this.sizePercetage=!1,this.posPercetage=!1,this.options=f({attributePrefix:h.attributePrefix,useTransform:h.useTransform,horizontal:h.horizontal,percentage:h.percentage,isEqualSize:h.isEqualSize,isConstantSize:h.isConstantSize,useRoundedSize:h.useRoundedSize},e),this._init()}function et(e,t){var n=Be.call(this)||this;return n.container=e,n._onResize=function(e){n.trigger("resize",e)},n.options=f({horizontal:h.horizontal,autoResize:h.autoResize,resizeDebounce:h.resizeDebounce,maxResizeDebounce:h.maxResizeDebounce,useResizeObserver:h.useResizeObserver},t),n._init(),n}function tt(e,t){var u=this;void 0===t&&(t={}),this._resizeTimer=0,this._maxResizeDebounceTimer=0,this.rect={width:0,height:0},this._updatedEntries=[],this._onWindowResize=function(){u._scheduleResize([{target:u.container}])},this._onObserve=function(e){var t=u._options,n=u.container,i=t.rectBox,r=t.childrenRectBox;u._scheduleResize(e.map(function(e){var t;return{size:(t=("border-box"===(e.target===n?i:r)?e.borderBoxSize:e.contentBoxSize)||[{inlineSize:(t=e.contentRect).width,blockSize:t.height}])[0]||t,target:e.target}}))},this._scheduleResize=function(e){var t=(n=u._options).resizeDebounce,n=n.maxResizeDebounce,i=u._updatedEntries;i.push.apply(i,e),u._updatedEntries=i.filter(function(e,t){return i.lastIndexOf(e)===t}),!u._maxResizeDebounceTimer&&t<=n&&(u._maxResizeDebounceTimer=window.setTimeout(u._onResize,n)),u._resizeTimer&&(clearTimeout(u._resizeTimer),u._resizeTimer=0),u._resizeTimer=window.setTimeout(u._onResize,t)},this._onResize=function(){clearTimeout(u._resizeTimer),clearTimeout(u._maxResizeDebounceTimer),u._maxResizeDebounceTimer=0,u._resizeTimer=0;var t,e,n,i,r=u._updatedEntries,o=u.container,s=0<(r=r.filter(function(e){return e.target!==o||(t=e,!1)})).length,a=!!t;a&&(e=u._options.watchDirection,n=u.rect,(i=t.size)?u.setRect({width:i.inlineSize,height:i.blockSize}):u.resize(),i=u.rect,a=!e||("box"===e||"width"===e)&&n.width!==i.width||("box"===e||"height"===e)&&n.height!==i.height),u._updatedEntries=[],(a||s)&&u._emitter.trigger("resize",{isResizeContainer:a,childEntries:r})},this._options=f({resizeDebounce:100,maxResizeDebounce:0,useResizeObserver:!1,useWindowResize:!0,watchDirection:!1,rectBox:"content-box",childrenRectBox:"border-box"},t),this.container=Ke(e)?document.querySelector(e):e,this._init()}function nt(e,t,n,i){return Math[i].apply(Math,e.slice(t,t+n))}u(rt,it=R),(v=rt.prototype).applyGrid=function(y,e,t){y.forEach(function(e){e.isRestoreOrgCSSText=!1});for(var n,R=this.getComputedOutlineSize(y),v=this.getComputedOutlineLength(y),i=(r=this.options).align,S=r.observeChildren,z=r.columnSizeRatio,r=r.contentAlign,E=this.getContentGap(),_=this.getContentGap(),o=t.length,I=y.length,C=this._getAlignPoses(v,R),O="end"===e,P=O?"min":"max",b=O?"max":"min",e=[0],T=(e=o===v?t.slice():(n=o?Math[b].apply(Math,t):0,N(v).map(function(){return n}))).slice(),M=1<v?C[1]-C[0]:0,x="stretch"===i,w=O&&"start"===r,D=O?-1/0:1/0,L=(w&&(D=Math.min.apply(Math,T)),this),s=0;s<I;++s)(e=>{var t,n,i,r,o,s,e=y[O?e:I-1-e],a=parseInt(e.attributes.column||"1",10),u=parseInt(e.attributes.maxColumn||"1",10),c=e.contentSize,h=Math.min(v,a||Math.max(1,Math.ceil((e.inlineSize+E)/M))),l=Math.min(v,Math.max(h,u)),d=(n=h,i=D,r=(t=T).length-n+1,o="max"==(u=P)?"min":"max",s="max"==u?"lastIndexOf":"indexOf",(r=N(r).map(function(e){return e=nt(t,e,n,o),Math[o](i,e)}))[s](Math[u].apply(Math,r))),p=nt(T,d,h,b);for(w&&D!==p&&(D=Math.max.apply(Math,T),T=T.map(function(){return D}),p=D,d=0);h<l;){var f=d+h,g=d-1;if(O&&(v<=f||T[f]>p))break;if(!O&&(g<0||T[g]<p))break;O||--d,++h}d=Math.max(0,d),h=Math.min(v-d,h),(0<a&&1<h||x)&&(s=(h-1)*M+R,L._isObserverEnabled()&&S||e.cssInlineSize===s||(e.shouldReupdate=!0),e.cssInlineSize=s),0<z&&(c=e.computedInlineSize/z,e.cssContentSize=c);var u=C[d],p=O?p:p-_-c,m=(e.cssInlinePos=u,e.cssContentPos=p,O?p+c+_:p);N(h).forEach(function(e){T[d+e]=m})})(s);return w&&D!==Math.min.apply(Math,T)&&(D=Math.max.apply(Math,T),T=T.map(function(){return D})),{start:O?e:T,end:O?T:e}},v.getComputedOutlineSize=function(e){void 0===e&&(e=this.items);var t=this.options.align,n=this.getInlineGap(),i=this.getContainerInlineSize(),r=this.columnSize||this.outlineSize,o=this.column||this.outlineLength,s=o||1,a=0;if("stretch"===t)o||(t=this.maxStretchColumnSize||1/0,s=Math.max(1,Math.ceil((i+n)/(t+n)))),a=(i+n)/(s||1)-n;else if(r)a=r;else if(e.length){for(var u=e[0],c=0,h=e;c<h.length;c++){var l=h[c],d=l.attributes,p=parseInt(d.column||"1",10),d=parseInt(d.maxColumn||"1",10);if(l.updateState===m.UPDATED&&l.inlineSize&&1===p&&1===d){u=l;break}}a=u.inlineSize||0}else a=i;return a||0},v.getComputedOutlineLength=function(e){void 0===e&&(e=this.items);var t=this.getInlineGap(),n=this.column||this.outlineLength,i=this.columnCalculationThreshold;return n||(n=this.getComputedOutlineSize(e),Math.min(e.length,Math.max(1,Math.floor((this.getContainerInlineSize()+t)/(n-i+t)))))},v._getAlignPoses=function(e,t){var n,i=this.options.align,r=this.getInlineGap(),o=this.getContainerInlineSize(),s=N(e),a=0,u=0;return"justify"===i||"stretch"===i?(u=(n=e-1)?Math.max((o-t)/n,t+r):0,a=Math.min(0,o/2-(n*u+t)/2)):(n=(e-1)*(u=t+r)+t,"center"===i?a=(o-n)/2:"end"===i&&(a=o-n)),s.map(function(e){return a+e*u})},rt.propertyTypes=f(f({},R.propertyTypes),{column:c.RENDER_PROPERTY,columnSize:c.RENDER_PROPERTY,columnSizeRatio:c.RENDER_PROPERTY,align:c.RENDER_PROPERTY,columnCalculationThreshold:c.RENDER_PROPERTY,maxStretchColumnSize:c.RENDER_PROPERTY,contentAlign:c.RENDER_PROPERTY}),rt.defaultOptions=f(f({},R.defaultOptions),{align:"justify",column:0,columnSize:0,columnSizeRatio:0,columnCalculationThreshold:.5,maxStretchColumnSize:1/0,contentAlign:"masonry"});var it,v=Le([y],rt);function rt(){return null!==it&&it.apply(this,arguments)||this}(S=st.prototype).push=function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},S.pop=function(){var e=this.content[0],t=this.content.pop();return 0<this.content.length&&(this.content[0]=t,this.sinkDown(0)),e},S.size=function(){return this.content.length},S.bubbleUp=function(e){for(var t=e,n=this.content[t];0<t;){var i=Math.floor((t+1)/2)-1,r=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(r)))break;this.content[i]=n,this.content[t]=r,t=i}},S.sinkDown=function(e){for(var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){var r,o=2*(e+1),s=o-1,a=null;if(s<t&&(r=this.content[s],(r=this.scoreFunction(r))<i)&&(a=s),null===(a=o<t&&(s=this.content[o],this.scoreFunction(s)<(null==a?i:r))?o:a))break;this.content[e]=this.content[a],this.content[a]=n,e=a}};var ot=st;function st(e){this.content=[],this.scoreFunction=e}function at(e,t){var n,i;return Ue(t)?t:(n="+"===(n=t.charAt(0))?1:"-"===n?-1:0,i=parseFloat(t),t.match(/%$/g)&&(i*=e/100),n?e+i:i)}function ut(e,t){var n=e.orgInlineSize,i=e.orgContentSize,r=e.gridData.inlineOffset||0,e=e.gridData.contentOffset||0;return n&&i?(i<=e?1:(n-r)/(i-e))*(t-e)+r:t}u(ht,ct=R),(S=ht.prototype).applyGrid=function(e,t,n){var s=this,a=(i=this.options).attributePrefix,u=i.horizontal,i=(e.forEach(function(e){var t,n,i,r,o;e.isUpdating&&(r=e.element,i=e.attributes,t=e.gridData,n=parseFloat(i.inlineOffset),o=parseFloat(i.contentOffset),isNaN(n)&&(n=s.inlineOffset||t.inlineOffset||0),isNaN(o)&&(o=s.contentOffset||0|t.contentOffset),!r||"inlineOffset"in i||"contentOffset"in i||e.mountState!==C.MOUNTED||(i=r.querySelector("["+a+"maintained-target]"))&&(e=r.offsetWidth-r.clientWidth+r.scrollWidth-i.clientWidth,r=r.offsetHeight-r.clientHeight+r.scrollHeight-i.clientHeight,o=u?(n=r,e):(n=e,r)),t.inlineOffset=n,t.contentOffset=o)}),this.options.rowRange),r=[],o="end"===t;return e.length&&(r=i?this._getRowPath(e,o):this._getPath(e,o)),this._setStyle(e,r,n,"end"===t)},S._getRowPath=function(e,t){var n=this._getColumnRange(),i=this._getRowRange();return null!=(n=null==(e=this._getRowLink(e,{path:[0],cost:0,length:0,currentNode:0},n,i,t))?void 0:e.path.map(function(e){return""+e}))?n:[]},S._getRowLink=function(e,t,n,i,r){var o=n[0],s=i[0],a=i[1],u=e.length,c=t.path,h=t.length,l=t.cost,d=t.currentNode;return d<u&&(a<=h||u<d+o)?(o=je(u-d,n)*Math.abs(this._getCost(e,d,u,r)),f(f({},t),{length:h+1,path:g(g([],c),[u]),currentNode:u,cost:l+o,isOver:!0})):u<=d?f(f({},t),{currentNode:u,isOver:h<s||a<h}):this._searchRowLink(e,t,u,n,i,r)},S._searchRowLink=function(e,t,n,i,r,o){for(var s,a=i[0],u=t.currentNode,c=t.path,h=t.length,l=t.cost,d=Math.min(n,u+i[1]),p=[],f=u+a;f<=d;++f)f!==u&&(s=Math.abs(this._getCost(e,u,f,o)),s=this._getRowLink(e,{path:g(g([],c),[f]),length:h+1,cost:l+s,currentNode:f},i,r,o))&&p.push(s);return p.sort(function(e,t){var n=e.isOver;return n!==t.isOver?n?1:-1:je(e.length,r)-je(t.length,r)||e.cost-t.cost}),p[0]},S._getExpectedRowSize=function(i,e){var t=this.getContainerInlineSize()-this.getInlineGap()*(i.length-1),r=t,o=0,s=0;if(i.forEach(function(e){var t,n=e.orgInlineSize,i=e.orgContentSize;n&&i?(t=e.gridData.inlineOffset||0,e=e.gridData.contentOffset||0,o+=n=i<=e?1:(n-t)/(i-e),s+=e*n,r-=t):o+=1}),o){var n=(r+s)/o;if(this.stretch){var a=Fe(n,(c=this._getSizeRange())[0],c[1]);if(e)return a;var u=this.stretchRange,e=(c=i.map(function(e){return ut(e,a)})).reduce(function(e,t,n){return e+at(t,i[n].attributes.minStretch||u[0])},0),c=c.reduce(function(e,t,n){return e+at(t,i[n].attributes.maxStretch||u[1])},0);if(e<=t&&t<=c)return a}return n}return 0},S._getExpectedInlineSizes=function(e,o){var t=this.options,s=t.stretch,a=t.stretchRange;return e.map(function(e){var t=s?at(e.orgInlineSize,e.attributes.minStretch||a[0]):-1/0,n=s?at(e.orgInlineSize,e.attributes.maxStretch||a[1]):1/0,i=!1,r=!1;return n<=(e=ut(e,o))?i=!0:e<=t&&(r=!0),{minSize:t,maxSize:n,size:Fe(e,t,n),originalSize:e,isMax:i,isMin:r}})},S._getStretchItemInfos=function(e,t){var n=e.length,i=this.getContainerInlineSize()-this.getInlineGap()*(Math.max(1,n)-1),e=p((n=this._getExpectedInlineSizes(e,t)).map(function(e){return e.size})),t=i-e,r=i/p(n.map(function(e){return e.originalSize})),o=n.map(function(e){return f(f({},e),{passed:!1,size:e.originalSize*r})});if(0==t)return{infos:o,cost:0};for(var s=0<t,a=o.length,u=0;u<a&&"break"!==(()=>{var e=p(o.map(function(e){return e.passed?e.size:0})),t=p(o.map(function(e){return e.passed?0:e.originalSize})),n=(i-e)/t;if(o.forEach(function(e){e.passed||(s?e.size>e.maxSize&&(n=Math.min(n,e.maxSize/e.originalSize)):e.size<e.minSize&&(n=Math.max(n,e.minSize/e.originalSize)))}),o.forEach(function(e){!e.passed&&(e.size=Fe(e.originalSize*n,e.minSize,e.maxSize),s&&!qe(e.size-e.maxSize,.001)||!s&&!qe(e.size-e.minSize,.001))&&(e.passed=!0)}),o.every(function(e){return e.passed}))return"break"})();++u);var c=i/p(o.map(function(e){return e.size}));return qe(c-1,.001)&&o.forEach(function(e){e.size*=c}),{infos:o,cost:p(o.map(function(e){var t=1,n=((e.size>e.maxSize||e.size<e.minSize)&&(t=2),e.originalSize),n=s?Math.max(n,e.minSize):Math.min(n,e.maxSize);return Math.abs(e.size-n)*t}))}},S._getExpectedInlineSize=function(e,t){var n=this.getInlineGap();return(t=this._getExpectedInlineSizes(e,t)).length?p(t.map(function(e){return e.size}))+n*(e.length-1):0},S._getCost=function(e,t,n,i){var r=e.slice(t,n),o=this.getContainerInlineSize(),s=this._getExpectedRowSize(r),a=(u=this._getSizeRange())[0],u=u[1];if(this.isCroppedSize)return a<=s&&s<=u?0:(h=this._getExpectedInlineSize(r,s<a?a:u),Math.pow(h-o,2));var c,h,l=0;if(this.stretch)return s<a?s=a:u<s&&(s=u),c=Math.abs(s-a),h=this._getExpectedInlineSize(r,s),(l=!this.passUnstretchRow||(i?n!==e.length:0!==t)||o<=h?this._getStretchItemInfos(r,s).cost:l)+c;if(isFinite(u)){if(s<a)return Math.pow(s-a,2)+Math.pow(u,2)+l;if(u<s)return Math.pow(s-u,2)+Math.pow(u,2)+l}else if(s<a)return Math.max(Math.pow(a,2),Math.pow(s,2))+Math.pow(u,2)+l;return s-a+l},S._getPath=function(d,p){for(var f=this,g=d.length,e=this.options.columnRange,m=(e=Ve(e)?e:[e,e])[0],y=e[1],t=((e,t)=>{var n,i,r,o,s,a,u={},c={},h=(c[0]=0,new ot(function(e){return e.cost}));for(h.push({value:"0",cost:0});h.size();)for(var l in i=(n=h.pop()).value,r=n.cost,o=(e=>{for(var t={},n=parseInt(e,10),i=Math.min(n+m,g);i<=g&&!(y<i-n);++i){var r=f._getCost(d,n,i,p);r<0&&i===g&&(r=0),t[""+i]=Math.pow(r,2)}return t})(i)||{})s=r+o[l],(void 0===(a=c[l])||s<a)&&(h.push({value:l,cost:c[l]=s}),u[l]=i);if(void 0===c[t])throw e=["Could not find a path from ","0"," to ",t,"."].join(""),new Error(e);return u})(0,e=""+g),n=[],i=e;i;)n.push(i),i=t[i];return n.reverse(),n},S._setStyle=function(e,t,n,l){var d,p,i,f=this,g=(void 0===n&&(n=[]),(r=this.options).isCroppedSize),m=r.displayedRow,y=r.stretch,R=r.passUnstretchRow,v=e.length,S=this._getSizeRange(),r=n[0]||0,z=this.getContainerInlineSize(),E=this.getInlineGap(),_=this.getContentGap(),I=(n=((e,t)=>{for(var n=t.length,i=[],r=0;r<n-1;++r){var o=parseInt(t[r],10),s=parseInt(t[r+1],10);i.push(e.slice(o,s))}return i})(e,t)).length,C=r,O=0;return n.forEach(function(o,e){var n,i,r=o.length,s=f._getExpectedRowSize(o,!0),t=(g&&(s=Math.max(S[0],Math.min(s,S[1]))),E*(length-1)),a=o.map(function(e,t){var n=ut(e,s);return{index:t,item:e,inlineSize:n,orgInlineSize:n,maxInlineSize:n,minInlineSize:n}}),u=f._getExpectedInlineSize(o,s),c=(z-t)/(u-t),h=u-t,t=z-t;y&&u&&t!=h&&(R&&h<t&&(l?e===I-1:0===e)?(p=[C],d=o.map(function(e,t){return v-r+t}),n=f._getExpectedInlineSizes(o,s),a.forEach(function(e,t){e.minInlineSize=n[t].minSize,e.maxInlineSize=n[t].maxSize,e.inlineSize=Fe(e.inlineSize,e.minInlineSize,e.maxInlineSize)})):(i=f._getStretchItemInfos(o,s).infos,a.forEach(function(e,t){e.inlineSize=i[t].size,e.minInlineSize=i[t].minSize,e.maxInlineSize=i[t].maxSize}))),a.forEach(function(e,t){var n=e.item,i=e.inlineSize,t=(t=o[t-1])?t.cssInlinePos+t.cssInlineSize+E:0,r=(g&&(i*=c),n.gridData);r.orgInlineSize=e.orgInlineSize,r.orgContentSize=s,r.minInlineSize=e.minInlineSize,r.maxInlineSize=e.maxInlineSize,n.setCSSGridRect({inlinePos:t,contentPos:C,inlineSize:i,contentSize:s})}),C+=_+s,(m<0||e<m)&&(O=C)}),l?{start:[r],end:[O],passedItems:d,passed:p}:(i=C-r,e.forEach(function(e){e.cssContentPos-=i}),{passedItems:d,passed:p?[p[0]-i]:null,start:[r-i],end:[r]})},S.getComputedOutlineLength=function(){return 1},S.getComputedOutlineSize=function(){return this.getContainerInlineSize()},S._getRowRange=function(){var e=this.rowRange;return Ve(e)?e:[e,e]},S._getColumnRange=function(){var e=this.columnRange;return Ve(e)?e:[e,e]},S._getSizeRange=function(){var e=this.sizeRange;return Ve(e)?e:[e,e]},ht.propertyTypes=f(f({},R.propertyTypes),{columnRange:c.RENDER_PROPERTY,rowRange:c.RENDER_PROPERTY,sizeRange:c.RENDER_PROPERTY,isCroppedSize:c.RENDER_PROPERTY,displayedRow:c.RENDER_PROPERTY,stretch:c.RENDER_PROPERTY,stretchRange:c.RENDER_PROPERTY,passUnstretchRow:c.RENDER_PROPERTY,inlineMargin:c.RENDER_PROPERTY,contentMargin:c.RENDER_PROPERTY,inlineOffset:c.RENDER_PROPERTY,contentOffset:c.RENDER_PROPERTY}),ht.defaultOptions=f(f({},R.defaultOptions),{columnRange:[1,8],rowRange:0,sizeRange:[0,1/0],displayedRow:-1,isCroppedSize:!1,stretch:!1,passUnstretchRow:!0,stretchRange:["-20%","+20%"],inlineOffset:0,contentOffset:0});var ct,S=Le([y],ht);function ht(){return null!==ct&&ct.apply(this,arguments)||this}function lt(e){var t=-1/0;return e.forEach(function(e){isFinite(e)&&(t=Math.max(t,e))}),isFinite(t)?t:0}function dt(e,t,n){return lt(e)+((e,t,n)=>{var i=e.length;if(!i)return 0;r=1/0,t.forEach(function(e){isFinite(e)&&(r=Math.min(r,e))});var r,o=isFinite(r)?r:0,s=lt(e),a=0;if(!n)return 0;for(var u=0;u<i;++u){var c=e[u],h=t[u];isFinite(c)&&isFinite(h)&&(c-=s,h-=o,a=u?Math.max(a,a+c-h):c-h)}return a})(e,t,n)}function pt(e,t,n){for(var i=n.inlinePos,r=n.inlineSize,o=n.contentPos,s=n.contentSize,a=i;a<i+r;++a)e[a]=Math.min(e[a],o),t[a]=Math.max(t[a],o+s)}u(yt,ft=R),(z=yt.prototype).applyGrid=function(e,t,n){var i=this._getFrame(),r=i.inlineSize,o=i.contentSize,s=i.rects,a=this.options.useFrameFill,u=(b=this.getRectSize(r)).inlineSize,c=b.contentSize,h=this.getInlineGap(),l=this.getContentGap(),d=e.length;if(!d||!r||!o)return{start:n,end:n};for(var p=s.length,f=N(r).map(function(){return 1/0}),g=N(r).map(function(){return-1/0}),m=i.outline.map(function(e){return e*(c+l)}),y=0;y<d;y+=p)for(var R=dt(g,m,a),v=0;v<p&&y+v<d;++v){var S=e[y+v],z=s[v],E=z.contentPos,_=z.inlinePos,I=z.contentSize,C=_*(u+h),O=(z=z.inlineSize)*(u+h)-h;pt(f,g,{inlinePos:_,inlineSize:z,contentPos:E=R+E*(c+l),contentSize:(I=I*(c+l)-l)+l}),S.setCSSGridRect({inlinePos:C,contentPos:E,inlineSize:O,contentSize:I})}var P,b="end"===t,T=((o=n.length?n:[0]).length!==r&&(P=(b?Math.max:Math.min).apply(Math,o),o=N(r).map(function(){return P})),f=f.map(function(e){return isFinite(e)?e:0}),g=g.map(function(e){return isFinite(e)?e:0}),b?dt(o,f,a):dt(g,o,a));return e.forEach(function(e){e.cssContentPos+=T}),{start:f.map(function(e){return e+T}),end:g.map(function(e){return e+T})}},z.getComputedOutlineLength=function(){var e=this.options.frame;return e.length?e[0].length:0},z.getComputedOutlineSize=function(){var e,t=this.options.rectSize;return"object"==typeof t?t.inlineSize:(e=this.getInlineGap(),t||(this.getContainerInlineSize()+e)/this.getComputedOutlineLength()-e)},z.getRectSize=function(e){var t,n=this.options.rectSize;return"object"==typeof n?n:(t=this.getInlineGap(),{inlineSize:n=n||(this.getContainerInlineSize()+t)/e-t,contentSize:n})},z._getFrame=function(){for(var e=this.options.frame,t=e.length,n=t?e[0].length:0,i=[],r={},o=N(n).map(function(){return 1/0}),s=N(n).map(function(){return-1/0}),a=0;a<t;++a)for(var u=0;u<n;++u){var c=e[a][u];c&&!r[a+","+u]&&(pt(o,s,c=this._findRect(r,c,a,u,n,t)),i.push(c))}return i.sort(function(e,t){return e.type<t.type?-1:1}),{rects:i,inlineSize:n,contentSize:t,outline:o}},z._findRect=function(e,t,n,i,r,o){for(var s=this.options.frame,a=1,u=1,c=i;c<r&&s[n][c]===t;++c)u=c-i+1;for(var h=n;h<o&&s[h][i]===t;++h)a=h-n+1;for(var l=n;l<n+a;++l)for(var d=i;d<i+u;++d)e[l+","+d]=!0;return{type:t,inlinePos:i,contentPos:n,inlineSize:u,contentSize:a}},yt.propertyTypes=f(f({},R.propertyTypes),{frame:c.RENDER_PROPERTY,useFrameFill:c.RENDER_PROPERTY,rectSize:c.RENDER_PROPERTY}),yt.defaultOptions=f(f({},R.defaultOptions),{frame:[],rectSize:0,useFrameFill:!0});var ft,z=Le([y],yt),gt=((b=mt.prototype).scaleTo=function(e,t){var n=this.inlineSize?e/this.inlineSize:0,i=this.contentSize?t/this.contentSize:0;this.items.forEach(function(e){0!=n&&(e.inlinePos*=n,e.inlineSize*=n),0!=i&&(e.contentPos*=i,e.contentSize*=i)}),this.inlineSize=e,this.contentSize=t},b.push=function(e){this.items.push(e)},b.getOrgSizeWeight=function(){return this.orgInlineSize*this.orgContentSize},b.getSize=function(){return this.inlineSize*this.contentSize},b.getOrgRatio=function(){return 0===this.orgContentSize?0:this.orgInlineSize/this.orgContentSize},b.getRatio=function(){return 0===this.contentSize?0:this.inlineSize/this.contentSize},mt);function mt(e){var t,n=f({orgInlineSize:0,orgContentSize:0,inlineSize:0,contentSize:0,inlinePos:0,contentPos:0,items:[]},e);for(t in n)this[t]=n[t]}function yt(){return null!==ft&&ft.apply(this,arguments)||this}function E(e,t){return((e/=t)<1?1/e:e)-1}u(Mt,zt=R),(b=Mt.prototype).applyGrid=function(e,t,n){var i=this,r=this.options.aspectRatio,o=this.getContainerInlineSize(),s=o/r,a=this.getInlineGap(),u=this.getContentGap(),r=n.length?n:[0],c="end"===t?Math.max.apply(Math,r):Math.min.apply(Math,r)-s-u,n=c+s+u,h=new gt({});return e.forEach(function(e){e=new gt({inlineSize:e.orgInlineSize,contentSize:e.orgContentSize,orgInlineSize:e.orgInlineSize,orgContentSize:e.orgContentSize}),i._findBestFitArea(h,e),h.push(e),h.scaleTo(o+a,s+u)}),e.forEach(function(e,t){var n=(t=h.items[t]).inlineSize-a,i=t.contentSize-u,r=c+t.contentPos,t=t.inlinePos;e.setCSSGridRect({inlinePos:t,contentPos:r,inlineSize:n,contentSize:i})}),{start:[c],end:[n]}},b._findBestFitArea=function(e,f){var g,m,y,R,v,S,z,t,n,i,r;0===e.getRatio()?(e.orgInlineSize=f.inlineSize,e.orgContentSize=f.contentSize,e.inlineSize=f.inlineSize,e.contentSize=f.contentSize):(m=1/0,y=!1,R={inlineSize:0,contentSize:0},v={inlineSize:0,contentSize:0},S=this._getWeight("size"),z=this._getWeight("ratio"),e.items.forEach(function(e){for(var t=E(e.getOrgSizeWeight(),e.getSize())*S,n=E(e.getOrgRatio(),e.getRatio())*z,i=e.inlineSize,r=e.contentSize,o=0;o<2;++o){var s=void 0,a=void 0,u=void 0,c=void 0,h=(0===o?(u=s=i,c=r-(a=r*(f.contentSize/(e.orgContentSize+f.contentSize)))):(c=a=r,u=i-(s=i*(f.inlineSize/(e.orgInlineSize+f.inlineSize)))),s*a),l=s/a,d=u*c,p=c/c,h=E(f.getSize(),h)*S;(h=(h+=E(f.getRatio(),l)*z)+(E(e.getOrgSizeWeight(),d)*S-t)+(E(e.getOrgRatio(),p)*z-n))===Math.min(h,m)&&(m=h,g=e,y=0===o,R.inlineSize=s,R.contentSize=a,v.inlineSize=u,v.contentSize=c)}}),e=g,n=R,i=v,r=y,(t=f).contentSize=n.contentSize,t.inlineSize=n.inlineSize,e.contentSize=i.contentSize,e.inlineSize=i.inlineSize,r?(t.contentPos=e.contentPos+e.contentSize,t.inlinePos=e.inlinePos):(t.inlinePos=e.inlinePos+e.inlineSize,t.contentPos=e.contentPos))},b.getComputedOutlineLength=function(){return 1},b.getComputedOutlineSize=function(){return this.getContainerInlineSize()},b._getWeight=function(e){var t=this.options,n=t.weightPriority;return n===e?100:"custom"===n?t[e+"Weight"]:1},Mt.propertyTypes=f(f({},R.propertyTypes),{aspectRatio:c.RENDER_PROPERTY,sizeWeight:c.RENDER_PROPERTY,ratioWeight:c.RENDER_PROPERTY,weightPriority:c.RENDER_PROPERTY}),Mt.defaultOptions=f(f({},R.defaultOptions),{aspectRatio:1,sizeWeight:1,ratioWeight:1,weightPriority:"custom"});var O,P,Rt,vt,St,zt,b=Le([y],Mt),s="undefined"!=typeof window?window.navigator.userAgent:"",Et=/iPhone|iPad/.test(s),_t="infinitegrid-container",It={renderOnPropertyChange:!0,useFit:!0,autoResize:!0},l=_({},l),T={START:"start",END:"end",NONE:""},M={CHANGE_SCROLL:"changeScroll",REQUEST_APPEND:"requestAppend",REQUEST_PREPEND:"requestPrepend",RENDER_COMPLETE:"renderComplete",CONTENT_ERROR:"contentError"},Ct={type:!0,groupKey:!0,key:!0,element:!0,html:!0,data:!0,inserted:!0,attributes:!0},r=["insertByGroupIndex","updateItems","getItems","getVisibleItems","getGroups","getVisibleGroups","renderItems","getContainerElement","getScrollContainerElement","getWrapperElement","setStatus","getStatus","removePlaceholders","prependPlaceholders","appendPlaceholders","getStartCursor","getEndCursor","setCursors"],Ot=((s=O={})[s.NORMAL=0]="NORMAL",s[s.VIRTUAL=1]="VIRTUAL",s[s.LOADING=2]="LOADING",(s=P={})[s.NORMAL=0]="NORMAL",s[s.VIRTUAL=1]="VIRTUAL",s[s.LOADING=2]="LOADING",(s=Rt={})[s.NOT_REMOVE=0]="NOT_REMOVE",s[s.MINIMIZE_INVISIBLE_ITEMS=1]="MINIMIZE_INVISIBLE_ITEMS",s[s.MINIMIZE_INVISIBLE_GROUPS=2]="MINIMIZE_INVISIBLE_GROUPS",s[s.REMOVE_INVISIBLE_GROUPS=3]="REMOVE_INVISIBLE_GROUPS",-9999),x=(e(Tt,St=Xe),(D=Tt.prototype).getVirtualStatus=function(){return{type:P.VIRTUAL,groupKey:this.groupKey,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes}},D.getMinimizedStatus=function(){var e=_(_({},St.prototype.getMinimizedStatus.call(this)),{type:P.NORMAL,groupKey:this.groupKey});return this.html&&(e.html=this.html),e},Tt),Pt=(e(bt,vt=R),(D=bt.prototype).getLoadingItem=function(){return this.items[0]||null},D.startLoading=function(){var e=this.items[0].element;e&&(null!=this.initialDisplay?this.initialDisplay=e.style.display||"":this.initialDisplay?e.style.display=this.initialDisplay:e.style.removeProperty("display"))},D.endLoading=function(){var e;this.type&&(e=this.items[0].element)&&(e.style.display="none")},D.setLoadingItem=function(e){if(e){var t=this.getLoadingItem();if(t)for(var n in e)t[n]=e[n];else this.items=[new x(this.options.horizontal,_(_({},e),{type:P.LOADING,key:"__INFINITEGRID__LOADING_ITEM"}))]}else this.items=[]},D.applyGrid=function(e,t,n){var i,r;return e.length?(i=n.length?d([],n,!0):[0],e=e[0],r=e.contentSize+this.getContentGap(),e.cssInlinePos=this.getContainerInlineSize()/2-e.inlineSize/2,"end"===t?(t=Math.max.apply(Math,i),e.cssContentPos=t,{start:i,end:i.map(function(e){return e+r})}):(t=Math.min.apply(Math,i),e.cssContentPos=t-r,{start:i.map(function(e){return e-r}),end:i})):{start:n,end:n}},bt);function bt(){var e=null!==vt&&vt.apply(this,arguments)||this;return e.type="",e.isWaitEnd=!1,e.initialDisplay=null,e}function Tt(e,t){var n,i;return(e=St.call(this,e,_({html:"",type:P.NORMAL,cssRect:{top:Ot,left:Ot}},t))||this).type===P.VIRTUAL&&((e.rect.width||e.rect.height)&&(e.mountState=C.UNMOUNTED),t=e.orgRect,n=e.rect,(i=e.cssRect).width?n.width=i.width:t.width&&(n.width=t.width),i.height?n.height=i.height:t.height&&(n.height=t.height)),e}function Mt(){return null!==zt&&zt.apply(this,arguments)||this}function xt(e){var t;return e?("string"==typeof e?t=document.querySelector(e):e instanceof Element?t=e:("value"in e||"current"in e)&&(t=e.value||e.current),t):null}function wt(e){return e===window}function Dt(e){return"number"==typeof e}function Lt(e){return"string"==typeof e}function Nt(e){return e.reduce(function(e,t){return d(d([],e,!0),t,!0)},[])}function Gt(e){var t,n={},i={},r=R.defaultOptions;for(t in e){var o=e[t];t in It||(i[t]=o),t in r&&(n[t]=o)}return _(_({},n),{gridOptions:i})}function kt(i){var r,o=[],s={},a={},u=(i.filter(function(e){return null!=e.groupKey}).forEach(function(e){e=e.groupKey,a[e]=!0}),!1);return i.forEach(function(e,t){null!=e.groupKey?u=!1:!e.inserted&&i[t-1]?(e.groupKey=i[t-1].groupKey,u=!1):(u||(r=Ut(a),u=!0,a[r]=!0),e.groupKey=r);var n=s[t=e.groupKey];n||(s[t]=n={groupKey:t,items:[]},o.push(n)),n.items.push(e)}),o}function At(e,t,n,i){var e=Q(e,t,function(e){return e}),r=-1,o=-1;return e.maintained.forEach(function(e){var t=e[0],e=e[1];n<=t&&t<=i&&(o=-1===r?r=e:(r=Math.min(r,e),Math.max(o,e)))}),{startCursor:r,endCursor:o}}function Kt(e,t,n){var i,r=[];if("start"===t){if(-1===(i=w(e,function(e){return e.type===O.NORMAL})))return[];t=0<=(t=w(e,function(t){return 0<=w(n,function(e){return e.groupKey===t.groupKey})}))?Math.min(i,t):i,r=e.slice(0,t)}else{if(-1===(i=Yt(e,function(e){return e.type===O.NORMAL})))return[];t=0<=(t=Yt(e,function(t){return 0<=w(n,function(e){return e.groupKey===t.groupKey})}))?Math.max(i,t):i,r=e.slice(t+1)}return r}function Vt(e){var t,i=e.prototype;for(t in e.propertyTypes)(n=>{Object.defineProperty(i,n,{enumerable:!0,configurable:!0,get:function(){var e=this.groupManager.options;return(n in e?e:e.gridOptions)[n]},set:function(e){var t;this.groupManager[n]!==e&&(this.groupManager.gridOptions=((t={})[n]=e,t))}})})(t)}function Ut(e,t){void 0===t&&(t="");for(var n=0;;){var i="infinitegrid_".concat(t).concat(n++);if(!(i in e))return i}}function jt(e){var t=document.createElement("div");return t.innerHTML=e,qt(t.children)}function Ft(e,i){return(e=Lt(e)?jt(e):e).map(function(e){var t,n="";if(Lt(e))n=e;else{if(!("parentNode"in e))return _({groupKey:i,inserted:!0},e);n=(t=e).outerHTML}return{key:void 0,groupKey:i,html:n,element:t,inserted:!0}})}function qt(e){var t=[];if(e)for(var n=e.length,i=0;i<n;i++)t.push(e[i]);return t}function w(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return i;return-1}function Yt(e,t){for(var n=e.length-1;0<=n;--n)if(t(e[n],n))return n;return-1}function Bt(e,n){return e.length===n.length&&e.every(function(e,t){return n[t]===e})}function Wt(e){return Nt(e.map(function(e){return e.grid.getItems()}))}function Ht(e,t){return t?d([],e,!0):e.filter(function(e){return e.type!==P.VIRTUAL})}var Zt,Xt,Qt,Jt,$t,en,tn,nn,rn,on,sn,an,D,un=r,cn=(e(In,an=R),D=In.prototype,Object.defineProperty(D,"gridOptions",{set:function(n){var e,t=(r=Gt(n)).gridOptions,i=k(r,["gridOptions"]),r=this._checkShouldRender(n);for(e in this.options.gridOptions=_(_({},this.options.gridOptions),t),d([this._mainGrid],this.groups.map(function(e){return e.grid}),!0).forEach(function(e){for(var t in n)e[t]=n[t]}),i)this[e]=i[e];this._loadingGrid.gap=this.gap,r&&this.scheduleRender()},enumerable:!1,configurable:!0}),D.getItemByKey=function(e){return this.itemKeys[e]||null},D.getGroupItems=function(e){return Ht(this.groupItems,e)},D.getVisibleItems=function(e){return Ht(this.items,e)},D.getRenderingItems=function(){return this.hasPlaceholder()?this.items:this.items.filter(function(e){return e.type!==P.VIRTUAL})},D.getGroups=function(e){return Ht(this.groups,e)},D.hasVisibleVirtualGroups=function(){return this.getVisibleGroups(!0).some(function(e){return e.type===O.VIRTUAL})},D.hasPlaceholder=function(){return!!this._placeholder},D.hasLoadingItem=function(){return!!this._getLoadingItem()},D.updateItems=function(e,t){return void 0===e&&(e=this.groupItems),an.prototype.updateItems.call(this,e,t)},D.setPlaceholder=function(e){this._placeholder=e,this._updatePlaceholder()},D.getLoadingType=function(){return this._loadingGrid.type},D.startLoading=function(e){return this._loadingGrid.type=e,this.items=this._getRenderingItems(),!0},D.waitEndLoading=function(){return!!this._loadingGrid.type&&(this._loadingGrid.isWaitEnd=!0)},D.endLoading=function(){var e;return!!this._loadingGrid.isWaitEnd&&(e=this._loadingGrid.type,this._loadingGrid.type="",this._loadingGrid.endLoading(),this.items=this._getRenderingItems(),!!e)},D.setLoading=function(e){this._loadingGrid.setLoadingItem(e),this.items=this._getRenderingItems()},D.getVisibleGroups=function(e){return Ht(this.groups.slice(this.startCursor,this.endCursor+1),e)},D.getComputedOutlineLength=function(e){return void 0===e&&(e=this.items),this._mainGrid.getComputedOutlineLength(e)},D.getComputedOutlineSize=function(e){return void 0===e&&(e=this.items),this._mainGrid.getComputedOutlineSize(e)},D.applyGrid=function(e,i,t){var n,r,o,s,a,u,c,h=this,l=this.groups.slice();return l.length?((n=this._loadingGrid).getLoadingItem()&&("start"===n.type?l.unshift(this._getLoadingGroup()):"end"===n.type&&l.push(this._getLoadingGroup())),n=l.slice(),r=t,"start"===i&&n.reverse(),o=this.options.appliedItemChecker,t=this.groupItems,s=this.getComputedOutlineLength(t),a=this.getComputedOutlineSize(t),u=this.itemRenderer,c=[],n.forEach(function(e){var t=e.grid,n=t.getItems(),e=e.type===O.VIRTUAL&&!n[0],n=(c="end"===i?d(d([],c,!0),n,!0):d(d([],n,!0),c,!0),t.outlineLength=s,t.outlineSize=a,c.filter(function(e){return e.mountState!==C.UNCHECKED&&e.rect.width||u.updateItem(e,!0),e.orgRect.width&&e.rect.width||o(e,t)})),e=e?h._applyVirtualGrid(t,i,r):n.length?t.applyGrid(n,i,r):{start:d([],r,!0),end:d([],r,!0)};t.setOutlines(e),r=e.passed||e[i],c=null!=(e=null==(n=e.passedItems)?void 0:n.map(function(e){return c[e]}))?e:[]}),{start:l[0].grid.getOutlines().start,end:l[l.length-1].grid.getOutlines().end}):{start:[],end:[]}},D.syncItems=function(e){var o=this,t=this.itemKeys,e=(this.itemKeys={},this._syncItemInfos(e.map(function(e){var t,n=e,i={};for(t in n)t in Ct&&(i[t]=n[t]);return i}),t)),s=this.groupKeys,t=kt(e),e=this._splitVirtualGroups("start",t),n=this._splitVirtualGroups("end",t),e=(t=d(d(d([],e,!0),this._mergeVirtualGroups(t),!0),n,!0)).map(function(e){var t=e.groupKey,n=!(e=e.items)[0]||e[0].type===P.VIRTUAL,i=null!=(i=null==(i=s[t])?void 0:i.grid)?i:o._makeGrid(),r=n?e:e.filter(function(e){return e.type===P.NORMAL});return i.setItems(r),{type:n?O.VIRTUAL:O.NORMAL,groupKey:t,grid:i,items:r,renderItems:e}});this._registerGroups(e)},D.renderItems=function(e){var t;return(e=void 0===e?{}:e).useResize&&(this.groupItems.forEach(function(e){e.updateState=m.NEED_UPDATE}),t=this._getLoadingItem())&&(t.updateState=m.NEED_UPDATE),an.prototype.renderItems.call(this,e)},D.setCursors=function(e,t){this.startCursor=e,this.endCursor=t,this.items=this._getRenderingItems()},D.getStartCursor=function(){return this.startCursor},D.getEndCursor=function(){return this.endCursor},D.getGroupStatus=function(e,t){var n,i=this.startCursor,r=this.endCursor,o=this.groups,s=o[i],a=o[r],u=i,c=r,h=e===Rt.MINIMIZE_INVISIBLE_ITEMS,l=e===Rt.MINIMIZE_INVISIBLE_GROUPS;if(e===Rt.REMOVE_INVISIBLE_GROUPS)n=this.getVisibleGroups(t),c=n.length-1,u=0;else if(n=this.getGroups(t),!t){for(var u=-1,c=-1,d=i;d<=r;++d)if((p=o[d])&&p.type!==O.VIRTUAL){u=n.indexOf(p);break}for(var p,d=r;i<=d;--d)if((p=o[d])&&p.type!==O.VIRTUAL){c=n.lastIndexOf(p);break}}var e=n.map(function(e,t){var n=e.grid,e=e.groupKey,t=t<u||c<t,i=h&&t,t=l&&t,r=n.getItems(),r=t?[]:r.map(function(e){return i?e.getVirtualStatus():e.getMinimizedStatus()});return{type:t||i?O.VIRTUAL:O.NORMAL,groupKey:e,outlines:n.getOutlines(),items:r}}),f=(t=this.getGroupItems()).indexOf(null==s?void 0:s.items[0]),t=t.indexOf(null==a?void 0:a.items.slice().reverse()[0]);return{cursors:[u,c],orgCursors:[i,r],itemCursors:[f,t],startGroupKey:null==s?void 0:s.groupKey,endGroupKey:null==a?void 0:a.groupKey,groups:e,outlines:this.outlines}},D.fitOutlines=function(e){void 0===e&&(e=this.useFit);var t,i,n=this.groups;n[0]&&(t=this.outlines.start,i=t.length?Math.min.apply(Math,t):0,!e&&0<i||(n.forEach(function(e){var t=(n=(e=e.grid).getOutlines()).start,n=n.end;e.setOutlines({start:t.map(function(e){return e-i}),end:n.map(function(e){return e-i})})}),this.groupItems.forEach(function(e){var t=e.cssContentPos;Dt(t)&&(e.cssContentPos=t-i)})))},D.setGroupStatus=function(e){var o=this,s=(this.itemKeys={},this.groupItems=[],this.items=[],this.groupKeys),t=e.groups.map(function(e){var t=e.type,n=e.groupKey,i=e.items,e=e.outlines,i=o._syncItemInfos(i),r=null!=(r=null==(r=s[n])?void 0:r.grid)?r:o._makeGrid();return r.setOutlines(e),r.setItems(i),{type:t,groupKey:n,grid:r,items:i,renderItems:i}});this.setOutlines(e.outlines),this._registerGroups(t),this._updatePlaceholder(),this.setCursors(e.cursors[0],e.cursors[1])},D.appendPlaceholders=function(e,t){return this.insertPlaceholders("end",e,t)},D.prependPlaceholders=function(e,t){return this.insertPlaceholders("start",e,t)},D.removePlaceholders=function(e){var t,n,i=this.groups,r=i.length;"start"===e?(n=w(i,function(e){return e.type===O.NORMAL}),i.splice(0,n)):"end"===e?(n=Yt(i,function(e){return e.type===O.NORMAL}),i.splice(n+1,r-n-1)):(t=e.groupKey,-1<(n=w(i,function(e){return e.groupKey===t}))&&i.splice(n,1)),this.syncItems(Wt(this.getGroups()))},D.insertPlaceholders=function(e,t,n){void 0===n&&(n=Ut(this.groupKeys,"virtual_"));var i=[],t=(Dt(t)?i=(e=>{for(var t=[],n=0;n<e;++n)t.push(n);return t})(t).map(function(){return{type:P.VIRTUAL,groupKey:n}}):Array.isArray(t)&&(i=t.map(function(e){return _(_({groupKey:n},e),{type:P.VIRTUAL})})),this._makeGrid()),i=this._syncItemInfos(i,this.itemKeys),t=(this._updatePlaceholder(i),t.setItems(i),{type:O.VIRTUAL,groupKey:n,grid:t,items:i,renderItems:i});return this.groupKeys[n]=t,"end"===e?(this.groups.push(t),(e=this.groupItems).push.apply(e,i)):(this.groups.splice(0,0,t),(e=this.groupItems).splice.apply(e,d([0,0],i,!1)),-1<this.startCursor&&(++this.startCursor,++this.endCursor)),{group:t,items:i}},D.shouldRerenderItems=function(){var n=!1;return this.getVisibleGroups().forEach(function(e){var t=e.items;t.length===e.renderItems.length||t.every(function(e){return e.mountState===C.UNCHECKED})||(n=!0,e.renderItems=d([],t,!0))}),n&&(this.items=this._getRenderingItems()),n},D._updateItems=function(e){this.itemRenderer.updateEqualSizeItems(e,this.groupItems)},D._getGroupItems=function(){return Wt(this.getGroups(!0))},D._getRenderingItems=function(){var e=Nt(this.getVisibleGroups(!0).map(function(e){return e.renderItems})),t=this._loadingGrid,n=t.getLoadingItem();return n&&("end"===t.type?e.push(n):"start"===t.type&&e.unshift(n)),e},D._checkShouldRender=function(e){var t,n=this.options.gridConstructor,i=this.gridOptions,r=n.propertyTypes;for(t in i)if(!(t in e)&&r[t]===c.RENDER_PROPERTY)return!0;for(t in e)if(i[t]!==e[t]&&r[t]===c.RENDER_PROPERTY)return!0;return!1},D._applyVirtualGrid=function(e,t,n){var i=n.length?d([],n,!0):[0];return(e=(n=e.getOutlines())["end"===t?"start":"end"]).length!==i.length||e.some(function(e,t){return e!==i[t]})?{start:d([],i,!0),end:d([],i,!0)}:n},D._syncItemInfos=function(e,r){void 0===r&&(r={});var o=this.options.horizontal,s=this.itemKeys;return e.filter(function(e){return null!=e.key}).forEach(function(e){var t=e.key,n=r[t];n?n.type===P.VIRTUAL&&e.type!==P.VIRTUAL?s[t]=new x(o,_({orgRect:n.orgRect,rect:n.rect},e)):(e.data&&(n.data=e.data),null!=e.groupKey&&(n.groupKey=e.groupKey),e.element&&(n.element=e.element),s[t]=n):s[t]=new x(o,_({},e))}),e.map(function(e){var t,n=e.key,i=(null==e.key&&(n=Ut(s,e.type===P.VIRTUAL?"virtual_":"")),s[n]);return i||((t=r[n])?(i=t,e.data&&(i.data=e.data),e.element&&(i.element=e.element)):i=new x(o,_(_({},e),{key:n})),s[n]=i),i})},D._registerGroups=function(e){var t={};e.forEach(function(e){t[e.groupKey]=e}),this.groups=e,this.groupKeys=t,this.groupItems=this._getGroupItems()},D._splitVirtualGroups=function(e,t){var e=Kt(this.groups,e,t),n=this.itemKeys;return e.forEach(function(e){e.renderItems.forEach(function(e){n[e.key]=e})}),e},D._mergeVirtualGroups=function(e){var i=this.itemKeys,r=this.groupKeys;return e.forEach(function(e){var t,n=r[e.groupKey];n&&(t=e.items).every(function(e){return e.mountState===C.UNCHECKED})&&n.renderItems.forEach(function(e){e.type!==P.VIRTUAL||i[e.key]||(t.push(e),i[e.key]=e)})}),e},D._updatePlaceholder=function(e){void 0===e&&(e=this.groupItems);var o=this._placeholder;o&&e.filter(function(e){return e.type===P.VIRTUAL}).forEach(function(e){var t,n=e,i=o;for(t in i){var r=i[t];n[t]="object"==typeof r?_(_({},n[t]),r):i[t]}})},D._makeGrid=function(){var e=this.options.gridConstructor,t=this.gridOptions;return new e(this.containerElement,_(_({},t),{useFit:!1,autoResize:!1,useResizeObserver:!1,observeChildren:!1,renderOnPropertyChange:!1,externalContainerManager:this.containerManager,externalItemRenderer:this.itemRenderer}))},D._getLoadingGroup=function(){var e=this._loadingGrid,t=e.getItems();return{groupKey:"__INFINITEGRID__LOADING_GRID",type:O.NORMAL,grid:e,items:t,renderItems:t}},D._getLoadingItem=function(){return this._loadingGrid.getLoadingItem()},In.defaultOptions=_(_({},R.defaultOptions),{appliedItemChecker:function(){return!1},gridConstructor:null,gridOptions:{}}),In.propertyTypes=_(_({},R.propertyTypes),{gridConstructor:c.PROPERTY,gridOptions:c.PROPERTY}),t([y],In)),hn=(e(_n,sn=n),(D=_n.prototype).scroll=function(n){var e=this.startCursor,t=this.endCursor,i=this.items,r=i.length,o=this.size,s=(u=this.options).defaultDirection,a=u.threshold,u=u.useRecycle,s="end"===s;if(r)if(-1===e||-1===t)this.trigger("change",{prevStartCursor:e,prevEndCursor:t,nextStartCursor:h=s?0:r-1,nextEndCursor:h});else{var c=n+o,h=Math.max.apply(Math,i[e].startOutline),o=Math.min.apply(Math,i[t].endOutline),l=i.map(function(e){var t=e.startOutline,e=e.endOutline;return!(!t.length||!e.length||Bt(t,e))&&(t=Math.min.apply(Math,t),e=Math.max.apply(Math,e),t-a<=c)&&n<=e+a}),d=0<e,p=t<r-1,h=n<=h+a,o=o-a<=c,f=l.indexOf(!0),g=l.lastIndexOf(!0);if(-1===f&&(f=e,g=t),u||(f=Math.min(f,e),g=Math.max(g,t)),f===e&&d&&h&&--f,g===t&&p&&o&&(g+=1),(l=i.slice(f,g+1)).every(function(e){return!0===e.isVirtual})){for(var m=!1,y=f-1;0<=y;--y)if(!i[y].isVirtual){f=y,m=!0;break}if(!m)for(y=g+1;y<r;++y)if(!i[y].isVirtual){g=y,m=!0;break}m&&(l=i.slice(f,g+1))}var R,u=l.some(function(e){return!0===e.isVirtual});(e===f&&t===g||(this.trigger("change",{prevStartCursor:e,prevEndCursor:t,nextStartCursor:f,nextEndCursor:g}),u))&&(u?(p=null==(d=l[0])?void 0:d.isVirtual,d=null==(u=l[l.length-1])?void 0:u.isVirtual,s&&o||!p?!s&&h||!d||l[u=(R=Yt(l,function(e){return!e.isVirtual}))+1]&&this.trigger("requestAppend",{key:-1<R?l[R].key:void 0,nextKey:l[u].key,nextKeys:l.slice(u).map(function(e){return e.key}),isVirtual:!0}):l[p=(-1===(R=w(l,function(e){return!e.isVirtual}))?l.length:R)-1]&&this.trigger("requestPrepend",{key:-1<R?l[R].key:void 0,nextKey:l[p].key,nextKeys:l.slice(0,1+p).map(function(e){return e.key}),isVirtual:!0})):this._requestVirtualItems()||(s&&o||!h?!s&&h||!o||this.trigger("requestAppend",{key:i[t].key,isVirtual:!1}):this.trigger("requestPrepend",{key:i[e].key,isVirtual:!1})))}else this.trigger(s?"requestAppend":"requestPrepend",{key:void 0,isVirtual:!1})},D._requestVirtualItems=function(){var e="end"===this.options.defaultDirection,t=this.items,n=this.getVisibleItems(),i=n.filter(function(e){return!e.isVirtual}),r=n.length,o=i.length,s=this.getStartCursor(),a=this.getEndCursor();if(o!==r)if(o){var u=i[0].key,c=i[o-1].key,i=w(t,function(e){return e.key===u})-1,a=(o=w(t,function(e){return e.key===c})+1)<=a,s=s<=i;if((e||!s)&&a)return this.trigger("requestAppend",{key:c,nextKey:t[o].key,isVirtual:!0}),!0;if((!e||!a)&&s)return this.trigger("requestPrepend",{key:u,nextKey:t[i].key,isVirtual:!0}),!0}else if(r)return o=n[r-1],e?this.trigger("requestAppend",{nextKey:n[0].key,isVirtual:!0}):this.trigger("requestPrepend",{nextKey:o.key,isVirtual:!0}),!0;return!1},D.setCursors=function(e,t){this.startCursor=e,this.endCursor=t},D.setSize=function(e){this.size=e},D.getStartCursor=function(){return this.startCursor},D.getEndCursor=function(){return this.endCursor},D.isLoading=function(e){var t=this.startCursor,n=this.endCursor,i=(o=this.items)[t],r=o[n],o=o.length;return!(e===T.END&&-1<n&&n<o-1&&!r.isVirtual&&!Bt(r.startOutline,r.endOutline)||e===T.START&&0<t&&!i.isVirtual&&!Bt(i.startOutline,i.endOutline))},D.setItems=function(e){this.items=e;var t={};e.forEach(function(e){t[e.key]=e}),this.itemKeys=t},D.syncItems=function(e){var t=this.items,n=this.startCursor,i=this.endCursor,r=At(this.items.map(function(e){return e.key}),e.map(function(e){return e.key}),n,i),o=r.startCursor,n=(r=r.endCursor)-o!=i-n||-1===n||-1===o||0<(t=Q(t.slice(n,i+1),e.slice(o,r+1),function(e){return e.key})).added.length||0<t.removed.length||0<t.changed.length;return this.setItems(e),this.setCursors(o,r),n},D.getItems=function(){return this.items},D.getVisibleItems=function(){var e=this.startCursor,t=this.endCursor;return-1===e?[]:this.items.slice(e,t+1)},D.getSize=function(){return this.size},D.getItemByKey=function(e){return this.itemKeys[e]},D.getItemPartByKey=function(t){var n;return this.items.forEach(function(e){null!=(e=e.parts)&&e.forEach(function(e){e.key===t&&(n=e)})}),n},D.getScrollSize=function(){var e=this.items,t=e.length;return t?Math.max.apply(Math,d([0],e[t-1].endOutline,!1)):0},D.getVisibleArea=function(n,e){var t,i,r,e=(e=void 0===e?this.options.defaultDirection:e)===T.END,o=this.getRenderedVisibleItems();return o.length?(t=o[e?0:length-1],i=e?Math.min.apply(Math,t.startOutline):Math.max.apply(Math,t.endOutline),e?o.forEach(function(e){null!=(e=e.parts)&&e.forEach(function(e){r&&r.pos>=e.pos||i<e.pos&&e.pos<=n&&(i=(r=e).pos)})}):o.forEach(function(e){null!=(e=e.parts)&&e.forEach(function(e){var t=e.pos+e.size;r&&r.pos+r.size<=t||t<i&&n<=t&&(r=e,i=t)})}),{item:t,part:r}):null},D.getRenderedVisibleItems=function(){var e=this.getVisibleItems(),t=e.map(function(e){var t=e.startOutline,n=e.endOutline;return 0!==(e=t.length)&&e===n.length&&t.some(function(e,t){return n[t]!==e})}),n=t.indexOf(!0);return-1===(t=t.lastIndexOf(!0))?[]:e.slice(n,t+1)},D.destroy=function(){this.off(),this.startCursor=-1,this.endCursor=-1,this.items=[],this.size=0},_n),s=(e(En,on=n),(D=En.prototype).updateKey=function(){this.rendererKey=Date.now()},D.getItems=function(){return this.items},D.setContainer=function(e){this.container=e},D.render=function(e,t){return this.syncItems(e,t)},D.update=function(e){var t=this;void 0===e&&(e={}),this._state=_(_({},this._state),e),this.trigger("update",{state:e}),clearTimeout(this._updateTimer),this._updateTimer=window.setTimeout(function(){t.trigger("requestUpdate",{state:e})})},D.updated=function(n){void 0===n&&(n=null!=(r=null==(r=this.container)?void 0:r.children)?r:[]);var e=!!((r=this._diffResult).added.length||r.removed.length||r.changed.length),t=this._state,i=this._isItemChanged,r=r.list;return this._isItemChanged=!1,this._state={},(this.items=r).forEach(function(e,t){e.element=n[t]}),this.trigger("updated",{items:r,elements:qt(n),diffResult:this._diffResult,state:t,isItemChanged:i,isChanged:e}),e},D.syncItems=function(e,t){void 0===t&&(t={});var n=this.rendererKey,e=Q(this.items,e.map(function(e){return _(_({},e),{renderKey:"".concat(n,"_").concat(e.key)})}),function(e){return e.renderKey});return this._isItemChanged=!!e.added.length||!!e.removed.length||!!e.changed.length,this._state=_(_({},this._state),t),this._diffResult=e},D.destroy=function(){this.off()},En),ln=(e(zn,rn=s),zn.prototype.render=function(e,t){var n=this.container,i=(e=rn.prototype.render.call(this,e,t)).prevList,t=e.removed,r=e.ordered,o=e.added,s=e.list,a=d([],i,!0);return t.forEach(function(e){a.splice(e,1),n.removeChild(i[e].element)}),r.forEach(function(e){var t=e[0],e=e[1],t=a.splice(t,1)[0];a.splice(e,0,t),n.insertBefore(t.element,null!=(e=null==(t=a[e+1])?void 0:t.element)?e:null)}),o.forEach(function(e){var t=s[e];a.splice(e,0,t),n.insertBefore(t.element,null!=(e=null==(t=a[e+1])?void 0:t.element)?e:null)}),this.updated(n.children),e},e(Sn,nn=zn),Sn.prototype.syncItems=function(n){var e=nn.prototype.syncItems.call(this,n),t=e.added,i=e.list;return t.forEach(function(e){var t=n[e].orgItem;t.html&&!t.element&&(t.element=jt(t.html)[0]),i[e].element=t.element}),e},Sn),dn=(e(vn,tn=n),(D=vn.prototype).getWrapper=function(){return this.wrapper},D.getContainer=function(){return this.container},D.getScrollContainer=function(){return this.scrollContainer},D.getScrollOffset=function(){return this.scrollOffset},D.getContentSize=function(){return this.contentSize},D.getRelativeScrollPos=function(){return(this.prevScrollPos||0)-this.scrollOffset},D.getScrollPos=function(){return this.prevScrollPos},D.setScrollPos=function(e){this.prevScrollPos=e},D.getOrgScrollPos=function(){var e=this.eventTarget,t=this.options.horizontal,n="scroll".concat(t?"Left":"Top");return wt(e)?window[t?"pageXOffset":"pageYOffset"]||document.documentElement[n]||document.body[n]:e[n]},D.setStatus=function(e){this.contentSize=e.contentSize,this.scrollOffset=e.scrollOffset,this.prevScrollPos=e.prevScrollPos,this.scrollTo(this.prevScrollPos)},D.getStatus=function(){return{contentSize:this.contentSize,scrollOffset:this.scrollOffset,prevScrollPos:this.prevScrollPos}},D.scrollTo=function(e){var t=this.eventTarget,n=(e=this.options.horizontal?[e,0]:[0,e])[0],e=e[1];wt(t)?t.scroll(n,e):(t.scrollLeft=n,t.scrollTop=e)},D.scrollBy=function(e){var t,n,i;e&&(t=this.eventTarget,n=(i=this.options.horizontal?[e,0]:[0,e])[0],i=i[1],this.prevScrollPos+=e,wt(t)?t.scrollBy(n,i):(t.scrollLeft+=n,t.scrollTop+=i))},D.resize=function(){var e=this.scrollContainer,t=this.options.horizontal,n=e===document.body,i=n?{top:0,left:0}:e.getBoundingClientRect(),r=this.container.getBoundingClientRect();this.scrollOffset=(this.getOrgScrollPos()||0)+(t?r.left-i.left:r.top-i.top),this.contentSize=n?t?window.innerWidth:window.innerHeight:t?e.offsetWidth:e.offsetHeight},D.destroy=function(){var e,t,n,i=this.container;this.eventTarget.removeEventListener("scroll",this._onCheck),this._isCreateElement?(e=this.scrollContainer,t=document.createDocumentFragment(),n=qt(i.childNodes),e.removeChild(i),n.forEach(function(e){t.appendChild(e)}),e.appendChild(t)):this.options.container&&(i.style.cssText=this._orgCSSText)},D._init=function(){var e=(i=this.options).container,t=i.containerTag,n=i.horizontal,i=i.scrollContainer,r=s=this.wrapper,o=s,s="";e?(!0===e?((o=document.createElement(t)).style.position="relative",o.className=_t,qt(r.childNodes).forEach(function(e){o.appendChild(e)}),r.appendChild(o),this._isCreateElement=!0):o=xt(e),s=o.style.cssText,(t=r.style).overflowX=(e=n?["scroll","hidden"]:["hidden","scroll"])[0],t.overflowY=e[1],n&&(o.style.height="100%")):(r=xt(i)||document.body,s=o.style.cssText),(t=r===document.body?window:r).addEventListener("scroll",this._onCheck),this._orgCSSText=s,this.container=o,this.scrollContainer=r,this.eventTarget=t,this.resize(),this.setScrollPos(this.getOrgScrollPos())},vn),L=(e(Rn,en=n),(D=Rn.prototype).renderItems=function(e){return this._renderItems(e=void 0===e?{}:e),this},D.getWrapperElement=function(){return this.scrollManager.getWrapper()},D.getScrollContainerElement=function(){return this.scrollManager.getScrollContainer()},D.getContainerElement=function(){return this.scrollManager.getContainer()},D.syncItems=function(e){return this.groupManager.syncItems(e),this._syncGroups(),this},D.setCursors=function(e,t,n){return this.groupManager.setCursors(e,t),this.infinite.setCursors(e,t),n?(this.getVisibleItems().forEach(function(e){e.cssRect.top===Ot&&(e.cssRect={})}),this._syncItems()):(this._update(),this._checkEndLoading()),this},D.getStartCursor=function(){return this.infinite.getStartCursor()},D.getEndCursor=function(){return this.infinite.getEndCursor()},D.append=function(e,t){return this.insert(-1,e,t)},D.prepend=function(e,t){return this.insert(0,e,t)},D.insert=function(e,t,n){var i=this.groupManager.getGroupItems(),t=Ft(t,n);return-1===e?i.push.apply(i,t):i.splice.apply(i,d([e,0],t,!1)),this.syncItems(i)},D.insertByGroupIndex=function(e,t,n){var i,r;return(e=this.groupManager.getGroups()[e])?(i=this.groupManager.getGroupItems(),r=e.groupKey,e=w(i,function(e){return e.groupKey===r}),this.insert(e,t,n)):this.append(t,n)},D.getStatus=function(e,t){return{containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus(),groupManager:this.groupManager.getGroupStatus(e,t),scrollManager:this.scrollManager.getStatus()}},D.setPlaceholder=function(e){return this.groupManager.setPlaceholder(e),this},D.setLoading=function(e){return this.groupManager.setLoading(e),this},D.appendPlaceholders=function(e,t){var n=this,i=this.groupManager.appendPlaceholders(e,t);return this._syncGroups(!0),_(_({},i),{remove:function(){n.removePlaceholders({groupKey:i.group.groupKey})}})},D.prependPlaceholders=function(e,t){var n=this,i=this.groupManager.prependPlaceholders(e,t);return this._syncGroups(!0),_(_({},i),{remove:function(){n.removePlaceholders({groupKey:i.group.groupKey})}})},D.removePlaceholders=function(e){this.groupManager.removePlaceholders(e),this._syncGroups(!0)},D.setStatus=function(e,t){this.itemRenderer.setStatus(e.itemRenderer),this.containerManager.setStatus(e.containerManager),this.scrollManager.setStatus(e.scrollManager);var n=this.groupManager,i=this.containerManager.getInlineSize(),e=(n.setGroupStatus(e.groupManager),this._syncInfinite(),this.infinite.setCursors(n.getStartCursor(),n.getEndCursor()),this._getRenderer().updateKey(),{isResize:this.containerManager.getInlineSize()!==i,isRestore:!0});return t?this._syncItems(e):this._update(e),this},D.removeGroupByIndex=function(e){var t=this.getGroups();return this.removeGroupByKey(t[e].groupKey)},D.removeGroupByKey=function(t){var e=this.getItems(),n=w(e,function(e){return e.groupKey===t}),i=Yt(e,function(e){return e.groupKey===t});return-1===n?this:(e.splice(n,i-n+1),this.syncItems(e))},D.removeByIndex=function(e){var t=this.getItems(!0);return t.splice(e,1),this.syncItems(t)},D.removeByKey=function(t){var e=w(this.getItems(!0),function(e){return e.key===t});return this.removeByIndex(e)},D.updateItems=function(e,t){return this.groupManager.updateItems(e,t=void 0===t?{}:t),this},D.getItems=function(e){return this.groupManager.getGroupItems(e)},D.getVisibleItems=function(e){return this.groupManager.getVisibleItems(e)},D.getRenderingItems=function(){return this.groupManager.getRenderingItems()},D.getGroups=function(e){return this.groupManager.getGroups(e)},D.getVisibleGroups=function(e){return this.groupManager.getVisibleGroups(e)},D.wait=function(e){this._waitType=e=void 0===e?T.END:e,this._checkStartLoading(e)},D.ready=function(e){this._waitType="",e&&(this.groupManager.waitEndLoading(),this.groupManager.endLoading())&&this._update()},D.isWait=function(){return!!this._waitType},D.destroy=function(){this.off(),this._getRenderer().destroy(),this.containerManager.destroy(),this.groupManager.destroy(),this.scrollManager.destroy(),this.infinite.destroy()},D._getRenderer=function(){return this.options.renderer},D._getRendererItems=function(){return this.getRenderingItems().map(function(e){return{element:e.element,key:"".concat(e.type,"_").concat(e.key),orgItem:e}})},D._syncItems=function(e){this._getRenderer().syncItems(this._getRendererItems(),e)},D._render=function(e){this._getRenderer().render(this._getRendererItems(),e)},D._update=function(e){void 0===e&&(e={}),this._getRenderer().update(e)},D._resizeScroll=function(){var e=this.scrollManager;e.resize(),this.infinite.setSize(e.getContentSize())},D._syncGroups=function(e){var t=this.infinite;this.scrollManager.getContentSize()||this._resizeScroll(),this._syncInfinite(),this.groupManager.setCursors(t.getStartCursor(),t.getEndCursor()),e?this._update():this._render()},D._syncInfinite=function(){this.infinite.syncItems(this.getGroups(!0).map(function(e){var t=e.groupKey,n=e.grid,e=e.type,i=n.getOutlines();return{key:t,isVirtual:e===O.VIRTUAL,startOutline:i.start,endOutline:i.end,parts:n.getItems().map(function(e){return{key:e.key,pos:e.computedContentPos,size:e.computedContentSize}})}}))},D._scroll=function(){this.infinite.scroll(this.scrollManager.getRelativeScrollPos())},D._onRequestInsert=function(e,t,n){var i=this;this._waitType?this._checkStartLoading(this._waitType):this.trigger(new I(t,{groupKey:n.key,nextGroupKey:n.nextKey,nextGroupKeys:n.nextKeys||[],isVirtual:n.isVirtual,wait:function(){i.wait(e)},ready:function(e){i.ready(e)}}))},D._renderItems=function(e,t){return void 0===e&&(e={}),!t&&e.useResize&&this.containerManager.resize(),this._resizeScroll(),this.getRenderingItems().length?this.getVisibleGroups(!0).length?this.groupManager.renderItems(e):this.setCursors(0,0):0<(t=qt(this.getContainerElement().children)).length?(this.groupManager.syncItems(Ft(t)),this._syncInfinite(),this.setCursors(0,0,!0),this._getRenderer().updated()):this.infinite.scroll(0),this},D._checkStartLoading=function(e){var t=this.groupManager,n=this.infinite;!t.getLoadingType()&&n.isLoading(e)&&t.startLoading(e)&&t.hasLoadingItem()&&this._update()},D._checkEndLoading=function(){var e=this.groupManager,t=this.groupManager.getLoadingType();!t||this._waitType&&this.infinite.isLoading(t)||!e.waitEndLoading()||!e.hasLoadingItem()||this._update()},Rn.defaultOptions=_(_({},h),{container:!1,containerTag:"div",renderer:null,threshold:100,useRecycle:!0,scrollContainer:null,appliedItemChecker:function(){return!1}}),Rn.propertyTypes=l,t([Vt],Rn)),pn={__proto__:null,default:L,withInfiniteGridMethods:function(e,r){un.forEach(function(i){i in e||(e[i]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(n=this[r])[i].apply(n,e);return n===this[r]?this:n})})},getRenderingItems:function(e,t){var n,i,r,o,s=t.status,a=t.usePlaceholder,u=t.useLoading,c=t.horizontal,h=t.useFirstRender,l=[];return(t=t.grid)?(t.setPlaceholder(a?{}:null),t.setLoading(u?{}:null),t.syncItems(e),l=t.getRenderingItems()):s?(u=s.groupManager,s=!!a,i=!!c,r=Kt(a=u.groups,"start",t=kt(t=e)),o=Kt(a,"end",t),r=d(d(d([],r,!0),t,!0),o,!0),o=(t=At(a.map(function(e){return e.groupKey}),r.map(function(e){return e.groupKey}),u.cursors[0],u.cursors[1])).startCursor,u=Nt(r.slice(o,(a=t.endCursor)+1).map(function(e){return e.items.map(function(e){return new x(i,_({},e))})})),l=u=s?u:u.filter(function(e){return e.type!==P.VIRTUAL})):h&&(n=!!c,l=(t=kt(t=e))[0]?t[0].items.map(function(e){return new x(n,_({},e))}):[]),l},mountRenderingItems:function(e,t){var n=t.grid,i=t.usePlaceholder,r=t.useLoading,o=t.useFirstRender,t=t.status;n&&(i&&n.setPlaceholder({}),r&&n.setLoading({}),t&&n.setStatus(t,!0),n.syncItems(e),o)&&!t&&n.getGroups().length&&n.setCursors(0,0,!0)},InfiniteGridItem:x,MasonryInfiniteGrid:(e(yn,$t=L),yn.propertyTypes=_(_({},L.propertyTypes),v.propertyTypes),yn.defaultOptions=_(_(_({},L.defaultOptions),v.defaultOptions),{gridConstructor:v,appliedItemChecker:function(e,t){return(parseFloat(e.attributes.column)||0)>=t.outlineLength}}),t([Vt],yn)),JustifiedInfiniteGrid:(e(mn,Jt=L),mn.propertyTypes=_(_({},L.propertyTypes),S.propertyTypes),mn.defaultOptions=_(_(_({},L.defaultOptions),S.defaultOptions),{gridConstructor:S}),t([Vt],mn)),FrameInfiniteGrid:(e(gn,Qt=L),gn.propertyTypes=_(_({},L.propertyTypes),z.propertyTypes),gn.defaultOptions=_(_(_({},L.defaultOptions),z.defaultOptions),{gridConstructor:z}),t([Vt],gn)),PackingInfiniteGrid:(e(fn,Xt=L),fn.propertyTypes=_(_({},L.propertyTypes),b.propertyTypes),fn.defaultOptions=_(_(_({},L.defaultOptions),b.defaultOptions),{gridConstructor:b}),t([Vt],fn)),Renderer:s,IS_IOS:Et,CONTAINER_CLASS_NAME:_t,IGNORE_PROPERITES_MAP:It,INFINITEGRID_PROPERTY_TYPES:l,DIRECTION:T,INFINITEGRID_EVENTS:M,ITEM_INFO_PROPERTIES:Ct,INFINITEGRID_METHODS:r,get GROUP_TYPE(){return O},get ITEM_TYPE(){return P},get STATUS_TYPE(){return Rt},INVISIBLE_POS:Ot};function fn(){return null!==Xt&&Xt.apply(this,arguments)||this}function gn(){return null!==Qt&&Qt.apply(this,arguments)||this}function mn(){return null!==Jt&&Jt.apply(this,arguments)||this}function yn(){return null!==$t&&$t.apply(this,arguments)||this}function Rn(e,t){var g=en.call(this)||this,n=(g._waitType="",g._onScroll=function(e){var t=e.direction,n=e.scrollPos,e=e.relativeScrollPos;g._scroll(),g.trigger(new I(M.CHANGE_SCROLL,{direction:t,scrollPos:n,relativeScrollPos:e}))},g._onChange=function(e){g.setCursors(e.nextStartCursor,e.nextEndCursor)},g._onRendererUpdated=function(e){var t,n,r,o,i,s,a;e.items.forEach(function(e){e.orgItem.element=e.element}),e.isChanged?(t=(i=e.diffResult).added,n=i.prevList,r=i.list,(a=i.removed).forEach(function(e){(e=n[e].orgItem).mountState!==C.UNCHECKED&&(e.mountState=C.UNMOUNTED)}),o=g.options.horizontal,i=t.map(function(e){var t,n,i=(e=r[e].orgItem).element;return e.type===P.VIRTUAL?(t=_({},e.cssRect),n=e.rect,!t.width&&n.width&&(t.width=n.width),!t.height&&n.height&&(t.height=n.height),new Xe(o,{element:i,cssRect:t})):e}),s=g.containerManager,g.options.observeChildren&&(s.unobserveChildren(a.map(function(e){return n[e].element})),s.observeChildren(t.map(function(e){return r[e].element}))),s=(a=e.state).isRestore,a=a.isResize,g.itemRenderer.renderItems(i),s&&g._onRenderComplete({mounted:t.map(function(e){return r[e].orgItem}),updated:[],isResize:!1,direction:g.defaultDirection}),s&&!a&&!e.isItemChanged||g.groupManager.renderItems()):(g._checkEndLoading(),g._scroll())},g._onResize=function(e){e.isResizeContainer?g._renderItems({useResize:!0},!0):0<(e=Ge(g.getVisibleItems(),e.childEntries)).length&&g.updateItems(e)},g._onRequestAppend=function(e){g._onRequestInsert(T.END,M.REQUEST_APPEND,e)},g._onRequestPrepend=function(e){g._onRequestInsert(T.START,M.REQUEST_PREPEND,e)},g._onContentError=function(e){var t=e.element,n=e.target,i=e.item,e=e.update;g.trigger(new I(M.CONTENT_ERROR,{element:t,target:n,item:i,update:e,remove:function(){g.removeByKey(i.key)}}))},g._onRenderComplete=function(e){var t,n,i,r=e.isResize,o=e.mounted,s=e.updated,e=e.direction,a=g.infinite,u=g.scrollManager.getRelativeScrollPos(),c=a.getScrollSize(),h=a.getSize(),l=a.getVisibleArea(u,e),d=e===T.END,p=(g._syncInfinite(),l&&(p=l.part,l=l.item,n=i=void 0,p&&(i=a.getItemPartByKey(p.key)),l&&(n=a.getItemByKey(l.key)),i||n)&&(f=0,t=i?(f=i.pos+(d?0:i.size),p.pos+(d?0:p.size)):(i=Math.min.apply(Math,l.startOutline),p=Math.max.apply(Math,l.endOutline),l=Math.min.apply(Math,n.startOutline),n=Math.max.apply(Math,n.endOutline),f=d?l:n,d?i:p),(l=f-t)<0&&(n=a.getScrollSize(),d=a.getSize(),i=Math.max(u-Math.max(0,c-h),0),l+=u-(Math.min(u,Math.max(0,n-d))+i)),g.scrollManager.scrollBy(l)),o.filter(function(e){return e.type!==P.LOADING})),f=(g.trigger(new I(M.RENDER_COMPLETE,{isResize:r,direction:e,mounted:p,updated:s.filter(function(e){return e.type!==P.LOADING}),startCursor:g.getStartCursor(),endCursor:g.getEndCursor(),items:g.getVisibleItems(!0),groups:g.getVisibleGroups(!0)})),g.groupManager.shouldRerenderItems());(f=p.length||s.length?f||!!g.groupManager.endLoading():f)?g._update():(g._checkEndLoading(),g._scroll())},g.options=_(_(_({},g.constructor.defaultOptions),{renderer:(new ln).on("requestUpdate",function(){return g._render()})}),t),(t=g.options).gridConstructor),i=t.containerTag,r=t.container,o=t.renderer,s=t.threshold,a=t.useRecycle,u=t.scrollContainer,c=t.appliedItemChecker,h=(t=k(t,["gridConstructor","containerTag","container","renderer","threshold","useRecycle","scrollContainer","appliedItemChecker"])).horizontal,l=t.attributePrefix,d=t.useTransform,p=t.percentage,f=t.isConstantSize,m=t.isEqualSize,y=t.autoResize,R=t.useResizeObserver,v=t.resizeDebounce,S=t.maxResizeDebounce,z=t.defaultDirection,E=t.useRoundedSize,e=Lt(e)?document.querySelector(e):e,r=(u=new dn(e,{scrollContainer:u,container:r,containerTag:i,horizontal:h}).on({scroll:g._onScroll})).getContainer(),i=new He(r,{horizontal:h,autoResize:y,resizeDebounce:v,maxResizeDebounce:S,useResizeObserver:R}).on("resize",g._onResize),y=new Ze({attributePrefix:l,horizontal:h,useTransform:d,percentage:p,isEqualSize:m,isConstantSize:f,useRoundedSize:E});return(v=new hn({defaultDirection:z,useRecycle:a,threshold:s}).on({change:g._onChange,requestAppend:g._onRequestAppend,requestPrepend:g._onRequestPrepend})).setSize(u.getContentSize()),(S=new cn(r,{appliedItemChecker:c,gridConstructor:n,externalItemRenderer:y,externalContainerManager:i,gridOptions:t})).on({renderComplete:g._onRenderComplete,contentError:g._onContentError}),o.setContainer(r),o.on("updated",g._onRendererUpdated),g.itemRenderer=y,g.groupManager=S,g.wrapperElement=e,g.scrollManager=u,g.containerManager=i,g.infinite=v,g.containerManager.resize(),g}function vn(e,t){var n=tn.call(this)||this;return n.wrapper=e,n.prevScrollPos=null,n.scrollOffset=0,n.contentSize=0,n._isScrollIssue=Et,n._onCheck=function(){var e=n.getScrollPos(),t=n.getOrgScrollPos();n.setScrollPos(t),null===e||n._isScrollIssue&&0===t||e===t?t&&(n._isScrollIssue=!1):(n._isScrollIssue=!1,n.trigger(new I("scroll",{direction:e<t?"end":"start",scrollPos:t,relativeScrollPos:n.getRelativeScrollPos()})))},n.options=_({container:!1,containerTag:"div",horizontal:!1,scrollContainer:null},t),n._init(),n}function Sn(){return null!==nn&&nn.apply(this,arguments)||this}function zn(){return null!==rn&&rn.apply(this,arguments)||this}function En(){var e=null!==on&&on.apply(this,arguments)||this;return e.items=[],e.container=null,e.rendererKey=0,e._updateTimer=0,e._state={},e._isItemChanged=!1,e}function _n(e){var t=sn.call(this)||this;return t.startCursor=-1,t.endCursor=-1,t.size=0,t.items=[],t.itemKeys={},t.options=_({threshold:0,useRecycle:!0,defaultDirection:"end"},e),t}function In(e,t){var n,i;return(t=an.call(this,e,(i=t.gridOptions,n=k(t,["gridOptions"]),_(_({},Gt(i)),n)))||this).groupItems=[],t.groups=[],t.itemKeys={},t.groupKeys={},t.startCursor=0,t.endCursor=0,t._placeholder=null,t._loadingGrid=new Pt(e,{externalContainerManager:t.containerManager,useFit:!1,autoResize:!1,renderOnPropertyChange:!1,gap:t.gap}),t._mainGrid=t._makeGrid(),t}for(Zt in pn)L[Zt]=pn[Zt];return L});