((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DisqusJS=t()})(this,function(){function g(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);(t="function"==typeof Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})):t).forEach(function(e){var t=r,n=o[e];e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n})}return r}var k,j,M,I,N={},R=[],A=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function E(e,t){for(var n in t)e[n]=t[n];return e}function H(e){var t=e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var r,o,i,l={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:l[i]=t[i];if(2<arguments.length&&(l.children=3<arguments.length?k.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===l[i]&&(l[i]=e.defaultProps[i]);return b(e,l,r,o,null)}function b(e,t,n,r,o){return e={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++M:o},null==o&&null!=j.vnode&&j.vnode(e),e}function V(){return{current:null}}function C(e){return e.children}function w(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?x(e):null}function $(e){(e.__d||(e.__d=!0,!n.push(e))||t.__r++)&&I===j.debounceRendering||((I=j.debounceRendering)||setTimeout)(t)}function t(){for(var e;t.__r=n.length;)e=n.sort(function(e,t){return e.__v.__b-t.__v.__b}),n=[],e.some(function(e){var t,n,r,o,i;e.__d&&(o=(r=e.__v).__e,i=e.__P)&&(t=[],(n=E({},r)).__v=r.__v+1,Y(i,r,n,e.__n,void 0!==i.ownerSVGElement,null!=r.__h?[o]:null,t,null==o?x(r):o,r.__h),G(t,r),r.__e!=o)&&function e(t){var n,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(r)})}function F(e,t,n,r,o,i,l,s,u,c){var _,a,d,f,p,h,m,v=r&&r.__k||R,y=v.length;for(n.__k=[],_=0;_<t.length;_++)if(null!=(f=n.__k[_]=null==(f=t[_])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?b(null,f,null,null,f):Array.isArray(f)?b(C,{children:f},null,null,null):0<f.__b?b(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(d=v[_])||d&&f.key==d.key&&f.type===d.type)v[_]=void 0;else for(a=0;a<y;a++){if((d=v[a])&&f.key==d.key&&f.type===d.type){v[a]=void 0;break}d=null}Y(e,f,d=d||N,o,i,l,s,u,c),p=f.__e,(a=f.ref)&&d.ref!=a&&(m=m||[],d.ref&&m.push(d.ref,null,f),m.push(a,f.__c||p,f)),null!=p?(null==h&&(h=p),"function"==typeof f.type&&f.__k===d.__k?f.__d=u=function e(t,n,r){for(var o,i=t.__k,l=0;i&&l<i.length;l++)(o=i[l])&&(o.__=t,n="function"==typeof o.type?e(o,n,r):W(r,o,o,i,o.__e,n));return n}(f,u,e):u=W(e,f,d,v,p,u),"function"==typeof n.type&&(n.__d=u)):u&&d.__e==u&&u.parentNode!=e&&(u=x(d))}for(n.__e=h,_=y;_--;)null!=v[_]&&("function"==typeof n.type&&null!=v[_].__e&&v[_].__e==n.__d&&(n.__d=x(r,_+1)),function e(t,n,r){var o,i;if(j.unmount&&j.unmount(t),!(o=t.ref)||o.current&&o.current!==t.__e||J(o,null,n),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){j.__e(e,n)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&e(o[i],n,"function"!=typeof t.type);r||null==t.__e||H(t.__e),t.__e=t.__d=void 0}(v[_],v[_]));if(m)for(_=0;_<m.length;_++)J(m[_],m[++_],m[++_])}function u(e,t){return t=t||[],null!=e&&"boolean"!=typeof e&&(Array.isArray(e)?e.some(function(e){u(e,t)}):t.push(e)),t}function W(e,t,n,r,o,i){var l,s,u;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),l=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<r.length;u+=2)if(s==o)break e;e.insertBefore(o,i),l=i}return void 0!==l?l:o.nextSibling}function B(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||A.test(t)?n:n+"px"}function P(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||B(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||B(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=(t.toLowerCase()in e?t.toLowerCase():t).slice(2),e.l||(e.l={}),(e.l[t+i]=n)?r||e.addEventListener(t,i?Q:z,i):e.removeEventListener(t,i?Q:z,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"!=typeof n&&(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function z(e){this.l[e.type+!1](j.event?j.event(e):e)}function Q(e){this.l[e.type+!0](j.event?j.event(e):e)}function Y(e,t,n,r,o,i,l,s,u){var c,_,a,d,f,p,h,m,v,y,g,b,q,S=t.type;if(void 0===t.constructor){null!=n.__h&&(u=n.__h,s=t.__e=n.__e,t.__h=null,i=[s]),(c=j.__b)&&c(t);try{e:if("function"==typeof S){if(m=t.props,v=(c=S.contextType)&&r[c.__c],y=c?v?v.props.value:c.__:r,n.__c?h=(_=t.__c=n.__c).__=_.__E:("prototype"in S&&S.prototype.render?t.__c=_=new S(m,y):(t.__c=_=new w(m,y),_.constructor=S,_.render=Z),v&&v.sub(_),_.props=m,_.state||(_.state={}),_.context=y,_.__n=r,a=_.__d=!0,_.__h=[]),null==_.__s&&(_.__s=_.state),null!=S.getDerivedStateFromProps&&(_.__s==_.state&&(_.__s=E({},_.__s)),E(_.__s,S.getDerivedStateFromProps(m,_.__s))),d=_.props,f=_.state,a)null==S.getDerivedStateFromProps&&null!=_.componentWillMount&&_.componentWillMount(),null!=_.componentDidMount&&_.__h.push(_.componentDidMount);else{if(null==S.getDerivedStateFromProps&&m!==d&&null!=_.componentWillReceiveProps&&_.componentWillReceiveProps(m,y),!_.__e&&null!=_.shouldComponentUpdate&&!1===_.shouldComponentUpdate(m,_.__s,y)||t.__v===n.__v){_.props=m,_.state=_.__s,t.__v!==n.__v&&(_.__d=!1),(_.__v=t).__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),_.__h.length&&l.push(_);break e}null!=_.componentWillUpdate&&_.componentWillUpdate(m,_.__s,y),null!=_.componentDidUpdate&&_.__h.push(function(){_.componentDidUpdate(d,f,p)})}if(_.context=y,_.props=m,_.__v=t,_.__P=e,g=j.__r,b=0,"prototype"in S&&S.prototype.render)_.state=_.__s,_.__d=!1,g&&g(t),c=_.render(_.props,_.state,_.context);else for(;_.__d=!1,g&&g(t),c=_.render(_.props,_.state,_.context),_.state=_.__s,_.__d&&++b<25;);_.state=_.__s,null!=_.getChildContext&&(r=E(E({},r),_.getChildContext())),a||null==_.getSnapshotBeforeUpdate||(p=_.getSnapshotBeforeUpdate(d,f)),q=null!=c&&c.type===C&&null==c.key?c.props.children:c,F(e,Array.isArray(q)?q:[q],t,n,r,o,i,l,s,u),_.base=t.__e,t.__h=null,_.__h.length&&l.push(_),h&&(_.__E=_.__=null),_.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=((e,t,n,r,o,i,l,s)=>{var u,c,_,a=n.props,d=t.props,f=t.type,p=0;if("svg"===f&&(o=!0),null!=i)for(;p<i.length;p++)if((u=i[p])&&"setAttribute"in u==!!f&&(f?u.localName===f:3===u.nodeType)){e=u,i[p]=null;break}if(null==e){if(null===f)return document.createTextNode(d);e=o?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,d.is&&d),i=null,s=!1}if(null===f)a===d||s&&e.data===d||(e.data=d);else{if(i=i&&k.call(e.childNodes),c=(a=n.props||N).dangerouslySetInnerHTML,_=d.dangerouslySetInnerHTML,!s){if(null!=i)for(a={},p=0;p<e.attributes.length;p++)a[e.attributes[p].name]=e.attributes[p].value;!_&&!c||_&&(c&&_.__html==c.__html||_.__html===e.innerHTML)||(e.innerHTML=_&&_.__html||"")}var h,m=e,v=d,y=a,g=o,b=s;for(h in y)"children"===h||"key"===h||h in v||P(m,h,null,y[h],g);for(h in v)b&&"function"!=typeof v[h]||"children"===h||"key"===h||"value"===h||"checked"===h||y[h]===v[h]||P(m,h,v[h],y[h],g);if(_)t.__k=[];else if(F(e,Array.isArray(p=t.props.children)?p:[p],t,n,r,o&&"foreignObject"!==f,i,l,i?i[0]:n.__k&&x(n,0),s),null!=i)for(p=i.length;p--;)null!=i[p]&&H(i[p]);s||("value"in d&&void 0!==(p=d.value)&&(p!==e.value||"progress"===f&&!p||"option"===f&&p!==a.value)&&P(e,"value",p,a.value,!1),"checked"in d&&void 0!==(p=d.checked)&&p!==e.checked&&P(e,"checked",p,a.checked,!1))}return e})(n.__e,t,n,r,o,i,l,u);(c=j.diffed)&&c(t)}catch(e){t.__v=null,!u&&null==i||(t.__e=s,t.__h=!!u,i[i.indexOf(s)]=null),j.__e(e,t,n)}}}function G(e,t){j.__c&&j.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){j.__e(e,t.__v)}})}function J(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){j.__e(e,n)}}function Z(e,t,n){return this.constructor(e,n)}function r(e,t,n){var r,o,i;j.__&&j.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],Y(t,e=(!r&&n||t).__k=l(C,null,[e]),o||N,N,void 0!==t.ownerSVGElement,!r&&n?[n]:!o&&t.firstChild?k.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),G(i,e)}function K(e,r){return(e={__c:r="__cC"+te++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,t;return this.getChildContext||(n=[],((t={})[r]=this).getChildContext=function(){return t},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some($)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}}).Provider.__=e.Consumer.contextType=e}k=R.slice,j={__e:function(e,t,n,r){for(var o,i,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),l=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o.__d),l)return o.__E=o}catch(t){e=t}throw e}},M=0,w.prototype.setState=function(e,t){var n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=E({},this.state);(e="function"==typeof e?e(E({},n),this.props):e)&&E(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),$(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),$(this))},w.prototype.render=C;var o,s,X,ee,n=[],te=t.__r=0,i=0,ne=[],re=[],oe=j.__b,ie=j.__r,le=j.diffed,se=j.__c,ue=j.unmount;function c(e,t){return j.__h&&j.__h(s,e,i||t),i=0,e>=(t=s.__H||(s.__H={__:[],__h:[]})).__.length&&t.__.push({__V:re}),t.__[e]}function q(e){return i=1,ce(ye,e)}function ce(e,t,n){var i,l=c(o++,2);return l.t=e,l.__c||(l.__=[n?n(t):ye(void 0,t),function(e){var t=(l.__N||l.__)[0];t!==(e=l.t(t,e))&&(l.__N=[e,l.__[1]],l.__c.setState({}))}],(l.__c=s).u)||(s.u=!0,i=s.shouldComponentUpdate,s.shouldComponentUpdate=function(e,t,n){var r,o;return!l.__c.__H||((r=l.__c.__H.__.filter(function(e){return e.__c})).every(function(e){return!e.__N})||(o=!1,r.forEach(function(e){var t;e.__N&&(t=e.__[0],e.__=e.__N,e.__N=void 0,t!==e.__[0])&&(o=!0)}),!!o))&&(!i||i.call(this,e,t,n))}),l.__N||l.__}function S(e,t){var n=c(o++,3);!j.__s&&ve(n.__H,t)&&(n.__=e,n.i=t,s.__H.__h.push(n))}function _(e,t){var n=c(o++,4);!j.__s&&ve(n.__H,t)&&(n.__=e,n.i=t,s.__h.push(n))}function d(e){return i=5,a(function(){return{current:e}},[])}function _e(e,t,n){i=6,_(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==n?n:n.concat(e))}function a(e,t){var n=c(o++,7);return ve(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function f(e,t){return i=8,a(function(){return e},t)}function ae(e){var t=s.context[e.__c],n=c(o++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(s)),t.props.value):e.__}function de(e,t){j.useDebugValue&&j.useDebugValue(t?t(e):e)}function fe(){for(var t;t=ne.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(he),t.__H.__h.forEach(me),t.__H.__h=[]}catch(e){t.__H.__h=[],j.__e(e,t.__v)}}j.__b=function(e){s=null,oe&&oe(e)},j.__r=function(e){ie&&ie(e),o=0,(e=(s=e.__c).__H)&&(X===s?(e.__h=[],s.__h=[],e.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=re,e.__N=e.i=void 0})):(e.__h.forEach(he),e.__h.forEach(me),e.__h=[])),X=s},j.diffed=function(e){le&&le(e),(e=e.__c)&&e.__H&&(!e.__H.__h.length||1!==ne.push(e)&&ee===j.requestAnimationFrame||((ee=j.requestAnimationFrame)||function(e){function t(){clearTimeout(r),pe&&cancelAnimationFrame(n),setTimeout(e)}var n,r=setTimeout(t,100);pe&&(n=requestAnimationFrame(t))})(fe),e.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==re&&(e.__=e.__V),e.i=void 0,e.__V=re})),X=s=null},j.__c=function(e,n){n.some(function(t){try{t.__h.forEach(he),t.__h=t.__h.filter(function(e){return!e.__||me(e)})}catch(e){n.some(function(e){e.__h&&(e.__h=[])}),n=[],j.__e(e,t.__v)}}),se&&se(e,n)},j.unmount=function(e){var t;ue&&ue(e),(e=e.__c)&&e.__H&&(e.__H.__.forEach(function(e){try{he(e)}catch(e){t=e}}),t)&&j.__e(t,e.__v)};var pe="function"==typeof requestAnimationFrame;function he(e){var t=s,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),s=t}function me(e){var t=s;e.__c=e.__(),s=t}function ve(n,e){return!n||n.length!==e.length||e.some(function(e,t){return e!==n[t]})}function ye(e,t){return"function"==typeof t?t(e):t}function ge(e,t){for(var n in t)e[n]=t[n];return e}function be(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function qe(e){this.props=e}function e(t,r){function n(e){var t=this.props.ref,n=t==e.ref;return!n&&t&&(t.call?t(null):t.current=null),r?!r(this.props,e)||!n:be(this.props,e)}function e(e){return this.shouldComponentUpdate=n,l(t,e)}return e.displayName="Memo("+(t.displayName||t.name)+")",e.prototype.isReactComponent=!0,e.__f=!0,e}(qe.prototype=new w).isPureReactComponent=!0,qe.prototype.shouldComponentUpdate=function(e,t){return be(this.props,e)||be(this.state,t)};var Se=j.__b,ke=(j.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Se&&Se(e)},"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911);function je(n){function e(e){var t=ge({},e);return delete t.ref,n(t,e.ref||null)}return e.$$typeof=ke,(e.render=e).prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}function Ne(e,t){return null==e?null:u(u(e).map(t))}var p={map:Ne,forEach:Ne,count:function(e){return e?u(e).length:0},only:function(e){if(1!==(e=u(e)).length)throw"Children.only";return e[0]},toArray:u},Ee=j.__e,Ce=(j.__e=function(e,t,n,r){if(e.then)for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t);Ee(e,t,n,r)},j.unmount);function h(){this.__u=0,this.t=null,this.__b=null}function we(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function xe(t){var n,r,o;function e(e){if(n||(n=t()).then(function(e){r=e.default||e},function(e){o=e}),o)throw o;if(r)return l(r,e);throw n}return e.displayName="Lazy",e.__f=!0,e}function m(){this.u=null,this.o=null}function Pe(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;3<n.length;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}}function Oe(e){return this.getChildContext=function(){return e.context},e.children}function De(e){var n=this,t=e.i;n.componentWillUnmount=function(){r(null,n.l),n.l=null,n.i=null},n.i&&n.i!==t&&n.componentWillUnmount(),e.__v?(n.l||(n.i=t,n.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(e){this.childNodes.push(e),n.i.appendChild(e)},insertBefore:function(e,t){this.childNodes.push(e),n.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),n.i.removeChild(e)}}),r(l(Oe,{context:n.context},e.__v),n.l)):n.l&&n.componentWillUnmount()}function Te(e,t){return(e=l(De,{__v:e,i:t})).containerInfo=t,e}j.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Ce&&Ce(e)},(h.prototype=new w).__c=function(e,t){function n(){l||(l=!0,r.__R=null,i?i(s):s())}var r=t.__c,o=this,i=(null==o.t&&(o.t=[]),o.t.push(r),we(o.__v)),l=!1,s=(r.__R=n,function(){var e,t;if(!--o.__u)for(o.state.__a&&(t=o.state.__a,o.__v.__k[0]=function t(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return t(e,n,r)}),e.__c)&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r),e}(t,t.__c.__P,t.__c.__O)),o.setState({__a:o.__b=null});e=o.t.pop();)e.forceUpdate()}),t=!0===t.__h;o.__u++||t||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(n,n)},h.prototype.componentWillUnmount=function(){this.t=[]},h.prototype.render=function(e,t){this.__b&&(this.__v.__k&&(r=document.createElement("div"),n=this.__v.__k[0].__c,this.__v.__k[0]=function t(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),null!=(e=ge({},e)).__c&&(e.__c.__P===r&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return t(e,n,r)})),e}(this.__b,r,n.__O=n.__P)),this.__b=null);var n,r=t.__a&&l(C,null,e.fallback);return r&&(r.__h=null),[l(C,null,t.__a?null:e.children),r]},(m.prototype=new w).__a=function(n){var r=this,o=we(r.__v),i=r.o.get(n);return i[0]++,function(e){function t(){r.props.revealOrder?(i.push(e),Pe(r,n,i)):e()}o?o(t):t()}},m.prototype.render=function(e){this.u=null,this.o=new Map;var t=u(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},m.prototype.componentDidUpdate=m.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){Pe(n,t,e)})};var Ue="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Le=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Me="undefined"!=typeof document;function Ie(e,t,n){return null==t.__k&&(t.textContent=""),r(e,t),"function"==typeof n&&n(),e?e.__c:null}function Re(e,t,n){return function e(t,n){r(t,n,e)}(e,t),"function"==typeof n&&n(),e?e.__c:null}w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(w.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Ae=j.event;function He(){}function Ve(){return this.cancelBubble}function $e(){return this.defaultPrevented}j.event=function(e){return(e=Ae?Ae(e):e).persist=He,e.isPropagationStopped=Ve,e.isDefaultPrevented=$e,e.nativeEvent=e};var Fe,We={configurable:!0,get:function(){return this.class}},Be=j.vnode,ze=(j.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var o,i=-1===t.indexOf("-"),r={};for(o in n){var l,s=n[o];Me&&"children"===o&&"noscript"===t||"value"===o&&"defaultValue"in n&&null==s||("defaultValue"===o&&"value"in n&&null==n.value?o="value":"download"===o&&!0===s?s="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+t)&&(l=n.type,!("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(l))?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():i&&Le.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===s&&(s=void 0),/^oninput$/i.test(o)&&r[o=o.toLowerCase()]&&(o="oninputCapture"),r[o]=s)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=u(n.children).forEach(function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)})),"select"==t&&null!=r.defaultValue&&(r.value=u(n.children).forEach(function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value})),e.props=r,n.class!=n.className&&(We.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",We))}e.$$typeof=Ue,Be&&Be(e)},j.__r),Qe=(j.__r=function(e){ze&&ze(e),Fe=e.__c},{ReactCurrentDispatcher:{current:{readContext:function(e){return Fe.__n[e.__c].props.value}}}});function Ye(e){return l.bind(null,e)}function Ge(e){return!!e&&e.$$typeof===Ue}function Je(e){return Ge(e)?function(e,t,n){var r,o,i,l=E({},e.props);for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:l[i]=t[i];return 2<arguments.length&&(l.children=3<arguments.length?k.call(arguments,2):n),b(e.type,l,r||e.key,o||e.ref,null)}.apply(null,arguments):e}function Ze(e){return!!e.__k&&(r(null,e),!0)}function Ke(e){return e&&(e.base||1===e.nodeType&&e)||null}function Xe(e,t){return e(t)}function et(e,t){return e(t)}function tt(e){e()}function nt(e){return e}function rt(){return[!1,tt]}function ot(e,t){var n=t(),r=q({s:{__:n,h:t}}),o=r[0].s,i=r[1];return _(function(){o.__=n,o.h=t,o.__!==t()&&i({s:o})},[e,n,t]),S(function(){return o.__!==o.h()&&i({s:o}),e(function(){o.__!==o.h()&&i({s:o})})},[e]),n}var p=Object.freeze({__proto__:null,default:{useState:q,useReducer:ce,useEffect:S,useLayoutEffect:_,useInsertionEffect:_,useTransition:rt,useDeferredValue:nt,useSyncExternalStore:ot,startTransition:tt,useRef:d,useImperativeHandle:_e,useMemo:a,useCallback:f,useContext:ae,useDebugValue:de,version:"17.0.2",Children:p,render:Ie,hydrate:Re,unmountComponentAtNode:Ze,createPortal:Te,createElement:l,createContext:K,createFactory:Ye,cloneElement:Je,createRef:V,Fragment:C,isValidElement:Ge,findDOMNode:Ke,Component:w,PureComponent:qe,memo:e,forwardRef:je,flushSync:et,unstable_batchedUpdates:Xe,StrictMode:C,Suspense:h,SuspenseList:m,lazy:xe,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Qe},startTransition:tt,useDeferredValue:nt,useTransition:rt,useInsertionEffect:_,useSyncExternalStore:ot,version:"17.0.2",Children:p,render:Ie,hydrate:Re,unmountComponentAtNode:Ze,createPortal:Te,createFactory:Ye,cloneElement:Je,isValidElement:Ge,findDOMNode:Ke,PureComponent:qe,memo:e,forwardRef:je,flushSync:et,unstable_batchedUpdates:Xe,StrictMode:C,Suspense:h,SuspenseList:m,lazy:xe,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Qe,createElement:l,createContext:K,createRef:V,Fragment:C,Component:w,useState:q,useReducer:ce,useEffect:S,useLayoutEffect:_,useRef:d,useImperativeHandle:_e,useMemo:a,useCallback:f,useContext:ae,useDebugValue:de,useErrorBoundary:function(e){var t=c(o++,10),n=q();return t.__=e,s.componentDidCatch||(s.componentDidCatch=function(e){t.__&&t.__(e),n[1](e)}),[n[0],function(){n[1](void 0)}]}}),it=0;function O(e,t,n,r,o){var i,l,s={};for(l in t)"ref"==l?i=t[l]:s[l]=t[l];if(n={type:e,props:s,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--it,__source:o,__self:r},"function"==typeof e&&(i=e.defaultProps))for(l in i)void 0===s[l]&&(s[l]=i[l]);return j.vnode&&j.vnode(n),n}function D(t,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(e=Object(n),r=Object.keys(e),Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),r.push.apply(r,e)),r.forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var e,r}function lt(e,t){if(null==e)return{};var n,r=((e,t)=>{if(null==e)return{};for(var n,r={},o=Object.keys(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||(r[n]=e[n]);return r})(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]);return r}function st(e,t,n,r,o,i,l){try{var s=e[i](l),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function ut(s){return function(){var e=this,l=arguments;return new Promise(function(t,n){var r=s.apply(e,l);function o(e){st(r,t,n,o,i,"next",e)}function i(e){st(r,t,n,o,i,"throw",e)}o(void 0)})}}let ct=(e,t)=>((t=new URL(t)).searchParams.set("api_key",e),fetch(t.toString()).then(e=>e.json())),_t=e=>new Date(e).getTime(),at=e=>e.replace(/a\.disquscdn\.com/g,"c.disquscdn.com"),dt=null,ft=e=>(e=at(e).replace(/https?:\/\/disq.us\/url\?url=(.+)%3A[\w-]+&amp;cuid=\d+/gm,(e,t)=>decodeURIComponent(t)),(e=(dt=dt||new DOMParser).parseFromString(e,"text/html")).querySelectorAll("script").forEach(e=>e.remove()),e.querySelectorAll("a").forEach(e=>{e.target="_blank",e.rel="external noopener nofollow noreferrer"}),e.body.innerHTML),pt=(new Date).getTimezoneOffset(),ht=e=>String(e).padStart(2,"0"),mt=e=>(e=_t(e),`${(e=new Date(e-6e4*pt)).getFullYear()}-${ht(e.getMonth()+1)}-${ht(e.getDate())} ${ht(e.getHours())}:`+ht(e.getMinutes())),vt=i=>new Promise((e,t)=>{let n=new Image,r=()=>{n.onload=null,n.onerror=null,n.remove()},o=setTimeout(()=>{r(),t()},3e3);n.onerror=()=>{clearTimeout(o),r(),t()},n.onload=()=>{clearTimeout(o),r(),e()},n.src=`https://${i}/favicon.ico?${+new Date}=`+ +new Date});var v,yt,y,gt,T,bt,qt,St,kt,jt,Nt,Et,Ct,wt,xt,Pt,Ot,U,Qe={exports:{}},Dt={},p=("function"==typeof(gt=(yt=p).default)?(y=function(){return gt.apply(this,arguments)}).prototype=gt.prototype:y={},Object.defineProperty(y,"__esModule",{value:!0}),Object.keys(yt).forEach(function(e){var t=Object.getOwnPropertyDescriptor(yt,e);Object.defineProperty(y,e,t.get?t:{enumerable:!0,get:function(){return yt[e]}})}),y),Tt={exports:{}},Ut={};function Lt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch(e){return 1}}Qe.exports=(T=p,v||(v=1,Tt.exports=(U||(U=1,Et="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ct=p.useState,wt=p.useEffect,xt=p.useLayoutEffect,Pt=p.useDebugValue,Ot=void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=Ct({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return xt(function(){o.value=n,o.getSnapshot=t,Lt(o)&&i({inst:o})},[e,n,t]),wt(function(){return Lt(o)&&i({inst:o}),e(function(){Lt(o)&&i({inst:o})})},[e]),Pt(n),n},Ut.useSyncExternalStore=void 0!==p.useSyncExternalStore?p.useSyncExternalStore:Ot),Ut)),Ot=Tt.exports,bt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},qt=Ot.useSyncExternalStore,St=T.useRef,kt=T.useEffect,jt=T.useMemo,Nt=T.useDebugValue,Dt.useSyncExternalStoreWithSelector=function(e,n,l,s,u){var c,t=St(null),r=(null===t.current?(c={hasValue:!1,value:null},t.current=c):c=t.current,t=jt(function(){function e(e){var t;if(i)return n=o,bt(r,e)||(t=s(e),void 0!==u&&u(n,t))?n:(r=e,o=t);if(i=!0,e=s(r=e),void 0!==u&&c.hasValue){var n=c.value;if(u(n,e))return o=n}return o=e}var r,o,i=!1,t=void 0===l?null:l;return[function(){return e(n())},null===t?void 0:function(){return e(t())}]},[n,l,s,u]),qt(e,t[0],t[1]));return kt(function(){c.hasValue=!0,c.value=r},[r]),Nt(r),r},Dt);let Mt=(v=Qe.exports)&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v,It=Mt.useSyncExternalStoreWithSelector,Rt={mode:"dsqjs"===(U=localStorage.getItem("dsqjs_mode"))||"disqus"===U?U:null,sortType:"popular"===(p=localStorage.getItem("dsqjs_sort"))||"asc"===p||"desc"===p?p:null,error:!1,msg:null,thread:null,posts:[],loadingPosts:!1,morePostsError:!1},L=(()=>{let n=(()=>{let r,o=new Set,e=(e,n)=>{if((e="function"==typeof e?e(r):e)!==r){let t=r;r=(null!=n?n:"object"!=typeof e)?e:Object.assign({},r,e),o.forEach(e=>e(r,t))}},t=()=>r,n={setState:e,getState:t,subscribe:e=>(o.add(e),()=>o.delete(e)),destroy:()=>o.clear()};return r=(_=e,a=t,D(g({},Rt),{setMode(e){_({mode:e}),e&&Promise.resolve().then(()=>{null===e?localStorage.removeItem("dsqjs_mode"):localStorage.setItem("dsqjs_mode",e)})},checkMode(e){_({msg:"正在检查 Disqus 能否访问..."}),Promise.all(["disqus.com",e+".disqus.com"].map(vt)).then(()=>{_({mode:"disqus"}),localStorage.setItem("dsqjs_mode","disqus")},()=>{_({mode:"dsqjs"}),localStorage.setItem("dsqjs_mode","dsqjs")})},setSortType(e){_({sortType:e}),e&&Promise.resolve().then(()=>{localStorage.setItem("dsqjs_sort",e)})},setError(e){_({error:e})},setMsg(e){_({msg:e})},fetchThread(t,n,r,o="https://disqus.skk.moe/disqus/"){return ut(function*(){try{var e=yield ct(r,`${o}3.0/threads/list.json?forum=${encodeURIComponent(t)}&thread=`+encodeURIComponent("ident:"+n));0===e.code?_({thread:e}):_({error:!0})}catch(e){_({error:!0})}})()},fetchMorePosts(i,l,s,u="https://disqus.skk.moe/disqus/",c=!1){return ut(function*(){if(l){_(D(g({},c&&{posts:[]}),{loadingPosts:!0,morePostsError:!1}));let e=c?[]:a().posts,t=a().sortType,n=e.at(-1);if(!n||n.cursor.hasNext){var r=u+`3.0/threads/listPostsThreaded?forum=${i}&thread=${l}&order=`+(null!=t?t:"desc")+(0!==e.length&&null!=n&&n.cursor.next?"&cursor="+encodeURIComponent(n.cursor.next):""),o=()=>{0===e.length?_({error:!0,loadingPosts:!1}):_({morePostsError:!0,loadingPosts:!1})};try{let t=yield ct(s,r);0===t.code?_(e=>({posts:e.posts.concat(t),loadingPosts:!1})):o()}catch(e){o()}}}})()},reset(){_(g({},Rt))}})),n;var _,a})(),e=(e,t)=>((e,t=e.getState,n)=>(de(t=It(e.subscribe,e.getState,e.getServerState||e.getState,t,n)),t))(n,e,t);return Object.assign(e,n),e})(),At=e(e=>{var{isError:t,isLoading:n}=e;return O("a",D(g({},lt(e,["isError","isLoading"])),{id:"dsqjs-load-more",className:"dsqjs-load-more "+(t?"is-error":""),role:"button",children:t?"加载失败，请重试":n?"正在加载...":"加载更多评论"}))}),Ht=e(e=>{let t=L(e=>e.setMode),n=f(()=>t("disqus"),[t]);return O("a",{id:"dsqjs-force-disqus",className:"dsqjs-msg-btn",onClick:n,children:e.children})}),Vt=e(e=>{let t=L(e=>e.setMode),n=f(()=>t(null),[t]);return O("a",{id:"dsqjs-test-disqus",className:"dsqjs-msg-btn",onClick:n,children:e.children})}),$t=e(e=>{let t=L(e=>e.setMode),n=f(()=>t("dsqjs"),[t]);return O("a",{id:"dsqjs-force-dsqjs",className:"dsqjs-msg-btn",onClick:n,children:e.children})}),Ft=e(e=>{let t=L(e=>e.setError),n=f(()=>{t(!1)},[t]);return O("a",{id:"dsqjs-reload-dsqjs",className:"dsqjs-msg-btn",onClick:n,children:e.children})}),Wt="disqus_thread",Bt="dsq-embed-scr",zt=e(n=>{let r=L(e=>e.setMsg),[e,o]=q(!1);return S(()=>{r(null);var e=()=>{window.disqus_config=void 0;var e=document.getElementById(Bt);e&&(document.head.removeChild(e),e.remove()),null!=(e=window.DISQUS)&&e.reset({});try{delete window.DISQUS}catch(e){window.DISQUS=void 0}var t=document.getElementById(Wt);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);document.querySelectorAll('link[href*="disquscdn.com/next"], link[href*="disqus.com/next"], script[src*="disquscdn.com/next/embed"], script[src*="disqus.com/count-data.js"], iframe[title="Disqus"]').forEach(e=>{var t;null!=(t=e.parentNode)&&t.removeChild(e),null!=(t=e.parentElement)&&t.removeChild(e),e.remove()})},t=(window.disqus_shortname!==n.shortname&&e(),()=>function(){n.identifier&&(this.page.identifier=n.identifier),n.url&&(this.page.url=n.url),n.title&&(this.page.title=n.title),this.callbacks.onReady=[()=>{o(!0)}]});return window.DISQUS&&document.getElementById(Bt)?window.DISQUS.reset({reload:!0,config:t()}):(window.disqus_config=t(),window.disqus_shortname=n.shortname,(t=document.createElement("script")).id=Bt,t.src=`https://${n.shortname}.disqus.com/embed.js`,t.async=!0,document.head.appendChild(t)),e},[n.shortname,n.identifier,n.url,n.title,r]),O(C,{children:[O("div",{id:Wt,children:["评论完整模式加载中... 如果长时间无法加载，请针对 disq.us | disquscdn.com | disqus.com 启用代理，或切换至 ",O($t,{children:"评论基础模式"})]}),!e&&O("div",{id:"dsqjs-msg",children:["评论完整模式加载中... 如果长时间无法加载，请针对 disq.us | disquscdn.com | disqus.com 启用代理，或切换至 ",O($t,{children:"评论基础模式"})]})]})}),Qt=e(()=>O("div",{id:"dsqjs-msg",children:["评论基础模式加载失败，请"," ",O(Ft,{children:"重载"})," ","或"," ",O(Vt,{children:"尝试完整 Disqus 模式"})]})),Yt=e(()=>O("div",{id:"dsqjs-msg",children:["当前 Thread 尚未创建。是否切换至"," ",O(Ht,{children:"完整 Disqus 模式"}),"？"]})),Gt=e(e=>O("p",{className:"dsqjs-no-comment",children:e.text}));function Jt(e){var t=e.comment.author.profileUrl,n=ft(e.comment.author.avatar.cache);return O("li",{id:"comment-"+e.comment.id,children:[O("div",{className:"dsqjs-post-item dsqjs-clearfix",children:[O("div",{className:"dsqjs-post-avatar",children:t?O("a",{href:t,target:"_blank",rel:"noreferrer noopenner nofollow external",children:O("img",{alt:e.comment.author.username,src:n})}):O("img",{alt:e.comment.author.username,src:n})}),O("div",{className:"dsqjs-post-body",children:[O("div",{className:"dsqjs-post-header",children:[O("span",t?{className:"dsqjs-post-author",children:O("a",{href:t,target:"_blank",rel:"noreferrer noopenner nofollow external",children:e.comment.author.name})}:{className:"dsqjs-post-author",children:e.comment.author.name}),e.admin===e.comment.author.username&&O("span",{className:"dsqjs-admin-badge",children:e.adminLabel})," ",O("span",{className:"dsqjs-bullet"})," ",e.comment.createdAt&&O("span",{className:"dsqjs-meta",children:O("time",{children:mt(e.comment.createdAt)})})]}),e.comment.isDeleted?O("div",{className:"dsqjs-post-content",children:O("small",{children:"此评论已被删除"})}):O("div",{className:"dsqjs-post-content",dangerouslySetInnerHTML:{__html:ft(e.comment.message)}})]})]}),O(Zt,D(g({},e),{currentNesting:e.nesting})),e.comment.hasMore&&O("p",{className:"dsqjs-has-more",children:["切换至 ",O(Ht,{children:"完整 Disqus 模式"})," 显示更多回复"]})]})}function Zt(t){var e;return t.children&&0!==t.children.length?O("ul",{className:"dsqjs-post-list "+((null!=(e=t.currentNesting)?e:1)<(null!=(e=t.nestingSetting)?e:4)?"dsqjs-children":""),children:t.children.map(e=>l(Jt,D(g({},e),{admin:t.admin,adminLabel:t.adminLabel,key:e.comment.id})))}):null}let Kt=o=>O("ul",{className:"dsqjs-post-list",id:"dsqjs-post-container",children:a(()=>{let t=[],n=[],r=o.comments.slice();return r.map((e,t)=>({i:t,p:e.parent,d:_t(e.createdAt)})).sort((e,t)=>e.p&&t.p?e.d-t.d:0).map(({i:e})=>r[e]).forEach(e=>(e.parent?n:t).push(e)),t.map(e=>function i(e,t,n){return{comment:e,children:((t,n,r)=>{if(0===t.length)return null;let o=[];return t.forEach(e=>{e.parent===n&&o.unshift(i(e,t,r))}),o})(t,Number(e.id),n+1),nesting:n+1}}(e,n,0))},[o.comments]).map(e=>l(Jt,D(g({},e),{key:e.comment.id,admin:o.admin,adminLabel:o.adminLabel})))}),Xt=e=>a(()=>Array.isArray(e)?e[Math.random()*(e.length-1+1)+0|0]:e,[e]),en=e=>O(C,{children:[O("input",{className:"dsqjs-order-radio",id:"dsqjs-order-"+e.sortType,type:"radio",name:"comment-order",value:e.sortType,onChange:e.onChange,checked:e.checked}),O("label",{className:"dsqjs-order-label",htmlFor:"dsqjs-order-"+e.sortType,title:e.title,children:e.label})]}),tn=e(()=>{let e=L(e=>e.sortType),t=L(e=>e.setSortType),n=f(e=>()=>t(e),[t]);return O("div",{className:"dsqjs-order",children:[O(en,{checked:"desc"===e||null===e,sortType:"desc",title:"按从新到旧",label:"最新",onChange:n("desc")}),O(en,{checked:"asc"===e,sortType:"asc",title:"按从旧到新",label:"最早",onChange:n("asc")}),O(en,{checked:"popular"===e,sortType:"popular",title:"按评分从高到低",label:"最佳",onChange:n("popular")})]})}),nn=e(e=>O("header",{className:"dsqjs-header",id:"dsqjs-header",children:O("nav",{className:"dsqjs-nav dsqjs-clearfix",children:[O("ul",{children:[O("li",{className:"dsqjs-nav-tab dsqjs-tab-active",children:O("span",{children:[e.totalComments," Comments"]})}),O("li",{className:"dsqjs-nav-tab",children:e.siteName})]}),O(tn,{})]})})),rn=e=>{let t=d(Xt(e.apikey)),n=L(e=>e.posts),r=L(e=>e.sortType),o=d(r),i=L(e=>e.morePostsError),l=L(e=>e.loadingPosts),s=L(e=>e.fetchMorePosts),u=d(null),c=f(()=>s(e.shortname,e.id,t.current,e.api,!0),[s,e.api,e.id,e.shortname]),_=f(()=>s(e.shortname,e.id,t.current,e.api,!1),[s,e.api,e.id,e.shortname]),a;return S(()=>{u.current!==e.id?(u.current=e.id,c()):o.current!==r&&(o.current=r,u.current=e.id,c())},[n,c,e.id,l,r]),0<n.length?O(C,{children:[O(Kt,{comments:n.filter(Boolean).map(e=>e.response).flat(),admin:e.admin,adminLabel:e.adminLabel}),(null==(a=n.at(-1))?void 0:a.cursor.hasNext)&&O(At,{isLoading:l,isError:i,onClick:l?void 0:_})]}):null},on=e=>{let t,n,r,o,i=d(Xt(e.apikey)),l=L(e=>e.thread),s=L(e=>e.fetchThread),u=L(e=>e.setMsg),c=d(null),_=null!=(t=e.identifier)?t:document.location.origin+document.location.pathname+document.location.search;return S(()=>{c.current!==_?(u(O(C,{children:["评论基础模式加载中... 如需完整体验请针对 disq.us | disquscdn.com | disqus.com 启用代理并 ",O(Vt,{children:"尝试完整 Disqus 模式"})," | ",O(Ht,{children:"强制完整 Disqus 模式"})]})),c.current=_,s(e.shortname,_,i.current,e.api)):u(O(C,{children:["你可能无法访问 Disqus，已启用评论基础模式。如需完整体验请针对 disq.us | disquscdn.com | disqus.com 启用代理并 ",O(Vt,{children:"尝试完整 Disqus 模式"})," | ",O(Ht,{children:"强制完整 Disqus 模式"})]}))},[l,s,_,u,e.shortname,e.api]),l?1===l.response.length?0===l.response[0].posts?O(C,{children:[O(nn,{totalComments:0,siteName:null!=(n=e.siteName)?n:""}),O(Gt,{text:null!=(r=e.nocomment)?r:"这里空荡荡的，一个人都没有"})]}):O(C,{children:[O(nn,{totalComments:l.response[0].posts,siteName:null!=(o=e.siteName)?o:""}),O(rn,D(g({},e),{id:l.response[0].id}))]}):O(Yt,{}):null},ln=e(()=>O("footer",{className:"dsqjs-footer-container",children:O("p",{className:"dsqjs-footer",children:["Powered by ",O("a",{className:"dsqjs-disqus-logo",href:"https://disqus.com",target:"_blank",rel:"external nofollow noopener noreferrer"})," ","&"," ",O("a",{className:"dsqjs-dsqjs-logo",href:"https://disqusjs.skk.moe",target:"_blank",rel:"noreferrer",children:"DisqusJS"})]})})),sn=e=>{let t=L(e=>e.mode),n=L(e=>e.checkMode);return S(()=>{"disqus"!==t&&"dsqjs"!==t&&n(e.shortname)},[n,t,e.shortname]),"disqus"===t?O(zt,{shortname:e.shortname,identifier:e.identifier,url:e.url,title:e.title}):"dsqjs"===t?O(on,g({},e)):null},un=je((e,t)=>{let n=L(e=>e.msg),r=L(e=>e.error),{shortname:o,siteName:i,identifier:l,url:s,title:u,api:c,apikey:_,nesting:a,nocomment:d,admin:f,adminLabel:p,className:h}=e,m=lt(e,["shortname","siteName","identifier","url","title","api","apikey","nesting","nocomment","admin","adminLabel","className"]),[v,y]=q(!1);return S(()=>{y(!0)},[]),v?O("div",D(g({ref:t},m),{className:"__dsqjs_oc95o1 "+(null!=h?h:""),children:O("section",{id:"dsqjs",children:[r?O(Qt,{}):O(C,{children:[n&&O("div",{id:"dsqjs-msg",children:n}),O(sn,g({},{shortname:o,siteName:i,identifier:l,url:s,title:u,api:c,apikey:_,nesting:a,nocomment:d,admin:f,adminLabel:p}))]}),O(ln,{})]})})):null});return class{render(e){(e=e?"string"==typeof e?document.querySelector(e):e:document.getElementById("disqusjs"))&&(this.container=e,r(O(un,g({},this.config)),e))}destroy(){this.container&&r(null,this.container)}constructor(e){this.config=e}}});