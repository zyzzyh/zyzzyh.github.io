((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})})(this,function(F){function j(e,t=void 0){return!(!e||e===document.body||t&&e===t)&&(B(e)?e:j(e.parentElement,t))}function d(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(1<t.childElementCount){for(var i=document.createElement("div");t.firstChild;)i.appendChild(t.firstChild);return i}return t.firstChild}function B(e){var t,i;return e&&e instanceof Element&&e.offsetParent&&(t=e.scrollHeight>e.clientHeight,i=-1!==(e=window.getComputedStyle(e).overflowY).indexOf("hidden"),e=-1!==e.indexOf("visible"),t)&&!i&&!e}let T=(e,t=1e4)=>(e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t),H=e=>(""+(e||"")).split(" ").filter(e=>!!e),f=(t,e,i)=>{t&&H(e).forEach(e=>{t.classList.toggle(e,i||!1)})};class s{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}let o={passive:!1};class N{constructor(e,{start:t=()=>!0,move:i=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=n;for(var s of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[s]=this[s].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,o),this.element.addEventListener("touchstart",this.onTouchStart,o),this.element.addEventListener("touchmove",this.onMove,o),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(e.buttons&&0===e.button){let t=new s(e);this.currentPointers.some(e=>e.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}}onTouchStart(e){for(var t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new s(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){var t=this.currentPointers.slice(),i=[];for(let t of"changedTouches"in e?Array.from(e.changedTouches||[]).map(e=>new s(e)):[new s(e)]){var n=this.currentPointers.findIndex(e=>e.id===t.id);n<0||(i.push(t),this.currentPointers[n]=t)}i.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){0<e.buttons&&0!==e.button||(this.triggerPointerEnd(e,new s(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(var t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new s(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){var i=this.currentPointers.findIndex(e=>e.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){var e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,o),this.element.removeEventListener("touchstart",this.onTouchStart,o),this.element.removeEventListener("touchmove",this.onMove,o),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function _(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function W(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function X(e,t){return e.split(".").reduce((e,t)=>"object"==typeof e?e[t]:void 0,t)}let q=e=>"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e),u=(n,...t)=>{var i=t.length;for(let e=0;e<i;e++){var s=t[e]||{};Object.entries(s).forEach(([e,t])=>{var i=Array.isArray(t)?[]:{};n[e]||Object.assign(n,{[e]:i}),q(t)?Object.assign(n[e],u(i,t)):Array.isArray(t)?Object.assign(n,{[e]:[...t]}):Object.assign(n,{[e]:t})})}return n};class Y{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(var t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?u({},this.constructor.defaults,e):{};for(var[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=X(e,this.options);return i=i&&"function"==typeof i?i.call(this,this,...t):i}optionFor(e,t,i,...n){let s=X(t,e),o;return(s="false"!==(s="true"===(s="string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))?s:parseFloat(s))||s)&&s)&&"function"==typeof s&&(s=s.call(this,this,e,...n)),(t=X(t,this.options))&&"function"==typeof t?s=t.call(this,this,e,...n,s):void 0===s&&(s=t),void 0===s?i:s}cn(e){var t=this.options.classes;return t&&t[e]||""}localize(t,i=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,(e,t,i)=>{let n="";return i?n=this.option(t[0]+t.toLowerCase().substring(1)+".l10n."+i):t&&(n=this.option("l10n."+t)),n=n||e});for(let e=0;e<i.length;e++)t=t.split(i[e][0]).join(i[e][1]);return t.replace(/\{\{(.*?)\}\}/g,(e,t)=>t)}on(e,i){let t=[];"string"==typeof e?t=e.split(" "):Array.isArray(e)&&(t=e),this.events||(this.events=new Map),t.forEach(e=>{let t=this.events.get(e);t||(this.events.set(e,[]),t=[]),t.includes(i)||t.push(i),this.events.set(e,t)})}off(e,i){let t=[];"string"==typeof e?t=e.split(" "):Array.isArray(e)&&(t=e),t.forEach(e=>{var t,e=this.events.get(e);Array.isArray(e)&&-1<(t=e.indexOf(i))&&e.splice(t,1)})}emit(e,...t){[...this.events.get(e)||[]].forEach(e=>e(this,...t)),"*"!==e&&this.emit("*",e,...t)}}Object.defineProperty(Y,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Y,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class V extends Y{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){var t,i,n,s,o=new Map;for([t,i]of Object.entries(e)){var a=this.option(t),r=this.plugins[t];r||!1===a?r&&!1===a&&(r.detach(),delete this.plugins[t]):o.set(t,new i(this,a||{}))}for([n,s]of o)this.plugins[n]=s,s.attach()}detachPlugins(e){for(var t of e=e||Object.keys(this.plugins)){var i=this.plugins[t];i&&i.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}}var b,p,g,m,e=b={Init:0,0:"Init",Error:1,1:"Error",Ready:2,2:"Ready",Panning:3,3:"Panning",Mousemove:4,4:"Mousemove",Destroy:5,5:"Destroy"};let v=["a","b","c","d","e","f"],Z={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},U={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Z},$='<circle cx="25" cy="25" r="20"></circle>',G='<div class="f-spinner"><svg viewBox="0 0 50 50">'+$+$+"</svg></div>",c=e=>e&&null!==e&&e instanceof Element&&"nodeType"in e,y=(t,e)=>{t&&H(e).forEach(e=>{t.classList.remove(e)})},w=(t,e)=>{t&&H(e).forEach(e=>{t.classList.add(e)})},K={a:1,b:0,c:0,d:1,e:0,f:0},J=1e4,x="mousemove",Q="drag",ee="content",E="auto",te=null,ie=null;class S extends V{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return ie=null===ie?window.matchMedia("(hover: none)").matches:ie}get isMobile(){return te=null===te?/iPhone|iPad|iPod|Android/i.test(navigator.userAgent):te}get panMode(){return this.options.panMode!==x||this.isTouchDevice?Q:x}get panOnlyZoomed(){var e=this.options.panOnlyZoomed;return e===E?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){var{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){var{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){var e=this.contentRect;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){var{containerRect:e,contentRect:t}=this,e=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,e)}get isScaling(){return 1e-5<Math.abs(this.targetScale-this.scale)&&!this.isResting}get isContentLoading(){var e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(var e of v){var t="e"==e||"f"===e?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:b.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},K)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},K)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},S.Plugins),i)),this.emit("attachPlugins"),this.emit("init"),(i=this.content).addEventListener("load",this.onLoad),i.addEventListener("error",this.onError),this.isContentLoading?(this.option("spinner")&&(e.classList.add(this.cn("isLoading")),t=d(G),!e.contains(i)||i.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(t):this.spinner=(null==(e=i.parentElement)?void 0:e.insertBefore(t,i))||null),this.emit("beforeLoad")):queueMicrotask(()=>{this.enable()})}initContent(){let e=this.container,t=this.cn(ee),i=this.option(ee)||e.querySelector("."+t);if(i||(i=e.querySelector("img,picture")||e.firstElementChild)&&w(i,t),!(i=i instanceof HTMLPictureElement?i.querySelector("img"):i))throw new Error("No content found");this.content=i}onLoad(){var{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===b.Init?this.enable():this.updateMetrics()}onError(){this.state!==b.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=b.Error,this.emit("error"))}getNextScale(e){let{fullScale:t,targetScale:i,coverScale:n,maxScale:s,minScale:o}=this,a=o;switch(e){case"toggleMax":a=i-o<.5*(s-o)?s:o;break;case"toggleCover":a=i-o<.5*(n-o)?n:o;break;case"toggleZoom":a=i-o<.5*(t-o)?t:o;break;case"iterateZoom":var r=[1,t,s].sort((e,t)=>e-t),l=r.findIndex(e=>e>i+1e-5);a=r[l]||1}return a}attachObserver(){let e,t=()=>{var{container:e,containerRect:t}=this;return.1<Math.abs(t.width-e.getBoundingClientRect().width)||.1<Math.abs(t.height-e.getBoundingClientRect().height)};this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),null!=(e=this.resizeObserver)&&e.observe(this.container)}detachObserver(){var e;null!=(e=this.resizeObserver)&&e.disconnect()}attachEvents(){var e=this.container;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new N(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(x,this.onMouseMove)}detachEvents(){var e=this.container;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null!=(e=this.pointerTracker)&&e.stop(),this.pointerTracker=null,document.removeEventListener(x,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();var e,t=this.friction,i=this.option("maxVelocity");for(e of v)t?(this.velocity[e]*=1-t,i&&!this.isScaling&&(this.velocity[e]=Math.max(Math.min(this.velocity[e],i),-1*i)),this.current[e]+=this.velocity[e]):this.current[e]=this.target[e];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(var e of v)"e"===e&&this.isBouncingX||"f"===e&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){var e=(i=this.current).e+e,i=i.f+t,{x:n,y:s}=t=this.getBounds(),o=n.min,n=n.max,a=s.min,s=s.max;let r=0,l=0;return o!==1/0&&e<o?r=o-e:n!==1/0&&n<e&&(r=n-e),a!==1/0&&i<a?l=a-i:s!==1/0&&s<i&&(l=s-i),Math.abs(r)<1e-4&&(r=0),Math.abs(l)<1e-4&&(l=0),Object.assign(Object.assign({},t),{xDiff:r,yDiff:l,inBounds:!r&&!l})}clampTargetBounds(){var e=this.target,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){let{content:t,contentRect:i}=this,{fitWidth:n,fitHeight:s,fullWidth:o,fullHeight:a}=i,r=o,l=a,h,c,d,u;return!this.option("zoom")&&0===this.angle||(c=(u=!(t instanceof HTMLImageElement||"none"!==window.getComputedStyle(t).maxWidth&&"none"!==window.getComputedStyle(t).maxHeight))?o:n,u=u?a:s,e=this.getMatrix(e),d=new DOMPoint(0,0).matrixTransform(e),h=new DOMPoint(0+c,0).matrixTransform(e),c=new DOMPoint(0+c,0+u).matrixTransform(e),u=new DOMPoint(0,0+u).matrixTransform(e),e=Math.abs(c.x-d.x),c=Math.abs(c.y-d.y),d=Math.abs(u.x-h.x),u=Math.abs(u.y-h.y),r=Math.max(e,d),l=Math.max(c,u)),{contentWidth:r,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===x||this.targetScale<this.scale)this.isBouncingX=!1,this.isBouncingY=!1;else{let e=this.target,{x:t,y:i,xDiff:n,yDiff:s}=this.checkBounds(),o=this.option("maxVelocity"),a=this.velocity.e,r=this.velocity.f;0!==n?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,0!==s?(this.isBouncingY=!0,s*r<=0?r+=.14*s:(r=.14*s,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=r)}}enable(){var e,t=this.content,i=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(e of v)this.current[e]=this.target[e]=i[e];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=b.Ready,this.emit("ready")}onClick(n){"click"===n.type&&0===n.detail&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&(null!=(t=this.pointerTracker)&&t.clear(),this.trackingPoints=[],this.startDecelAnim());var e=n.target;if(e&&!n.defaultPrevented)if(e.hasAttribute("disabled"))n.preventDefault(),n.stopPropagation();else if(!(t=window.getSelection())||"Range"!==t.type||e.closest("button")){var t=e.closest("[data-panzoom-action]"),i=e.closest("[data-panzoom-change]");if(i=(t=t||i)&&c(t)?t.dataset:null){var s=i.panzoomChange,o=i.panzoomAction;if((s||o)&&n.preventDefault(),s){let e={};try{e=JSON.parse(s)}catch(n){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(e)}if(o)return void(this[o]&&this[o]())}if(3<Math.abs(this.dragOffset.x)||3<Math.abs(this.dragOffset.y))n.preventDefault(),n.stopPropagation();else if(!e.closest("[data-fancybox]")&&(t=this.content.getBoundingClientRect(),!(i=this.dragStart).time||this.canZoomOut()||!(2<Math.abs(t.x-i.x)||2<Math.abs(t.y-i.y)))){this.dragStart.time=0;let e=e=>{this.option("zoom",n)&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof this[e]&&(n.preventDefault(),this[e]({event:n}))},t=this.option("click",n),i=this.option("dblClick",n);i?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout(()=>{1===this.clicks?(this.emit("click",n),!n.defaultPrevented&&t&&e(t)):(this.emit("dblClick",n),n.defaultPrevented||e(i)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",n),!n.defaultPrevented&&t&&e(t))}}}addTrackingPoint(e){var t=this.trackingPoints.filter(e=>e.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){if(!1===this.option("touch",e))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];var n=this.content.getBoundingClientRect();if(this.dragStart={x:n.x,y:n.y,top:n.top,left:n.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===x&&1<this.targetScale)return e.preventDefault(),e.stopPropagation(),!1;if(n=e.composedPath()[0],!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(n.nodeName)||n.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;null!=(i=window.getSelection())&&i.removeAllRanges()}if("mousedown"===e.type)["A","BUTTON"].includes(n.nodeName)||e.preventDefault();else if(.3<Math.abs(this.velocity.a))return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(a,r,l){if(!1!==this.option("touch",a)&&this.isDragging&&!(r.length<2&&this.panOnlyZoomed&&T(this.targetScale)<=T(this.minScale)||(this.emit("touchMove",a),a.defaultPrevented))){this.addTrackingPoint(r[0]);var h=this.content,c=W(l[0],l[1]),d=W(r[0],r[1]);let e=0,t=0,i=(1<r.length&&(u=h.getBoundingClientRect(),e=c.clientX-u.left-.5*u.width,t=c.clientY-u.top-.5*u.height),h=_(l[0],l[1]),l=_(r[0],r[1]),h?l/h:1),n=d.clientX-c.clientX,s=d.clientY-c.clientY,o=(this.dragOffset.x+=n,this.dragOffset.y+=s,this.dragOffset.time=Date.now()-this.dragStart.time,T(this.targetScale)===T(this.minScale)&&this.option("lockAxis"));if(o&&!this.lockedAxis)if("xy"===o||"y"===o||"touchmove"===a.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void a.preventDefault();var u=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=45<u&&u<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,n=0,s=0}else this.lockedAxis=o;j(a.target,this.content)&&(o="x",this.dragOffset.y=0),o&&"xy"!==o&&this.lockedAxis!==o&&T(this.targetScale)===T(this.minScale)||(a.cancelable&&a.preventDefault(),this.container.classList.add(this.cn("isDragging")),r=this.checkBounds(n,s),this.option("rubberband")?("x"!==this.isInfinite&&(0<r.xDiff&&n<0||r.xDiff<0&&0<n)&&(n*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*r.xDiff))),"y"!==this.isInfinite&&(0<r.yDiff&&s<0||r.yDiff<0&&0<s)&&(s*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*r.yDiff)))):(r.xDiff&&(n=0),r.yDiff&&(s=0)),l=this.targetScale,h=this.minScale,d=this.maxScale,l<.5*h&&(i=Math.max(i,h)),1.5*d<l&&(i=Math.min(i,d)),"y"===this.lockedAxis&&T(l)===T(h)&&(n=0),"x"===this.lockedAxis&&T(l)===T(h)&&(s=0),this.applyChange({originX:e,originY:t,panX:n,panY:s,scale:i,friction:this.option("dragFriction"),ignoreBounds:!0}))}}onPointerUp(e,t,i){i.length?(this.dragOffset.x=0,this.dragOffset.y=0,this.trackingPoints=[]):(this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),j(e.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==b.Destroy)&&!e.defaultPrevented&&this.startDecelAnim())}startDecelAnim(){var e,t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(e of v)this.velocity[e]=0;this.target.e=this.current.e,this.target.f=this.current.f,y(this.container,"is-scaling"),y(this.container,"is-animating"),this.isTicking=!1;let i=(u=this.trackingPoints)[0],n=0,s=0,o=0,a=((u=u[u.length-1])&&i&&(n=u.clientX-i.clientX,s=u.clientY-i.clientY,o=u.time-i.time),1!==(u=(null==(d=window.visualViewport)?void 0:d.scale)||1)&&(n*=u,s*=u),0),r=0,l=0,h=0,c=this.option("decelFriction");i=this.targetScale,0<o&&(l=3<Math.abs(n)?n/(o/30):0,h=3<Math.abs(s)?s/(o/30):0,p=this.option("maxVelocity"))&&(l=Math.max(Math.min(l,p),-1*p),h=Math.max(Math.min(h,p),-1*p)),l&&(a=l/(1/(1-c)-1)),h&&(r=h/(1/(1-c)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&T(i)===this.minScale)&&(a=l=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&T(i)===this.minScale)&&(r=h=0);var d=this.dragOffset.x,u=this.dragOffset.y,p=this.option("dragMinThreshold")||0;Math.abs(d)<p&&Math.abs(u)<p&&(a=r=0,l=h=0),(this.option("zoom")&&(i<this.minScale-1e-5||i>this.maxScale+1e-5)||t&&!a&&!r)&&(c=.35),this.applyChange({panX:a,panY:r,friction:c}),this.emit("decel",l,h,d,u)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),t=Math.max(-1,Math.min(1,t));this.emit("wheel",e,t),this.panMode===x||e.defaultPrevented||("pan"===(t=this.option("wheel"))?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):"zoom"===t&&!1!==this.option("zoom")&&this.zoomWithWheel(e))}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){"Escape"===e.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");var e,{current:t,target:i,content:n,contentRect:s}=this,o=Object.assign({},K);for(e of v){var a="e"==e||"f"===e?J:1e5;o[e]=T(t[e],a),Math.abs(i[e]-t[e])<("e"==e||"f"===e?.51:.001)&&(t[e]=i[e])}var{a:r,b:l,c:h,d:c,e:d,f:u}=o,r=`matrix(${r}, ${l}, ${h}, ${c}, ${d}, ${u})`,l=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;(l=this.option("transformParent")&&l.parentElement||l).style.transform!==r&&(l.style.transform=r,{contentWidth:h,contentHeight:c}=this.calculateContentDim(),s.width=h,s.height=c,this.emit("afterTransform"))}updateMetrics(r=!1){if(this&&this.state!==b.Destroy&&!this.isContentLoading){var l=Math.max(1,(null==(l=window.visualViewport)?void 0:l.scale)||1),{container:h,content:c}=this,d=c instanceof HTMLImageElement,h=h.getBoundingClientRect(),u=getComputedStyle(this.container),p=h.width*l,g=h.height*l,m=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),u=p-(parseFloat(u.paddingLeft)+parseFloat(u.paddingRight)),u=(this.containerRect={width:p,height:g,innerWidth:u,innerHeight:g-m},parseFloat(c.dataset.width||"")||((p=c)instanceof HTMLImageElement?p.naturalWidth:p instanceof SVGElement?p.width.baseVal.value:Math.max(p.offsetWidth,p.scrollWidth))||0),m=parseFloat(c.dataset.height||"")||((g=c)instanceof HTMLImageElement?g.naturalHeight:g instanceof SVGElement?g.height.baseVal.value:Math.max(g.offsetHeight,g.scrollHeight))||0;let e=this.option("width",u)||E,t=this.option("height",m)||E,i=(p=e===E,g=t===E,"number"!=typeof e&&(e=u),"number"!=typeof t&&(t=m),p&&(e=u*(t/m)),g&&(t=m/(u/e)),c.parentElement instanceof HTMLPictureElement?c.parentElement:c),n=(p=(i=this.option("transformParent")&&i.parentElement||i).getAttribute("style")||"",i.style.setProperty("transform","none","important"),d&&(i.style.width="",i.style.height=""),i.offsetHeight,(g=c.getBoundingClientRect()).width*l),s=g.height*l,o=n,a=s;n=Math.min(n,e),s=Math.min(s,t),d?{width:n,height:s}=(c=e,l=t,f=n,v=s,{width:c*=f=Math.min(f/c,v/l),height:l*=f}):(n=Math.min(n,e),s=Math.min(s,t)),m=.5*(a-s),u=.5*(o-n),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:g.top-h.top+m,bottom:h.bottom-g.bottom+m,left:g.left-h.left+u,right:h.right-g.right+u,fitWidth:n,fitHeight:s,width:n,height:s,fullWidth:e,fullHeight:t}),i.style.cssText=p,d&&(i.style.width=n+"px",i.style.height=s+"px"),this.setTransform(),!0!==r&&this.emit("refresh"),this.ignoreBounds||(T(this.targetScale)<T(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===b.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}var f,v}calculateBounds(){let{contentWidth:a,contentHeight:r}=this.calculateContentDim(this.target),{targetScale:l,lockedAxis:h}=this,{fitWidth:c,fitHeight:d}=this.contentRect,u=0,p=0,g=0,m=0,f=this.option("infinite");if(!0===f||h&&f===h)u=-1/0,g=1/0,p=-1/0,m=1/0;else{let{containerRect:e,contentRect:t}=this,i=T(c*l,J),n=T(d*l,J),{innerWidth:s,innerHeight:o}=e;e.width===i&&(s=e.width),e.width===n&&(o=e.height),a>s&&(g=.5*(a-s),u=-1*g,f=.5*(t.right-t.left),u+=f,g+=f),c>s&&a<s&&(u-=.5*(c-s),g-=.5*(c-s)),r>o&&(m=.5*(r-o),p=-1*m,h=.5*(t.bottom-t.top),p+=h,m+=h),d>o&&r<o&&(u-=.5*(d-o),g-=.5*(d-o))}return{x:{min:u,max:g},y:{min:p,max:m}}}getBounds(){var e=this.option("bounds");return e!==E?e:this.calculateBounds()}updateControls(){let e=this,t=e.container,{panMode:i,contentRect:n,targetScale:s,minScale:o}=e,a=o,r=e.option("click")||!1,l=(r&&(a=e.getNextScale(r)),e.canZoomIn()),h=e.canZoomOut(),c=i===Q&&!!this.option("touch"),d=h&&c;if(c&&(T(s)<T(o)&&!this.panOnlyZoomed&&(d=!0),T(n.width,1)>T(n.fitWidth,1)||T(n.height,1)>T(n.fitHeight,1))&&(d=!0),T(n.width*s,1)<T(n.fitWidth,1)&&(d=!1),i===x&&(d=!1),f(t,this.cn("isDraggable"),d),this.option("zoom")){var u,p=l&&T(a)>T(s),g=!p&&!d&&h&&T(a)<T(s);f(t,this.cn("canZoomIn"),p),f(t,this.cn("canZoomOut"),g);for(u of t.querySelectorAll("[data-panzoom-action]")){let e=!1,t=!1;switch(u.dataset.panzoomAction){case"zoomIn":l?e=!0:t=!0;break;case"zoomOut":h?e=!0:t=!0;break;case"toggleZoom":case"iterateZoom":l||h?e=!0:t=!0;var m=u.querySelector("g");m&&(m.style.display=l?"":"none")}e?(u.removeAttribute("disabled"),u.removeAttribute("tabindex")):t&&(u.setAttribute("disabled",""),u.setAttribute("tabindex","-1"))}}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:s=0,originX:o=0,originY:a=0,flipX:r=!1,flipY:l=!1,ignoreBounds:h=!1}){this.state!==b.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:s,originX:o,originY:a,friction:n,flipX:r,flipY:l,ignoreBounds:h})}applyChange({panX:t=0,panY:i=0,scale:n=1,angle:s=0,originX:o=-this.current.e,originY:a=-this.current.f,friction:r=this.option("friction"),flipX:l=!1,flipY:h=!1,ignoreBounds:c=!1,bounce:d=this.option("bounce")}){var u=this.state;if(u!==b.Destroy){this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=c;var p,g=(r=this.current).e,r=r.f,m=this.getMatrix(this.target);let e=(new DOMMatrix).translate(g,r).translate(o,a).translate(t,i);this.option("zoom")&&(c||(t=this.targetScale)*(n=t*n<(i=this.minScale)?i/t:n)>(i=this.maxScale)&&(n=i/t),e=e.scale(n)),e=e.translate(-o,-a).translate(-g,-r).multiply(m),s&&(e=e.rotate(s)),l&&(e=e.scale(-1,1)),h&&(e=e.scale(1,-1));for(p of v)"e"!==p&&"f"!==p&&(e[p]>this.minScale+1e-5||e[p]<this.minScale-1e-5)?this.target[p]=e[p]:this.target[p]=T(e[p],J);(this.targetScale<this.scale||.1<Math.abs(n-1)||this.panMode===x||!1===d)&&!c&&this.clampTargetBounds(),u===b.Init?this.animate():this.isResting||(this.state=b.Panning,this.requestTick())}}stop(e=!1){if(this.state!==b.Init&&this.state!==b.Destroy){var t,i=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(t of v)this.velocity[t]=0,"current"===e?this.current[t]=this.target[t]:"target"===e&&(this.target[t]=this.current[t]);this.setTransform(),y(this.container,"is-scaling"),y(this.container,"is-animating"),this.isTicking=!1,this.state=b.Ready,i&&(this.emit("endAnimation"),this.updateControls())}}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),w(this.container,"is-animating"),this.isScaling&&w(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(i,n=this.option("mouseMoveFriction")){if(this.pmme=i,this.panMode===x&&i&&!(T(this.targetScale)<=T(this.minScale))){this.emit("mouseMove",i);var{container:s,containerRect:o,contentRect:a}=this,r=o.width,o=o.height,s=s.getBoundingClientRect(),l=(i.clientX||0)-s.left,i=(i.clientY||0)-s.top;let{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target);1<(s=this.option("mouseMoveFactor"))&&(e!==r&&(e*=s),t!==o)&&(t*=s),s=.5*(e-r)-l/r*100/100*(e-r),s+=.5*(a.right-a.left),l=.5*(t-o)-i/o*100/100*(t-o),l+=.5*(a.bottom-a.top),this.applyChange({panX:s-this.target.e,panY:l-this.target.f,friction:n})}}zoomWithWheel(e){var t,i,n,s,o;this.state!==b.Destroy&&this.state!==b.Init&&((t=Date.now())-this.pwt<45?e.preventDefault():(this.pwt=t,t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),{targetScale:i,maxScale:n,minScale:s}=this,o=i*(100+45*(t=Math.max(-1,Math.min(1,t))))/100,o=T(o)<T(s)&&T(i)<=T(s)?(this.cwd+=Math.abs(t),s):T(o)>T(n)&&T(i)>=T(n)?(this.cwd+=Math.abs(t),n):(this.cwd=0,Math.max(Math.min(o,n),s)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),T(o)!==T(i)&&this.zoomTo(o,{event:e}))))}canZoomIn(){return this.option("zoom")&&(T(this.contentRect.width,1)<T(this.contentRect.fitWidth,1)||T(this.targetScale)<T(this.maxScale))}canZoomOut(){return this.option("zoom")&&T(this.targetScale)>T(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(t=1,{friction:i=E,originX:n=E,originY:s=E,event:o}={}){if(!this.isContentLoading&&this.state!==b.Destroy){var a,r,l,{targetScale:h,fullScale:c,maxScale:d,coverScale:u}=this;this.stop(),!(o=this.panMode===x&&this.pmme||o)&&n!==E&&s!==E||(a=this.content.getBoundingClientRect(),l=this.container.getBoundingClientRect(),r=o?o.clientX:l.left+.5*l.width,l=o?o.clientY:l.top+.5*l.height,n=r-a.left-.5*a.width,s=l-a.top-.5*a.height);let e=1;"number"==typeof t?e=t:"full"===t?e=c:"cover"===t?e=u:"max"===t?e=d:"fit"===t?e=1:"next"===t&&(e=this.getNextScale("iterateZoom")),e=e/h||1,i=i===E?1<e?.15:.25:i,this.applyChange({scale:e,originX:n,originY:s,friction:i}),o&&this.panMode===x&&this.panWithMouse(o,i)}}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");var{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");var{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){var e=this.container,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t),(e=e.classList.contains(t))?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(e?"enterFS":"exitFS")}getMatrix(e=this.current){var{a:e,b:t,c:i,d:n,e:s,f:o}=e;return new DOMMatrix([e,t,i,n,s,o])}reset(e){if(this.state!==b.Init&&this.state!==b.Destroy){this.stop("current");for(var t of v)this.target[t]=K[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===e?this.option("friction"):e,this.state=b.Panning,this.requestTick())}}destroy(){this.stop(),this.state=b.Destroy,this.detachEvents(),this.detachObserver();var e,{container:t,content:i}=this,n=this.option("classes")||{};for(e of Object.values(n))t.classList.remove(e+"");i&&(i.removeEventListener("load",this.onLoad),i.removeEventListener("error",this.onError)),this.detachPlugins()}}function ne(t,i){let n=!0;return(...e)=>{n&&(n=!1,t(...e),setTimeout(()=>{n=!0},i))}}Object.defineProperty(S,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:U}),Object.defineProperty(S,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});let se=(e,t)=>{let i=[];return e.childNodes.forEach(e=>{e.nodeType!==Node.ELEMENT_NODE||t&&!e.matches(t)||i.push(e)}),i},oe=((e=p={})[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Destroy=2]="Destroy",e=>{var t;return"string"==typeof e||e instanceof HTMLElement?e={html:e}:void 0!==(t=e.thumb)&&("string"==typeof t&&(e.thumbSrc=t),t instanceof HTMLImageElement&&(e.thumbEl=t,e.thumbElSrc=t.src,e.thumbSrc=t.src),delete e.thumb),Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},e)});class t extends Y{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}class ae extends t{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list,t;return e||(e=document.createElement("ul"),w(e,this.cn("list")),e.setAttribute("role","tablist"),(t=this.instance.container).appendChild(e),w(t,this.cn("hasDots")),this.list=e),e}refresh(){var i,n=this.instance.pages.length,s=Math.min(2,this.option("minCount")),o=Math.max(2e3,this.option("maxCount")),a=this.option("dynamicFrom");if(n<s||o<n)this.cleanup();else{var r,s="number"==typeof a&&5<n&&a<=n,l=((o=!this.list||this.isDynamic!==s||this.list.children.length!==n)&&this.cleanup(),this.build());if(f(l,this.cn("isDynamic"),!!s),o)for(let e=0;e<n;e++)l.append(this.createItem(e));let e,t=0;for(r of[...l.children]){var h,c=t===this.instance.page;c&&(e=r),f(r,this.cn("isCurrent"),c),null!=(i=r.children[0])&&i.setAttribute("aria-selected",c?"true":"false");for(h of["isBeforePrev","isPrev","isNext","isAfterNext"])y(r,this.cn(h));t++}e=e||l.firstChild,s&&e&&(o=(a=e.previousElementSibling)&&a.previousElementSibling,w(a,this.cn("isPrev")),w(o,this.cn("isBeforePrev")),o=(a=e.nextElementSibling)&&a.nextElementSibling,w(a,this.cn("isNext")),w(o,this.cn("isAfterNext"))),this.isDynamic=s}}createItem(e=0){var t=document.createElement("li"),e=(t.setAttribute("role","presentation"),d(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+"")));return t.appendChild(e),null!=(e=t.children[0])&&e.setAttribute("role","tab"),t}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,y(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(ae,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});let re="disabled",le="next",he="prev";class ce extends t{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){var e,t,i=this.instance,n=i.pages.length,s=i.page;n<2?this.cleanup():(this.build(),e=this.prev,t=this.next,e&&t&&(e.removeAttribute(re),t.removeAttribute(re),i.isInfinite||(s<=0&&e.setAttribute(re,""),n-1<=s&&t.setAttribute(re,""))))}addBtn(e){var t=this.instance,i=document.createElement("button"),n=(i.setAttribute("tabindex","0"),i.setAttribute("title",t.localize(`{{${e.toUpperCase()}}}`)),w(i,this.cn("button")+" "+this.cn(e===le?"isNext":"isPrev")),t.isRTL?e===le?he:le:e);return i.innerHTML=t.localize(this.option(n+"Tpl")),i.dataset["carousel"+((t=e)?t.match("^[a-z]")?t.charAt(0).toUpperCase()+t.substring(1):t:"")]="true",null!=(n=this.container)&&n.appendChild(i),i}build(){let e=this.instance.container,t=this.cn("container"),{container:i,prev:n,next:s}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),w(i,t),e.appendChild(i)),this.container=i,s=s||i.querySelector("[data-carousel-next]")||this.addBtn(le),this.next=s,n=n||i.querySelector("[data-carousel-prev]")||this.addBtn(he),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(ce,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class de extends t{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){var{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===p.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===p.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var n,s,o;3<Math.abs(t.dragOffset.x)||3<Math.abs(t.dragOffset.y)||(t=i.target,{nav:n,target:s}=this,n&&s&&t&&(t=t.closest("[data-index]"),i.stopPropagation(),i.preventDefault(),t)&&(i=parseInt(t.dataset.index||"",10)||0,t=s.getPageForSlide(i),o=n.getPageForSlide(i),n.slideTo(o),s.slideTo(t,{friction:(null==(o=null==(n=this.nav)?void 0:n.plugins)?void 0:o.Sync.option("friction"))||0}),this.markSelectedSlide(i)))}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t,{target:i,nav:n}=this;i&&n&&n.state===p.Ready&&i.state===p.Ready&&(e=null==(e=null==(e=i.pages[i.page])?void 0:e.slides[0])?void 0:e.index,t=n.getPageForSlide(e),this.markSelectedSlide(e),n.slideTo(t,null===n.prevPage&&null===i.prevPage?{friction:0}:void 0))}markSelectedSlide(t){var e=this.nav;e&&e.state===p.Ready&&(this.selectedIndex=t,[...e.slides].map(e=>{e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")}))}attach(){var e=this.options.target,t=this.options.nav;e?this.addAsNavFor(e):t&&this.addAsTargetFor(t)}detach(){var e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(de,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});let ue={Navigation:ce,Dots:ae,Sync:de},pe="animationend",ge="isSelected",me="slide";class r extends V{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===p.Ready}get isInfinite(){var{contentDim:e,viewportDim:t,pages:i,slides:n}=this,n=n[0];return!!(2<=i.length&&n&&e+n.dim>=t)&&this.option("infinite")}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:p.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),!(e="string"==typeof e?document.querySelector(e):e)||!c(e))throw new Error("No Element found");this.container=e,this.slideNext=ne(this.slideNext.bind(this),150),this.slidePrev=ne(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){let e,t,i=u({},r.defaults,this.userOptions),n="",s=i.breakpoints;if(s&&q(s))for(var[o,a]of Object.entries(s))window.matchMedia(o).matches&&q(a)&&(n+=o,u(i,a));n===this.bp&&this.state!==p.Init||(this.bp=n,this.state===p.Ready&&(i.initialSlide=(null==(t=null==(e=this.pages[this.page])?void 0:e.slides[0])?void 0:t.index)||0),this.state!==p.Init&&this.destroy(),super.setOptions(i),!1===this.option("enabled")?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=p.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},r.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=p.Ready,this.emit("ready")}initLayout(){var e=this.container,t=this.option("classes");w(e,this.cn("container")),f(e,t.isLTR,!this.isRTL),f(e,t.isRTL,this.isRTL),f(e,t.isVertical,!this.isHorizontal),f(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector("."+t.viewport),n=(i||(i=document.createElement("div"),w(i,t.viewport),i.append(...se(e,"."+t.slide)),e.prepend(i)),i.addEventListener("scroll",this.onScroll),this.option("track")||e.querySelector("."+t.track));n||(n=document.createElement("div"),w(n,t.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){var i=this.track;if(i){let e=[...this.slides],t=[];[...se(i,"."+this.cn(me))].forEach(e=>{c(e)&&(e=oe({el:e,isDom:!0,index:this.slides.length}),t.push(e))});for(var n of[...this.option("slides",[])||[],...e])t.push(oe(n));this.slides=t;for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;for(var s of t)this.emit("beforeInitSlide",s,s.index),this.emit("initSlide",s,s.index);this.emit("initSlides")}}setInitialPage(){var e=this.option("initialSlide");this.page="number"==typeof e?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){var{track:t,pages:i,isHorizontal:n}=this;if(t&&i.length){let e=this.page;i[e]||(this.page=e=0),i=(i[e].pos||0)*(this.isRTL&&n?1:-1),t.style.transform=`translate3d(${n?i+"px":"0"}, ${n?"0":i+"px"}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);var e=this.option("Panzoom")||{};this.panzoom=new S(this.viewport,u({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:e=>!(this.pages.length<2&&!e.options.infinite),bounds:()=>this.getBounds(),maxVelocity:e=>Math.abs(e.target[this.axis]-e.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(e,t,...i)=>{this.emit("Panzoom."+t,e,...i)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){var e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){var e,t,i=[],{contentDim:n,viewportDim:s}=this,o=("auto"===(o=this.option("slidesPerPage"))||n<=s)&&!1!==this.option("fill")?1/0:parseFloat(o+"");let a=0,r=0,l=0;for(t of this.slides)(!i.length||.05<r+t.dim-s||l>=o)&&(i.push((e={},Object.assign({index:-1,slides:[],dim:0,pos:-1},e))),a=i.length-1,r=0,l=0),i[a].slides.push(t),r+=t.dim+t.gap,l++;return i}processPages(){let e=this.pages,{contentDim:s,viewportDim:o,isInfinite:t}=this,a=this.option("center"),i=this.option("fill"),r=i&&a&&s>o&&!t;if(e.forEach((e,t)=>{e.index=t,e.pos=(null==(t=e.slides[0])?void 0:t.pos)||0,e.dim=0;for(var[i,n]of e.slides.entries())e.dim+=n.dim,i<e.slides.length-1&&(e.dim+=n.gap);r&&e.pos+.5*e.dim<.5*o?e.pos=0:r&&e.pos+.5*e.dim>=s-.5*o?e.pos=s-o:a&&(e.pos+=-.5*(o-e.dim))}),e.forEach(e=>{i&&!t&&s>o&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,s-o)),e.pos=T(e.pos,1e3),e.dim=T(e.dim,1e3),Math.abs(e.pos)<=.1&&(e.pos=0)}),t)return e;let n=[],l;return e.forEach(e=>{e=Object.assign({},e),l&&e.pos===l.pos?(l.dim+=e.dim,l.slides=[...l.slides,...e.slides]):(e.index=n.length,l=e,n.push(e))}),n}getPageFromIndex(e=0){var t=this.pages.length;return e=parseInt((e||0).toString())||0,this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0)}getSlideMetrics(e){var t=this.isHorizontal?"width":"height";let i=0,n,s=e.el,o=!(!s||s.parentNode);return s?i=parseFloat(s.dataset[t]||"")||0:((s=document.createElement("div")).style.visibility="hidden",(this.track||document.body).prepend(s)),w(s,this.cn(me)+" "+e.class+" "+e.customClass),i?(s.style[t]=i+"px",s.style["width"==t?"height":"width"]=""):(o&&(this.track||document.body).prepend(s),i=s.getBoundingClientRect()[t]*Math.max(1,(null==(t=window.visualViewport)?void 0:t.scale)||1),(t=s[this.isHorizontal?"offsetWidth":"offsetHeight"])-1>i&&(i=t)),"content-box"===(t=getComputedStyle(s)).boxSizing&&(i=this.isHorizontal?(i+=parseFloat(t.paddingLeft)||0)+(parseFloat(t.paddingRight)||0):(i+=parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0)),n=parseFloat(t[this.isHorizontal?"marginRight":"marginBottom"])||0,o?null!=(t=s.parentElement)&&t.removeChild(s):e.el||s.remove(),{dim:T(i,1e3),gap:T(n,1e3)}}getBounds(){let{isInfinite:e,isRTL:t,isHorizontal:i,pages:n}=this,s={min:0,max:0},o,a;return e?s={min:-1/0,max:1/0}:n.length&&(o=n[0].pos,a=n[n.length-1].pos,s=t&&i?{min:o,max:a}:{min:-1*a,max:-1*o}),{x:i?s:{min:0,max:0},y:i?{min:0,max:0}:s}}repositionSlides(){let t,{isHorizontal:e,isRTL:i,isInfinite:n,viewport:s,viewportDim:o,contentDim:a,page:r,pages:l,slides:h,panzoom:c}=this,d=0,u=0,p=0,g=0;c?g=-1*c.current[this.axis]:l[r]&&(g=l[r].pos||0),t=e?i?"right":"left":"top",i&&e&&(g*=-1);for(var m of h){var f=m.el;f?("top"==t?(f.style.right="",f.style.left=""):f.style.top="",m.index!==d?f.style[t]=0===u?"":T(u,1e3)+"px":f.style[t]="",p+=m.dim+m.gap,d++):u+=m.dim+m.gap}if(n&&p&&s){var v,b=getComputedStyle(s),y="padding",w=e?"Right":"Bottom",x=parseFloat(b[y+(e?"Left":"Top")]);g-=x,o=(o+=x)+parseFloat(b[y+w]);for(v of h)v.el&&(T(v.pos)<T(o)&&T(v.pos+v.dim+v.gap)<T(g)&&T(g)>T(a-o)&&(v.el.style[t]=T(u+p,1e3)+"px"),T(v.pos+v.gap)>=T(a-o))&&T(v.pos)>T(g+o)&&T(g)<T(o)&&(v.el.style[t]=`-${T(p,1e3)}px`)}let E,S,P=[...this.inTransition];if(1<P.length&&(E=l[P[0]],S=l[P[1]]),E&&S){let e=0;for(var C of h)C.el?this.inTransition.has(C.index)&&E.slides.indexOf(C)<0&&(C.el.style[t]=T(e+(E.pos-S.pos),1e3)+"px"):e+=C.dim+C.gap}}createSlideEl(t){var{track:s,slides:o}=this;if(s&&t&&(!t.el||!t.el.parentNode)){var a=t.el||document.createElement("div"),r=(w(a,this.cn(me)),w(a,t.class),w(a,t.customClass),t.html);r&&(r instanceof HTMLElement?a.appendChild(r):a.innerHTML=t.html+"");let i=[],n=(o.forEach((e,t)=>{e.el&&i.push(t)}),t.index),e;r=(e=i.length?o[i.reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e)]:null)&&e.el&&e.el.parentNode?e.index<t.index?e.el.nextSibling:e.el:null,s.insertBefore(a,s.contains(r)?r:null),t.el=a,this.emit("createSlide",t)}}removeSlideEl(e,t=!1){var i,n=null==e?void 0:e.el;n&&n.parentNode&&(i=this.cn(ge),n.classList.contains(i)&&(y(n,i),this.emit("unselectSlide",e)),e.isDom&&!t?(n.removeAttribute("aria-hidden"),n.removeAttribute("data-index"),n.style.left=""):(this.emit("removeSlide",e),i=new CustomEvent(pe),n.dispatchEvent(i),e.el&&(e.el.remove(),e.el=null)))}transitionTo(e=0,t=this.option("transition")){if(!t)return!1;var i=this.page,{pages:n,panzoom:s}=this,o=(e=parseInt((e||0).toString())||0,this.getPageFromIndex(e));if(!s||!n[o]||n.length<2||1<Math.abs(((null==(r=null==(r=n[i])?void 0:r.slides[0])?void 0:r.dim)||0)-this.viewportDim))return!1;let a=i<e?1:-1;this.isInfinite&&(0===i&&e===n.length-1&&(a=-1),i===n.length-1)&&0===e&&(a=1);var r=n[o].pos*(this.isRTL?1:-1);if(i===o&&Math.abs(r-s.target[this.axis])<1)return!1;this.clearTransitions(),e=s.isResting,w(this.container,this.cn("inTransition")),i=(null==(i=n[i])?void 0:i.slides[0])||null,n=(null==(n=n[o])?void 0:n.slides[0])||null,this.inTransition.add(n.index),this.createSlideEl(n);let l=i.el,h=n.el;e||t===me||(t="fadeFast",l=null);var e=this.isRTL?"next":"prev",c=this.isRTL?"prev":"next";return l&&(this.inTransition.add(i.index),i.transition=t,l.addEventListener(pe,this.onAnimationEnd),l.classList.add(`f-${t}Out`,"to-"+(0<a?c:e))),h&&(n.transition=t,h.addEventListener(pe,this.onAnimationEnd),h.classList.add(`f-${t}In`,"from-"+(0<a?e:c))),s.current[this.axis]=r,s.target[this.axis]=r,s.requestTick(),this.onChange(o),!0}manageSlideVisiblity(){var e,t,i,n,s=new Set,o=new Set,a=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(e of this.slides)(a.has(e)?s:o).add(e);for(t of this.inTransition)s.add(this.slides[t]);for(i of s)this.createSlideEl(i),this.lazyLoadSlide(i);for(n of o)s.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(this.pages[this.page]&&this.pages[this.page].slides){var e="aria-hidden",t=this.cn(ge);if(t)for(var i of this.slides){var n=i.el;n&&(n.dataset.index=""+i.index,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(e):n.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(t)||(w(n,t),this.emit("selectSlide",i)),n.removeAttribute(e)):(n.classList.contains(t)&&(y(n,t),this.emit("unselectSlide",i)),n.setAttribute(e,"true")))}}}flipInfiniteTrack(){var{axis:s,isHorizontal:o,isInfinite:e,isRTL:a,viewportDim:r,contentDim:l}=this,h=this.panzoom;if(h&&e){let e=h.current[s],t=h.target[s]-e,i=0,n=.5*r;a&&o?(e<-n&&(i=-1,e+=l),e>l-n&&(i=1,e-=l)):(e>n&&(i=1,e-=l),e<n-l&&(i=-1,e+=l)),i&&(h.current[s]=e,h.target[s]=e+t)}}lazyLoadImg(t,i){let e=this,n="f-fadeIn",s="is-preloading",o=!1,a=null,r=()=>{o||(o=!0,a&&(a.remove(),a=null),y(i,s),i.complete&&(w(i,n),setTimeout(()=>{y(i,n)},350)),this.option("adaptiveHeight")&&t.el&&-1<this.pages[this.page].slides.indexOf(t)&&(e.updateMetrics(),e.setViewportHeight()),this.emit("load",t))};w(i,s),i.src=i.dataset.lazySrcset||i.dataset.lazySrc||"",delete i.dataset.lazySrc,delete i.dataset.lazySrcset,i.addEventListener("error",()=>{r()}),i.addEventListener("load",()=>{r()}),setTimeout(()=>{var e=i.parentNode;e&&t.el&&(i.complete?r():o||(a=d(G),e.insertBefore(a,i)))},300)}lazyLoadSlide(i){var n=i&&i.el;if(n){let t=new Set,e=Array.from(n.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));n.dataset.lazySrc&&e.push(n),e.map(e=>{e instanceof HTMLImageElement?t.add(e):e instanceof HTMLElement&&e.dataset.lazySrc&&(e.style.backgroundImage=`url('${e.dataset.lazySrc}')`,delete e.dataset.lazySrc)});for(var s of t)this.lazyLoadImg(i,s)}}onAnimationEnd(e){var t=e.target,i=t?parseInt(t.dataset.index||"",10)||0:-1,n=this.slides[i],e=e.animationName;t&&n&&e&&((t=!!this.inTransition.has(i)&&n.transition)&&e.substring(0,t.length+2)==="f-"+t&&this.inTransition.delete(i),this.inTransition.size||this.clearTransitions(),i===this.page)&&null!=(n=this.panzoom)&&n.isResting&&this.emit("settle")}onDecel(i,n=0,s=0,o=0,a=0){if(this.option("dragFree"))this.setPageFromPosition();else{var{isRTL:r,isHorizontal:l,axis:h,pages:c}=this,e=c.length,d=45<(d=Math.abs(Math.atan2(s,n)/(Math.PI/180)))&&d<135?l?0:s:l?n:0;if(e){let e=this.page,t=r&&l?1:-1;s=i.current[h]*t,n=this.getPageFromPosition(s).pageIndex,e=5<Math.abs(d)?(c[e].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(e=n),r&&l?d<0?e-1:e+1:d<0?e+1:e-1):0===o&&0===a?e:n,this.slideTo(e,{transition:!1,friction:i.option("decelFriction")})}}}onClick(e){let t=e.target,i=t&&c(t)?t.dataset:null,n,s;i&&(void 0!==i.carouselPage?(s="slideTo",n=i.carouselPage):void 0!==i.carouselNext?s="slideNext":void 0!==i.carouselPrev&&(s="slidePrev")),s?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[s](n)):this.emit("click",e)}onSlideTo(e){e=e.detail||0,this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(e,t=0){var i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){var e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;null!=(e=this.viewport)&&e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=p.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(n=0,{friction:e=this.option("friction"),transition:t=this.option("transition")}={}){if(this.state!==p.Destroy){n=parseInt((n||0).toString())||0;var i=this.getPageFromIndex(n),{axis:s,isHorizontal:o,isRTL:a,pages:r,panzoom:l}=this,h=r.length,a=a&&o?1:-1;if(l&&h){if(this.page!==i){var c=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",c,n),c.defaultPrevented)return}if(!this.transitionTo(n,t)){let t=r[i].pos;if(this.isInfinite){let e=this.contentDim,i=l.target[s]*a;2===h?t+=e*Math.floor(parseFloat(n+"")/2):t=[t,t-e,t+e].reduce(function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e})}t*=a,Math.abs(l.target[s]-t)<1||(l.panTo({x:o?t:0,y:o?0:t,friction:e}),this.onChange(i))}}}}slideToClosest(e){var t;this.panzoom&&(t=this.getPageFromPosition().pageIndex,this.slideTo(t,e))}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),y(this.container,this.cn("inTransition"));var e,t=["to-prev","to-next","from-prev","from-next"];for(e of this.slides){var i,n=e.el;n&&(n.removeEventListener(pe,this.onAnimationEnd),n.classList.remove(...t),i=e.transition)&&n.classList.remove(`f-${i}Out`,`f-${i}In`)}this.manageSlideVisiblity()}addSlide(e,t){var i,n,s,o,a,r=this.panzoom,l=(null==(l=this.pages[this.page])?void 0:l.pos)||0,h=(null==(h=this.pages[this.page])?void 0:h.dim)||0,c=this.contentDim<this.viewportDim,d=[];for(i of Array.isArray(t)?t:[t])d.push(oe(i));this.slides.splice(e,0,...d);for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;for(n of d)this.emit("beforeInitSlide",n,n.index);this.page>=e&&(this.page+=d.length),this.updateMetrics(),r&&(s=(null==(t=this.pages[this.page])?void 0:t.pos)||0,t=(null==(t=this.pages[this.page])?void 0:t.dim)||0,o=this.pages.length||1,t=this.isRTL?h-t:t-h,h=this.isRTL?l-s:s-l,c&&1===o?(e<=this.page&&(r.current[this.axis]-=t,r.target[this.axis]-=t),r.panTo({[this.isHorizontal?"x":"y"]:-1*s})):h&&e<=this.page&&(r.target[this.axis]-=h,r.current[this.axis]-=h,r.requestTick()));for(a of d)this.emit("initSlide",a,a.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){var t=this.slides.length;if(t=this.slides[e=(e%t+t)%t]){this.removeSlideEl(t,!0),this.slides.splice(e,1);for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",t)}}updateMetrics(){var{panzoom:e,viewport:t,track:s,slides:o,isHorizontal:a,isInfinite:r}=this;if(s){var l,h,c,d,u,s=a?"width":"height";t&&(l=Math.max(t[a?"offsetWidth":"offsetHeight"],T(t.getBoundingClientRect()[s],1e3)),t=getComputedStyle(t),h="padding",c=a?"Right":"Bottom",l-=parseFloat(t[h+(a?"Left":"Top")])+parseFloat(t[h+c]),this.viewportDim=l);let i,n=0;for([d,u]of o.entries()){let e=0,t=0;!u.el&&i?(e=i.dim,t=i.gap):({dim:e,gap:t}=this.getSlideMetrics(u),i=u),e=T(e,1e3),t=T(t,1e3),u.dim=e,u.gap=t,u.pos=n,n+=e,(r||d<o.length-1)&&(n+=t)}n=T(n,1e3),this.contentDim=n,e&&(e.contentRect[s]=n,e.contentRect[a?"fullWidth":"fullHeight"]=n),this.pages=this.createPages(),this.pages=this.processPages(),this.state===p.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}}getProgress(e,t=!1,i=!1){void 0===e&&(e=this.page);var n=this.panzoom,s=this.contentDim,o=this.pages[e]||0;if(!o||!n)return e>this.page?-1:1;let a=-1*n.current.e,r=T((a-o.pos)/+o.dim,1e3),l=r,h=r;return this.isInfinite&&!0!==i&&(l=T((a-o.pos+s)/+o.dim,1e3),h=T((a-o.pos-s)/+o.dim,1e3)),e=[r,l,h].reduce(function(e,t){return Math.abs(t)<Math.abs(e)?t:e}),t?e:1<e?1:e<-1?-1:e}setViewportHeight(){var{page:e,pages:i,viewport:n,isHorizontal:s}=this;if(n&&i[e]){let t=0;s&&this.track&&(this.track.style.height="auto",i[e].slides.forEach(e=>{e.el&&(t=Math.max(t,e.el.offsetHeight))})),n.style.height=t?t+"px":""}}getPageForSlide(e){for(var t of this.pages)for(var i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(t=0){var i,n=new Set,{panzoom:s,contentDim:o,viewportDim:a,pages:r,page:l}=this;if(a){o=o+(null==(i=this.slides[this.slides.length-1])?void 0:i.gap)||0;let e=0;e=s&&s.state!==b.Init&&s.state!==b.Destroy?-1*s.current[this.axis]:r[l]&&r[l].pos||0,this.isInfinite&&(e-=Math.floor(e/o)*o),this.isRTL&&this.isHorizontal&&(e*=-1);var h,c=e-a*t,d=e+a*(t+1),u=this.isInfinite?[-1,0,1]:[0];for(h of this.slides)for(var p of u)(p=h.pos+p*o)<d&&c<p+h.dim+h.gap&&n.add(h)}return n}getPageFromPosition(e){var{viewportDim:t,contentDim:i,slides:n,pages:s,panzoom:o}=this,s=s.length,a=n.length,r=n[0],a=n[a-1],l=this.option("center");let h,c=0,d=void 0===e?-1*((null==o?void 0:o.target[this.axis])||0):e,u=(l&&(d+=.5*t),this.isInfinite?(d<r.pos-.5*a.gap&&(d-=i,c=-1),d>a.pos+a.dim+.5*a.gap&&(d-=i,c=1)):d=Math.max(r.pos||0,Math.min(d,a.pos)),a),p=n.find(e=>{var t=e.pos-.5*u.gap,i=e.pos+e.dim+.5*e.gap;return u=e,d>=t&&d<i});return{page:(h=this.getPageForSlide((p||a).index))+c*s,pageIndex:h}}setPageFromPosition(){var e=this.getPageFromPosition().pageIndex;this.onChange(e)}destroy(){if(![p.Destroy].includes(this.state)){this.state=p.Destroy;var e,t,{container:i,viewport:n,track:s,slides:o,panzoom:a}=this,r=this.option("classes");i.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),i.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),a&&(a.destroy(),this.panzoom=null),o&&o.forEach(e=>{this.removeSlideEl(e)}),this.detachPlugins(),n&&(n.removeEventListener("scroll",this.onScroll),n.offsetParent)&&s&&s.offsetParent&&n.replaceWith(...s.childNodes);for([e,t]of Object.entries(r))"container"!==e&&t&&i.classList.remove(t);this.track=null,this.viewport=null,this.page=0,this.slides=[],a=this.events.get("ready"),this.events=new Map,a&&this.events.set("ready",a)}}}function fe(e){if(!c(e))return 0;var t=window.scrollY,i=window.innerHeight,n=t+i,s=(e=e.getBoundingClientRect()).y+t,o=s+(e=e.height);if(o<t||n<s)return 0;if(t<s&&o<n)return 100;if(s<t&&n<o)return 100;let a=e;return s<t&&(a-=t-s),n<o&&(a-=o-n),e=a/i*100,Math.round(e)}Object.defineProperty(r,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:S}),Object.defineProperty(r,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(r,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:ue});let ve=!("undefined"==typeof window||!window.document||!window.document.createElement),be,ye=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),we=e=>{if(e&&ve){void 0===be&&document.createElement("div").focus({get preventScroll(){return!(be=!0)}});try{var t,i;be?e.focus({preventScroll:!0}):(t=window.scrollY||document.body.scrollTop,i=window.scrollX||document.body.scrollLeft,e.focus(),document.body.scrollTo({top:t,left:i,behavior:"auto"}))}catch(e){}}},xe=()=>{let t=document,i="",e="",n="";return t.fullscreenEnabled?(i="requestFullscreen",e="exitFullscreen",n="fullscreenElement"):t.webkitFullscreenEnabled&&(i="webkitRequestFullscreen",e="webkitExitFullscreen",n="webkitFullscreenElement"),i?{request:function(e=t.documentElement){return"webkitRequestFullscreen"===i?e[i](Element.ALLOW_KEYBOARD_INPUT):e[i]()},exit:function(){return t[n]&&t[e]()},isFullscreen:function(){return t[n]}}:void 0},Ee={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},Z),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},trapFocus:!0,wheel:"zoom"},Se=((e=g={})[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Closing=2]="Closing",e[e.CustomClosing=3]="CustomClosing",e[e.Destroy=4]="Destroy",(e=m={})[e.Loading=0]="Loading",e[e.Opening=1]="Opening",e[e.Ready=2]="Ready",e[e.Closing=3]="Closing",""),Pe=!1,Ce=!1,a=null,Te=()=>{let e="";var t,i,n,s,o=D.getInstance();return{hash:o&&(t=o.carousel,i=o.getSlide(),t)&&i&&(n=i.slug||void 0,s=i.triggerEl||void 0,e=!(e=n||o.option("slug")||"")&&s&&s.dataset?s.dataset.fancybox||"":e)&&"true"!==e?"#"+e+(!n&&1<t.slides.length?"-"+(i.index+1):""):"",slug:e,index:1}},Me=()=>{var e=new URL(document.URL).hash,t=e.slice(1).split("-"),i=(i=t[t.length-1])&&/^\+?\d+$/.test(i)&&parseInt(t.pop()||"1",10)||1;return{hash:e,slug:t.join("-"),index:i}},Oe=()=>{var{slug:t,index:i}=Me();if(t){let e=document.querySelector(`[data-slug="${t}"]`);e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),D.getInstance()||(t=document.querySelectorAll(`[data-fancybox="${t}"]`)).length&&(e=t[i-1])&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0}))}},Ae=()=>{var e,t,i,n;!1!==D.defaults.Hash&&!1!==(null==(e=D.getInstance())?void 0:e.options.Hash)&&({slug:t,index:i}=Me(),n=Te().slug,e&&(t===n?e.jumpTo(i-1):(Pe=!0,e.close())),Oe())},Le=()=>{a&&clearTimeout(a),queueMicrotask(()=>{Ae()})},ze=()=>{window.addEventListener("hashchange",Le,!1),setTimeout(()=>{Ae()},500)},Re=(ve&&(/complete|interactive|loaded/.test(document.readyState)?ze():document.addEventListener("DOMContentLoaded",ze)),"is-zooming-in");class ke extends t{onCreateSlide(e,t,i){var n=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof n&&this.setImage(i,n)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,n){y(this.instance.container,Re);for(var s of t.slides){var o=s.panzoom;o&&s.index!==i&&o.reset(.35)}}onClose(){let s=this.instance,o=s.container,a=s.getSlide();if(o&&o.parentElement&&a){let{el:e,contentEl:t,panzoom:i,thumbElSrc:n}=a;if(e&&n&&t&&i&&!i.isContentLoading&&i.state!==b.Init&&i.state!==b.Destroy&&(i.updateMetrics(),c=this.getZoomInfo(a))){this.instance.state=g.CustomClosing,o.classList.remove(Re),o.classList.add("is-zooming-out"),t.style.backgroundImage=`url('${n}')`;var r=o.getBoundingClientRect(),{x:l,y:r,scale:h,opacity:c}=(1===((null==(l=window.visualViewport)?void 0:l.scale)||1)&&Object.assign(o.style,{position:"absolute",top:o.offsetTop+window.scrollY+"px",left:o.offsetLeft+window.scrollX+"px",bottom:"auto",right:"auto",width:r.width+"px",height:r.height+"px",overflow:"hidden"}),c);if(c){let e=(t=>{let i=h-t;return e=>1+((e-t)/i*-1||0)})(i.scale);i.on("afterTransform",()=>{t.style.opacity=e(i.scale)+""})}i.on("endAnimation",()=>{s.destroy()}),i.target.a=h,i.target.b=0,i.target.c=0,i.target.d=h,i.panTo({x:l,y:r,scale:h,friction:c?.2:.33,ignoreBounds:!0}),i.isResting&&s.destroy()}}}setImage(h,e){let c=this.instance;h.src=e,this.process(h,e).then(o=>{var{contentEl:s,imageEl:a,thumbElSrc:r,el:e}=h;if(!c.isClosing()&&s&&a){s.offsetHeight;var l,a=!!c.isOpeningSlide(h)&&this.getZoomInfo(h);if(this.option("protected")&&e&&(e.addEventListener("contextmenu",e=>{e.preventDefault()}),e=document.createElement("div"),w(e,"fancybox-protected"),s.appendChild(e)),r&&a){let e=o.contentRect,t=Math.max(e.fullWidth,e.fullHeight),i=null,n=(!a.opacity&&1200<t&&(i=document.createElement("img"),w(i,"fancybox-ghost"),i.src=r,s.appendChild(i)),()=>{i&&(w(i,"f-fadeFastOut"),setTimeout(()=>{i&&(i.remove(),i=null)},200))});l=r,new Promise((e,t)=>{var i=new Image;i.onload=e,i.onerror=t,i.src=l}).then(()=>{c.hideLoading(h),h.state=m.Opening,this.instance.emit("reveal",h),this.zoomIn(h).then(()=>{n(),this.instance.done(h)},()=>{}),i&&setTimeout(()=>{n()},2500<t?800:200)},()=>{c.hideLoading(h),c.revealContent(h)})}else{let e=this.optionFor(h,"initialSize"),t=this.optionFor(h,"zoom"),i={event:c.prevMouseMoveEvent||c.options.event,friction:t?.12:0},n=c.optionFor(h,"showClass")||void 0,s=!0;c.isOpeningSlide(h)&&("full"===e?o.zoomToFull(i):"cover"===e?o.zoomToCover(i):"max"===e?o.zoomToMax(i):s=!1,o.stop("current")),s&&(n=n&&(o.isDragging?"f-fadeIn":"")),c.hideLoading(h),c.revealContent(h,n)}}},()=>{c.setError(h,"{{IMAGE_ERROR}}")})}process(l,h){return new Promise((t,e)=>{let i,s=this.instance,n=l.el,o=(s.clearContent(l),s.showLoading(l),this.optionFor(l,"content")),a,r;(o="string"==typeof o?d(o):o)&&c(o)||((o=document.createElement("img"))instanceof HTMLImageElement&&(r="string"==typeof(a=l.caption)&&a?a.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${l.index+1} of `+((null==(i=s.carousel)?void 0:i.pages.length)||1),o.src=h||"",o.alt=r,o.draggable=!1,l.srcset&&o.setAttribute("srcset",l.srcset),this.instance.isOpeningSlide(l))&&(o.fetchPriority="high"),l.sizes&&o.setAttribute("sizes",l.sizes)),w(o,"fancybox-image"),l.imageEl=o,s.setContent(l,o,!1),l.panzoom=new S(n,u({transformParent:!0},this.option("Panzoom")||{},{content:o,width:(e,t)=>s.optionFor(l,"width","auto",t)||"auto",height:(e,t)=>s.optionFor(l,"height","auto",t)||"auto",wheel:()=>{var e=s.option("wheel");return("zoom"===e||"pan"==e)&&e},click:(e,t)=>{if(s.isCompact||s.isClosing())return!1;if(l.index!==(null==(n=s.getSlide())?void 0:n.index))return!1;if(t){var i=t.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(i.nodeName))return!1}var n=!t||t.target&&(null==(n=l.contentEl)?void 0:n.contains(t.target));return s.option(n?"contentClick":"backdropClick")||!1},dblClick:()=>s.isCompact?"toggleZoom":s.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:e=>{t(e)},error:()=>{e()},destroy:()=>{e()}}}))})}zoomIn(g){return new Promise((a,r)=>{let l=this.instance,h=l.container,{panzoom:c,contentEl:d,el:e}=g;if(c&&c.updateMetrics(),(u=this.getZoomInfo(g))&&e&&d&&c&&h){let{x:e,y:t,scale:i,opacity:n}=u,s=()=>{g.state!==m.Closing&&(n&&(d.style.opacity=Math.max(Math.min(1,1-(1-c.scale)/(1-i)),0)+""),1<=c.scale)&&c.scale>c.targetScale-.1&&a(c)},o=e=>{(e.scale<.99||1.01<e.scale)&&!e.isDragging||(y(h,Re),d.style.opacity="",e.off("endAnimation",o),e.off("touchStart",o),e.off("afterTransform",s),a(e))};c.on("endAnimation",o),c.on("touchStart",o),c.on("afterTransform",s),c.on(["error","destroy"],()=>{r()}),c.panTo({x:e,y:t,scale:i,friction:0,ignoreBounds:!0}),c.stop("current");var u={event:"mousemove"===c.panMode?l.prevMouseMoveEvent||l.options.event:void 0},p=this.optionFor(g,"initialSize");w(h,Re),l.hideLoading(g),"full"===p?c.zoomToFull(u):"cover"===p?c.zoomToCover(u):"max"===p?c.zoomToMax(u):c.reset(.172)}else r()})}getZoomInfo(e){var t,i,n,{el:s,imageEl:o,thumbEl:a,panzoom:r}=e,l=(t=this.instance).container;return!!(s&&o&&a&&r&&!(fe(a)<3)&&this.optionFor(e,"zoom")&&l&&t.state!==g.Destroy&&"0"!==getComputedStyle(l).getPropertyValue("--f-images-zoom")&&1===((s=window.visualViewport||null)?s.scale:1)&&({top:o,left:e,width:t,height:l}=a.getBoundingClientRect(),{top:s,left:a,fitWidth:i,fitHeight:n}=r.contentRect,t)&&l&&i&&n)&&{x:a=-1*((a+=(r=r.container.getBoundingClientRect()).left)+.5*i-(e+.5*t)),y:e=-1*((s+=r.top)+.5*n-(o+.5*l)),scale:r=t/i,opacity:"auto"===(s=this.option("zoomOpacity")||!1)?.1<Math.abs(t/l-i/n):s}}attach(){var e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){var e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}Object.defineProperty(ke,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}});let Ie="html",P="youtube",C="vimeo",De="html5video",Fe=(e,t={})=>{var i,n,s=new URL(e),s=new URLSearchParams(s.search),o=new URLSearchParams;for([i,n]of[...s,...Object.entries(t)]){var a,r=n+"";"t"===i?(a=r.match(/((\d*)m)?(\d*)s?/))&&o.set("start",60*parseInt(a[2]||"0")+parseInt(a[3]||"0")+""):o.set(i,r)}let l=o+"",h=e.match(/#t=((.*)?\d+s)/);return h&&(l+="#t="+h[1]),l},je=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class Be extends t{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);var i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);let n=t.contentEl,s=t.placeholderEl;if("inline"===t.type&&n&&s)n.classList.remove("fancybox__content"),"none"!==getComputedStyle(n).getPropertyValue("display")&&(n.style.display="none"),setTimeout(()=>{s&&(n&&s.parentNode&&s.parentNode.insertBefore(n,s),s.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===m.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var n,s;if(i.type===De)try{null!=(s=null==(n=i.el)?void 0:n.querySelector("video"))&&s.pause()}catch(e){}else{let e;i.type===C?e={method:"pause",value:"true"}:i.type===P&&(e={event:"command",func:"pauseVideo"}),e&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"),i.poller&&clearTimeout(i.poller)}}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(e=>{e.el&&(this.resizeIframe(e),this.setAspectRatio(e))})}onMessage(e){try{var t,i=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===i.event)for(var n of Array.from(document.getElementsByClassName("fancybox__iframe")))n instanceof HTMLIFrameElement&&n.contentWindow===e.source&&(n.dataset.ready="true")}else e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===i.event&&(t=document.getElementById(i.id))&&(t.dataset.ready="true")}catch(e){}}loadAjaxContent(e){var t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);let i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===g.Ready&&(i.hideLoading(e),200===n.status?i.setContent(e,n.responseText):i.setError(e,404===n.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};var s=e.ajax||null;n.open(s?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(s),e.xhr=n}setInlineContent(e){let t=null;var i;c(e.src)?t=e.src:"string"==typeof e.src&&(i=e.src.split("#",2).pop(),t=i?document.getElementById(i):null),t?("clone"===e.type||t.closest(".fancybox__slide")?((i=(t=t.cloneNode(!0)).dataset.animationName)&&(t.classList.remove(i),delete t.dataset.animationName),i=(i=t.getAttribute("id"))?i+"--clone":`clone-${this.instance.id}-`+e.index,t.setAttribute("id",i)):t.parentNode&&((i=document.createElement("div")).classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i),this.instance.setContent(e,t)):this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(n){var{src:e,el:s}=n;if(e&&"string"==typeof e&&s){s.classList.add("is-loading");let t=this.instance,i=document.createElement("iframe");i.className="fancybox__iframe",i.setAttribute("id",`fancybox__iframe_${t.id}_`+n.index);for(var[o,a]of Object.entries(this.optionFor(n,"iframeAttr")||{}))i.setAttribute(o,a);i.onerror=()=>{t.setError(n,"{{IFRAME_ERROR}}")},n.iframeEl=i,s=this.optionFor(n,"preload"),"iframe"!==n.type||!1===s?(i.setAttribute("src",n.src+""),t.setContent(n,i,!1),this.resizeIframe(n),t.revealContent(n)):(t.showLoading(n),i.onload=()=>{var e;i.src.length&&(e="true"!==i.dataset.ready,i.dataset.ready="true",this.resizeIframe(n),e?t.revealContent(n):t.hideLoading(n))},i.setAttribute("src",e),t.setContent(n,i,!1))}}resizeIframe(n){var{type:s,iframeEl:o}=n;if(s!==P&&s!==C&&(s=null==o?void 0:o.parentElement,o)&&s){let e=n.autoSize,t=(void 0===e&&(e=this.optionFor(n,"autoSize")),n.width||0),i=n.height||0;t&&i&&(e=!1);var a=s&&s.style;if(!1!==n.preload&&!1!==e&&a)try{var r,l,h,c=window.getComputedStyle(s),d=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),u=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),p=o.contentWindow;p&&(l=(r=p.document).getElementsByTagName(Ie)[0],h=r.body,a.width="",h.style.overflow="hidden",t=t||l.scrollWidth+d,a.width=t+"px",h.style.overflow="",a.flex="0 0 auto",a.height=h.scrollHeight+"px",i=l.scrollHeight+u)}catch(n){}(t||i)&&(s={flex:"0 1 auto",width:"",height:""},t&&"auto"!==t&&(s.width=t+"px"),i&&"auto"!==i&&(s.height=i+"px"),Object.assign(a,s))}}playVideo(){let t=this.instance.getSlide();if(t){var e,i=t.el;if(i&&i.offsetParent&&this.optionFor(t,"videoAutoplay")){if(t.type===De)try{let t=i.querySelector("video");t&&void 0!==(e=t.play())&&e.then(()=>{}).catch(e=>{t.muted=!0,t.play()})}catch(t){}if(t.type===P||t.type===C){let e=()=>{if(t.iframeEl&&t.iframeEl.contentWindow){let e;if("true"===t.iframeEl.dataset.ready)return(e=t.type===P?{event:"command",func:"playVideo"}:{method:"play",value:"true"})&&t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"),void(t.poller=void 0);t.type===P&&(e={event:"listening",id:t.iframeEl.getAttribute("id")},t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"))}t.poller=setTimeout(e,250)};e()}}}}processType(i){if(i.html)i.type=Ie,i.src=i.html,i.html="";else{var n,s,o,a=this.instance.optionFor(i,"src","");if(a&&"string"==typeof a){let e=i.type,t=null;(t=a.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i))?(n=(o=this.optionFor(i,P)).nocookie,o=((e,t)=>{var i={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]]);return i})(o,["nocookie"]),n=`www.youtube${n?"-nocookie":""}.com`,o=Fe(a,o),s=encodeURIComponent(t[2]),i.videoId=s,i.src=`https://${n}/embed/${s}?`+o,i.thumbSrc=i.thumbSrc||`https://i.ytimg.com/vi/${s}/mqdefault.jpg`,e=P):(t=a.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/))&&(n=Fe(a,this.optionFor(i,C)),o=encodeURIComponent(t[1]),s=t[4]||"",i.videoId=o,i.src=`https://player.vimeo.com/video/${o}?`+(s?"h="+s+(n?"&":""):"")+n,e=C),(e=!e&&i.triggerEl&&(o=i.triggerEl.dataset.type,je.includes(o))?o:e)||"string"==typeof a&&("#"===a.charAt(0)?e="inline":(t=a.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(e=De,i.videoFormat=i.videoFormat||"video/"+("ogv"===t[1]?"ogg":t[1])):a.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?e="image":a.match(/\.(pdf)((\?|#).*)?$/i)&&(e="pdf")),(t=a.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(i.src=`https://maps.google.${t[1]}/?ll=${(t[2]?t[2]+"&z="+Math.floor(parseFloat(t[3]))+(t[4]?t[4].replace(/^\//,"&"):""):t[4]+"").replace(/\?/,"&")}&output=`+(t[4]&&0<t[4].indexOf("layer=c")?"svembed":"embed"),e="map"):(t=a.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(i.src=`https://maps.google.${t[1]}/maps?q=${t[2].replace("query=","q=").replace("api=1","")}&output=embed`,e="map"),e=e||this.instance.option("defaultType"),"image"===(i.type=e)&&(i.thumbSrc=i.thumbSrc||i.src)}}}setContent(e){var t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case Ie:this.instance.setContent(e,t);break;case De:var i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case"map":case P:case C:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(n){var s,o=n.contentEl;if(n.el&&o&&n.type&&[P,C,De].includes(n.type)){let e,t=n.width||"auto",i=n.height||"auto";"auto"===t||"auto"===i?(s=((e=this.optionFor(n,"videoRatio"))+"").match(/(\d+)\s*\/\s?(\d+)/),e=s&&2<s.length?parseFloat(s[1])/parseFloat(s[2]):parseFloat(e+"")):t&&i&&(e=t/i),e&&(o.style.aspectRatio="",o.style.width="",o.style.height="",s=(n=o.getBoundingClientRect()).width||1,n=n.height||1,o.style.aspectRatio=e+"",e<s/n?(i="auto"===i?n:Math.min(n,i),o.style.width="auto",o.style.height=i+"px"):(t="auto"===t?s:Math.min(s,t),o.style.width=t+"px",o.style.height="auto"))}}attach(){var e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){var e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(Be,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}}});let He="play",Ne="pause",_e="ready";class We extends t{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:_e}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==_e}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,null!=(e=this.instance.panzoom)&&e.isResting&&this.resume()}onTimerEnd(){var e=this.instance;"play"===this.state&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){if(!this.option("showProgress"))return null;this.removeProgressBar();var e=this.instance,t=(null==(t=e.pages[e.page])?void 0:t.slides)||[],i=this.option("progressParentEl");return(i=i||(1===t.length?t[0].el:null)||e.viewport)?(t=document.createElement("div"),w(t,"f-progress"),i.prepend(t),(this.progressBar=t).offsetHeight,t):null}set(){let e=this,t=e.instance,i,n;t.pages.length<2||e.timer||(i=e.option("timeout"),e.state=He,w(t.container,"has-autoplay"),(n=e.createProgressBar())&&(n.style.transitionDuration=i+"ms",n.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set"))}clear(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.removeProgressBar()}start(){var e,t=this;t.set(),t.state!==_e&&(t.option("pauseOnHover")&&((e=t.instance.container).addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start"))}stop(){var e=this,t=e.state,i=e.instance.container;e.clear(),e.state=_e,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),y(i,"has-autoplay"),t!==_e&&e.emit("stop")}pause(){this.state===He&&(this.state=Ne,this.clear(),this.emit(Ne))}resume(){var e=this,t=e.instance;t.isInfinite||t.page!==t.pages.length-1?e.state!==He&&(e.state!==Ne||e.inHover||(t=new Event("resume",{bubbles:!0,cancelable:!0}),e.emit("resume",t),t.defaultPrevented))||e.set():e.stop()}toggle(){this.state===He||this.state===Ne?this.stop():this.start()}attach(){var e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){var e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(We,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Xe extends t{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(n){var e=n.carousel;if(e){let i=n.container;i&&(e.options.Autoplay=u({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{n.emit("startSlideshow")},set:e=>{var t;i.classList.add("has-slideshow"),(null==(t=n.getSlide())?void 0:t.state)!==m.Ready&&e.pause()},stop:()=>{i.classList.remove("has-slideshow"),n.isCompact||n.endIdle(),n.emit("endSlideshow")},resume:(e,t)=>{var i;!t||!t.cancelable||(null==(i=n.getSlide())?void 0:i.state)===m.Ready&&null!=(i=null==(i=n.carousel)?void 0:i.panzoom)&&i.isResting||t.preventDefault()}}}),e.attachPlugins({Autoplay:We}),this.ref=e.plugins.Autoplay)}}onReady(e){var e=e.carousel,t=this.ref;t&&e&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&t.start()}onDone(e,t){let i=this.ref,n=e.carousel,s;i&&n&&((s=t.panzoom)&&s.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t))&&i.resume()}onKeydown(e,t){var i=this.ref;i&&t===this.option("key")&&"BUTTON"!==(null==(t=document.activeElement)?void 0:t.nodeName)&&i.toggle()}attach(){var e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){var e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(Xe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:e=>{var t;return(null==(t=e.instance.container)?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||e.instance.container},timeout:3e3}});var M,O,e={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"},i=M={Init:0,0:"Init",Ready:1,1:"Ready",Hidden:2,2:"Hidden"};let qe="isResting",Ye="thumbWidth",n="thumbHeight",A="thumbClipWidth",Ve=class extends t{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:M.Init})}get isModern(){return"modern"===this.type}onInitSlide(e,t){var i=t.el?t.el.dataset:void 0;i&&(t.thumbSrc=i.thumbSrc||t.thumbSrc||"",t[A]=parseFloat(i[A]||"")||t[A]||0,t[n]=parseFloat(i.thumbHeight||"")||t[n]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var e,t,i,n,s,o;this.isModern&&(e=this.container,t=(o=this.instance).panzoom,i=(s=this.carousel)?s.panzoom:null,n=o.page,t)&&s&&i&&(t.isDragging?(y(e,this.cn(qe)),s=(null==(s=s.pages[n])?void 0:s.pos)||0,-1*(s+=o.getProgress(n)*(this[A]+this.thumbGap))>(o=i.getBounds()).x.min&&-1*s<o.x.max&&i.panTo({x:-1*s,friction:.12})):f(e,this.cn(qe),t.isResting),this.shiftModern())}onRefresh(){this.updateProps();for(var e of this.instance.slides||[])this.resizeModernSlide(e);this.shiftModern()}isDisabled(){var i=this.option("minCount")||0;if(i){let e=this.instance,t=0;for(var n of e.slides||[])n.thumbSrc&&t++;if(t<i)return!0}return i=this.option("type"),["modern","classic"].indexOf(i)<0}getThumb(e){var t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(e){var t=this.carousel;t&&t.addSlide(e.index,this.getThumb(e))}getSlides(){var e,t=[];for(e of this.instance.slides||[])t.push(this.getThumb(e));return t}resizeModernSlide(e){this.isModern&&(e[Ye]=e[A]&&e[n]?Math.round(this[n]*(e[A]/e[n])):this[Ye])}updateProps(){let t=this.container,e;t&&(this.thumbGap=(e=e=>parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-"+e))||0)("gap"),this.thumbExtraGap=e("extra-gap"),this[Ye]=e("width")||40,this[A]=e("clip-width")||40,this[n]=e("height")||40)}build(){let n=this;if(n.state===M.Init)if(n.isDisabled())n.emit("disabled");else{var i=n.instance,s=i.container,o=n.getSlides(),a=n.option("type"),r=(n.type=a,n.option("parentEl")),l=n.cn("container"),h=n.cn("track");let e=null==r?void 0:r.querySelector("."+l),t=(e||(e=document.createElement("div"),w(e,l),r?r.appendChild(e):s.after(e)),w(e,"is-"+a),w(s,n.cn("hasThumbs")),n.container=e,n.updateProps(),e.querySelector("."+h));t||(t=document.createElement("div"),w(t,n.cn("track")),e.appendChild(t)),n.track=t,l=u({},{track:t,infinite:!1,center:!0,fill:"classic"===a,dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},n.option("Carousel")||{},{Sync:{target:i},slides:o}),(r=new i.constructor(e,l)).on("createSlide",(e,t)=>{n.setProps(t.index),n.emit("createSlide",t,t.el)}),r.on("ready",()=>{n.shiftModern(),n.emit("ready")}),r.on("refresh",()=>{n.shiftModern()}),r.on("Panzoom.click",(e,t,i)=>{n.onClick(i)}),n.carousel=r,n.state=M.Ready}}onClick(e){e.preventDefault(),e.stopPropagation();let t=this.instance,{pages:i,page:n}=t,s=e=>(e=e&&e.closest("[data-carousel-index]"))?[parseInt(e.dataset.carouselIndex||"",10)||0,e]:[-1,void 0],o=(e,t)=>(e=document.elementFromPoint(e,t))?s(e):[-1,void 0],[a,,]=s(e.target),r,l,h,c;-1<a||(c=this[A],[l,h]=o((r=e.clientX)-c,e=e.clientY),[c,e]=o(r+c,e),h&&e?(a=Math.abs(r-h.getBoundingClientRect().right)<Math.abs(r-e.getBoundingClientRect().left)?l:c)===n&&(a=a===l?c:l):h?a=l:e&&(a=c),-1<a&&i[a]&&t.slideTo(a))}getShift(e){var t=(a=this).instance,i=a.carousel;if(!t||!i)return 0;var n=a[Ye],s=a[A],o=a.thumbGap,a=a.thumbExtraGap;if(null==(i=i.slides[e])||!i.el)return 0;i=.5*(n-s),n=t.pages.length-1;let r=t.getProgress(0),l=t.getProgress(n),h=t.getProgress(e,!1,!0),c=0,d=i+a+o;return s=r<0&&-1<r,t=0<l&&l<1,0===e?(c=d*Math.abs(r),t&&1===r&&(c-=d*Math.abs(l))):e===n?(c=d*Math.abs(l)*-1,s&&-1===l&&(c+=d*Math.abs(r))):c=s||t?(c=-1*d,(c+=d*Math.abs(r))+d*(1-Math.abs(l))):d*h,c}setProps(e){var t,i;this.isModern&&(i=this.instance,t=this.carousel,i)&&(t=t&&(null==(t=t.slides[e])?void 0:t.el))&&t.childNodes.length&&(i=T(1-Math.abs(i.getProgress(e))),e=T(this.getShift(e)),t.style.setProperty("--progress",i?i+"":""),t.style.setProperty("--shift",e+""))}shiftModern(){var e=this;if(e.isModern){var{instance:t,track:i}=e,n=t.panzoom,s=e.carousel;if(t&&i&&n&&s&&n.state!==b.Init&&n.state!==b.Destroy){for(var o of t.slides)e.setProps(o.index);n=(e[A]+e.thumbGap)*(s.slides.length||0),i.style.setProperty("--width",n+"")}}}cleanup(){var e=this;e.carousel&&e.carousel.destroy(),e.carousel=null,e.container&&e.container.remove(),e.container=null,e.track&&e.track.remove(),e.track=null,e.state=M.Init,y(e.instance.container,e.cn("hasThumbs"))}attach(){var e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===p.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on(["change","Panzoom.afterTransform"],e.onChange),t.on("Panzoom.refresh",e.onRefresh)}detach(){var e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off(["change","Panzoom.afterTransform"],e.onChange),t.off("Panzoom.refresh",e.onRefresh),e.cleanup()}},Ze=(Object.defineProperty(Ve,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.assign(Object.assign({},e),{key:"t",showOnStart:!0,parentEl:null})),Ue="is-masked",$e="aria-hidden";class Ge extends t{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){var e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i=(null==(i=null==(i=null==(i=this.instance)?void 0:i.carousel)?void 0:i.slides[t.index])?void 0:i.type)||"";if((t=t.el)&&i){let e="for-"+i;["video","youtube","vimeo","html5video"].includes(i)&&(e+=" for-video"),w(t,e)}}onInit(){let e,i=this,t=i.instance,n=t.carousel;var s;!i.ref&&n&&(s=i.option("parentEl")||t.footer||t.container)&&((s=u({},i.options,{parentEl:s,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:t.option("Carousel.friction")||0}},on:{ready:e=>{let t=e.container;t&&this.hidden&&(i.refresh(),t.style.transition="none",i.hide(),t.offsetHeight,queueMicrotask(()=>{t.style.transition="",i.show()}))}}})).Carousel=s.Carousel||{},s.Carousel.on=u((null==(e=i.options.Carousel)?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=s,n.attachPlugins({Thumbs:Ve}),i.ref=n.plugins.Thumbs,i.option("showOnStart")||(i.ref.state=M.Hidden,i.hidden=!0))}onResize(){var e=null==(e=this.ref)?void 0:e.container;e&&(e.style.maxHeight="")}onKeydown(e,t){var i=this.option("key");i&&i===t&&this.toggle()}toggle(){var e=this.ref;if(e&&!e.isDisabled())return e.state===M.Hidden?(e.state=M.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){var e=this.ref;e&&!e.isDisabled()&&(e=e.container)&&(this.refresh(),e.offsetHeight,e.removeAttribute($e),e.classList.remove(Ue),this.hidden=!1)}hide(){var e=this.ref;(e=e&&e.container)&&(this.refresh(),e.offsetHeight,e.classList.add(Ue),e.setAttribute($e,"true")),this.hidden=!0}refresh(){var e,t=this.ref;t&&t.state&&(e=(null==(t=t.container)?void 0:t.firstChild)||null,t)&&e&&e.childNodes.length&&(t.style.maxHeight=e.getBoundingClientRect().height+"px")}attach(){var e=this,t=e.instance;t.state===g.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e=this,t=e.instance;t.off("Carousel.init",e.onInit),t.off("resize",e.onResize),t.off("keydown",e.onKeydown),null!=(t=t.carousel)&&t.detachPlugins(["Thumbs"]),e.ref=null}}Object.defineProperty(Ge,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ze});let Ke={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}},Je=((i=O={})[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Disabled=2]="Disabled",{tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}),Qe="has-toolbar",et="fancybox__toolbar";class tt extends t{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:O.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var o;if(e.carousel){let e=this.option("display"),t=this.option("absolute"),i=this.option("enabled");if("auto"===i){let e=this.instance.carousel,t=0;if(e)for(var a of e.slides)!a.panzoom&&"image"!==a.type||t++;t||(i=!1)}let n=0,s={left:[],middle:[],right:[]};if(e=i?e:void 0)for(var r of["left","middle","right"])for(var l of e[r])(l=this.createEl(l))&&(null!=(o=s[r])&&o.push(l),n++);var h=null;if(h=n?this.createContainer():null){for(var[c,d]of Object.entries(s)){var u,p=document.createElement("div");w(p,et+"__column is-"+c);for(u of d)p.appendChild(u);"auto"!==t||"middle"!==c||d.length||(t=!0),h.appendChild(p)}!0===t&&w(h,"is-absolute"),this.state=O.Ready,this.onRefresh()}else this.state=O.Disabled}}onClick(t){var i=null==(i=(s=this.instance).getSlide())?void 0:i.panzoom,e=t.target;if(e=e&&c(e)?e.dataset:null)if(void 0!==e.fancyboxToggleThumbs)t.preventDefault(),t.stopPropagation(),null!=(o=s.plugins.Thumbs)&&o.toggle();else if(void 0!==e.fancyboxToggleFullscreen)t.preventDefault(),t.stopPropagation(),this.instance.toggleFullscreen();else if(void 0!==e.fancyboxToggleSlideshow){t.preventDefault(),t.stopPropagation();var n=null==(s=s.carousel)?void 0:s.plugins.Autoplay,s=n.isActive;i&&"mousemove"===i.panMode&&!s&&i.reset(),s?n.stop():n.start()}else{var s,o=e.panzoomAction;if(((s=e.panzoomChange)||o)&&(t.preventDefault(),t.stopPropagation()),s){let e={};try{e=JSON.parse(s)}catch(t){}i&&i.applyChange(e)}else o&&i&&i[o]&&i[o]()}}onChange(){this.onRefresh()}onRefresh(){if(!this.instance.isClosing()){var e=this.container;if(e){var t=this.instance.getSlide();if(t&&t.state===m.Ready){var i,n=t&&!t.error&&t.panzoom;for(i of e.querySelectorAll("[data-panzoom-action]"))n?(i.removeAttribute("disabled"),i.removeAttribute("tabindex")):(i.setAttribute("disabled",""),i.setAttribute("tabindex","-1"));var s,o,a,r=n&&n.canZoomIn(),l=n&&n.canZoomOut();for(s of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))r?(s.removeAttribute("disabled"),s.removeAttribute("tabindex")):(s.setAttribute("disabled",""),s.setAttribute("tabindex","-1"));for(o of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))l?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(a of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){l||r?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));var h=a.querySelector("g");h&&(h.style.display=r?"":"none")}}}}}onDone(e,t){var i;null!=(i=t.panzoom)&&i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){var e=this.instance.container;if(!e)return null;let t=this.option("parentEl")||e,i=t.querySelector("."+et);return i||(i=document.createElement("div"),w(i,et),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&w(e,Qe),this.container=i}createEl(e){var t,i=this.instance,n=i.carousel;if(!n)return null;if("toggleFS"===e)return null;if("fullscreen"===e&&!xe())return null;let s=null,o=n.slides.length||0,a=0,r=0;for(t of n.slides)!t.panzoom&&"image"!==t.type||a++,"image"!==t.type&&!t.downloadSrc||r++;if(!(o<2&&["infobar","prev","next"].includes(e))){if(void 0!==Ke[e]&&!a)return null;if("download"===e&&!r)return null;if(!("thumbs"!==e||(i=i.plugins.Thumbs)&&i.isEnabled))return null;if("slideshow"===e&&(!n.plugins.Autoplay||o<2))return null;if(void 0!==Ke[e])i=Ke[e],(s=document.createElement("button")).setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),w(s,"f-button"),i.action&&(s.dataset.panzoomAction=i.action),i.change&&(s.dataset.panzoomChange=JSON.stringify(i.change)),s.appendChild(d(this.instance.localize(i.icon)));else{let t=(this.option("items")||[])[e];t&&(s=d(this.instance.localize(t.tpl)),"function"==typeof t.click)&&s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),"function"==typeof t.click&&t.click.call(this,this,e)})}var l=null==s?void 0:s.querySelector("svg");if(l)for(var[h,c]of Object.entries(Je))l.getAttribute(h)||l.setAttribute(h,String(c))}return s}removeContainer(){var e=this.container;e&&e.remove(),this.container=null,this.state=O.Disabled,(e=this.instance.container)&&y(e,Qe)}attach(){var e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){var e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}function it(){var e=window.getSelection();return e&&"Range"===e.type}Object.defineProperty(tt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null}});let nt={Hash:class extends t{onReady(){Pe=!1}onChange(e){a&&clearTimeout(a);let t=Te().hash,i=Me().hash,n=e.isOpeningSlide(e.getSlide());n&&(Se=i===t?"":i),t&&t!==i&&(a=setTimeout(()=>{try{if(e.state===g.Ready){let e="replaceState";n&&!Ce&&(e="pushState",Ce=!0),window.history[e]({},document.title,window.location.pathname+window.location.search+t)}}catch(e){}},300))}onClose(e){if(a&&clearTimeout(a),!Pe&&Ce)Ce=!1,Pe=!1,window.history.back();else if(!Pe)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Se||""))}catch(e){}}attach(){var e=this.instance;e.on("ready",this.onReady),e.on(["Carousel.ready","Carousel.change"],this.onChange),e.on("close",this.onClose)}detach(){var e=this.instance;e.off("ready",this.onReady),e.off(["Carousel.ready","Carousel.change"],this.onChange),e.off("close",this.onClose)}static parseURL(){return Me()}static startFromUrl(){Oe()}static destroy(){window.removeEventListener("hashchange",Le,!1)}},Html:Be,Images:ke,Slideshow:Xe,Thumbs:Ge,Toolbar:tt},st="with-fancybox",ot="hide-scrollbar",at="--fancybox-scrollbar-compensate",rt="--fancybox-body-margin",lt="aria-hidden",ht="is-using-tab",ct="is-animated",dt="is-compact",ut="is-loading",pt="is-opening",gt="has-caption",h="disabled",L="tabindex",mt="download",ft="href",z=e=>"string"==typeof e,l,R=null,k=null,vt=0,bt=0,yt=0,wt=0,I=new Map,xt=0;class D extends V{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:g.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),l=l||xe(),this.id=t.id||++xt,I.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state!==g.Destroy){if(this.state=g.Init,this.attachPlugins(Object.assign(Object.assign({},D.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),!0===this.option("hideScrollbar")&&ve){var i=(n=document).body,n=n.documentElement;if(!i.classList.contains(ot)){let e=window.innerWidth-n.getBoundingClientRect().width,t=parseFloat(window.getComputedStyle(i).marginRight);e<0&&(e=0),n.style.setProperty(at,e+"px"),t&&i.style.setProperty(rt,t+"px"),i.classList.add(ot)}}this.initLayout(),this.scale();let e=()=>{this.initCarousel(this.userSlides),this.state=g.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(lt,"false")},16)};this.option("Fullscreen.autoStart")&&l&&!l.isFullscreen()?l.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}}initLayout(){var e;let t=this.option("parentEl")||document.body,i=d(this.localize(this.option("tpl.main")||""));if(i){if(i.setAttribute("id","fancybox-"+this.id),i.setAttribute("aria-label",this.localize("{{MODAL}}")),i.classList.toggle(dt,this.isCompact),w(i,this.option("mainClass")||""),w(i,pt),this.container=i,this.footer=i.querySelector(".fancybox__footer"),t.appendChild(i),w(document.documentElement,st),R&&k||(R=document.createElement("span"),w(R,"fancybox-focus-guard"),R.setAttribute(L,"0"),R.setAttribute(lt,"true"),R.setAttribute("aria-label","Focus guard"),k=R.cloneNode(),null!=(e=i.parentElement)&&e.insertBefore(R,i),null==(e=i.parentElement))||e.append(k),i.addEventListener("mousedown",e=>{vt=e.pageX,bt=e.pageY,y(i,ht)}),this.option("closeExisting"))for(var n of I.values())n.id!==this.id&&n.close();else this.option("animated")&&(w(i,ct),setTimeout(()=>{this.isClosing()||y(i,ct)},350));this.emit("initLayout")}}initCarousel(e){var t=this.container;(t=t&&t.querySelector(".fancybox__carousel"))&&((t=this.carousel=new r(t,u({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}))).on("*",(e,t,...i)=>{this.emit("Carousel."+t,e,...i)}),t.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(e,t,i)=>{this.clearContent(i),i.state=void 0}),t.on("Panzoom.touchStart",()=>{var e;this.isCompact||this.endIdle(),null!=(e=document.activeElement)&&e.closest(".f-thumbs")&&null!=(e=this.container)&&e.focus()}),t.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(t.on("Panzoom.afterTransform",(e,t)=>{var i,n=this.getSlide();n&&B(n.el)||(n=this.container)&&(i=(i=Math.abs(t.current.f))<1?"":Math.max(.5,Math.min(1,1-i/t.contentRect.fitHeight*1.5)),n.style.setProperty("--fancybox-ts",i?"0s":""),n.style.setProperty("--fancybox-opacity",i+""))}),t.on("Panzoom.touchEnd",(e,t,i)=>{var n=this.getSlide();n&&B(n.el)||t.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null==(n=document.activeElement)?void 0:n.nodeName)||(n=Math.abs(t.dragOffset.y),"y"===t.lockedAxis&&(200<=n||50<=n&&t.dragOffset.time<300)&&(i&&i.cancelable&&i.preventDefault(),this.close(i,"f-throwOut"+(t.current.f<0?"Up":"Down"))))})),t.on("change",e=>{var t=null==(t=this.getSlide())?void 0:t.triggerEl;t&&(e=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:e.page}),t.dispatchEvent(e))}),t.on(["refresh","change"],e=>{var t=this.container;if(t){for(var i of t.querySelectorAll("[data-fancybox-current-index]"))i.innerHTML=e.page+1;for(var n of t.querySelectorAll("[data-fancybox-count]"))n.innerHTML=e.pages.length;if(!e.isInfinite){for(var s of t.querySelectorAll("[data-fancybox-next]"))e.page<e.pages.length-1?(s.removeAttribute(h),s.removeAttribute(L)):(s.setAttribute(h,""),s.setAttribute(L,"-1"));for(var o of t.querySelectorAll("[data-fancybox-prev]"))0<e.page?(o.removeAttribute(h),o.removeAttribute(L)):(o.setAttribute(h,""),o.setAttribute(L,"-1"))}var a=this.getSlide();if(a){let e=a.downloadSrc||"";e||"image"!==a.type||a.error||!z(a.src)||(e=a.src);for(var r of t.querySelectorAll("[data-fancybox-download]")){var l=a.downloadFilename;e?(r.removeAttribute(h),r.removeAttribute(L),r.setAttribute(ft,e),r.setAttribute(mt,l||e),r.setAttribute("target","_blank")):(r.setAttribute(h,""),r.setAttribute(L,"-1"),r.removeAttribute(ft),r.removeAttribute(mt))}}}}),this.emit("initCarousel"))}attachEvents(){var e=this,t=e.container;t&&(t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize),t=window.visualViewport)&&(t.addEventListener("scroll",e.onResize),t.addEventListener("resize",e.onResize))}detachEvents(){var e=this,t=e.container;t&&(document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize),(t=window.visualViewport)&&(t.removeEventListener("resize",e.onResize),t.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0))}scale(){var r=this.container;if(r){let e,t,i=window.visualViewport,n=Math.max(1,(null==i?void 0:i.scale)||1),s="",o="",a="";i&&1<n&&(e=i.offsetLeft+"px",t=i.offsetTop+"px",s=i.width*n+"px",o=i.height*n+"px",a=`translate3d(${e}, ${t}, 0) scale(${1/n})`),r.style.transform=a,r.style.width=s,r.style.height=o}}onClick(t){var{container:e,isCompact:i}=this;if(e&&!this.isClosing()){!i&&this.option("idle")&&this.resetIdle();var n=t.composedPath()[0];if(n.closest(".fancybox-spinner")||n.closest("[data-fancybox-close]"))t.preventDefault(),this.close(t);else if(n.closest("[data-fancybox-prev]"))t.preventDefault(),this.prev();else if(n.closest("[data-fancybox-next]"))t.preventDefault(),this.next();else if(("click"!==t.type||0!==t.detail)&&!(30<Math.abs(t.pageX-vt)||30<Math.abs(t.pageY-bt))){var s=document.activeElement;if(!(it()&&s&&e.contains(s)))if(i&&"image"===(null==(e=this.getSlide())?void 0:e.type))this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350);else if(this.emit("click",t),!t.defaultPrevented){let e=!1;if(n.closest(".fancybox__content")){if(s){if(s.closest("[contenteditable]"))return;n.matches(ye)||s.blur()}if(it())return;e=this.option("contentClick")}else n.closest(".fancybox__carousel")&&!n.matches(ye)&&(e=this.option("backdropClick"));"close"===e?(t.preventDefault(),this.close(t)):"next"===e?(t.preventDefault(),this.next()):"prev"===e&&(t.preventDefault(),this.prev())}}}}onWheel(e){var t=e.target,i=this.option("wheel",e),n="slide"===(i=t.closest(".fancybox__thumbs")?"slide":i),s=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),s=Math.max(-1,Math.min(1,s)),o=Date.now();this.pwt&&o-this.pwt<300?n&&e.preventDefault():(this.pwt=o,this.emit("wheel",e,s),e.defaultPrevented||("close"===i?(e.preventDefault(),this.close(e)):"slide"!==i||j(t)||(e.preventDefault(),this[0<s?"prev":"next"]())))}onScroll(){window.scrollTo(yt,wt)}onKeydown(e){var t,i,n,s;this.isTopmost()&&(this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle(),t=e.key,i=this.option("keyboard"))&&(n=e.composedPath()[0],s=(s=document.activeElement&&document.activeElement.classList)&&s.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex,"Escape"!==t&&!s&&c(n)&&(n.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName))||(("Tab"===e.key?w:y)(this.container,ht),e.ctrlKey)||e.altKey||e.shiftKey||(this.emit("keydown",t,e),(s=i[t])&&"function"==typeof this[s]&&(e.preventDefault(),this[s]())))}onResize(){var e,t=this.container;t&&(e=this.isCompact,t.classList.toggle(dt,e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize"))}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}manageCloseBtn(e){var t=this.optionFor(e,"closeButton")||!1;if("auto"===t){var i=this.plugins.Toolbar;if(i&&i.state===O.Ready)return}t&&e.contentEl&&!e.closeBtnEl&&(i=this.option("tpl.closeButton"))&&(t=d(this.localize(i)),e.closeBtnEl=e.contentEl.appendChild(t),e.el)&&w(e.el,"has-close-btn")}manageCaption(t=void 0){var i="fancybox__caption",n=this.container;if(n){y(n,gt);var e=this.isCompact||this.option("commonCaption"),s=!e;if(this.caption&&this.stop(this.caption),s&&this.caption&&(this.caption.remove(),this.caption=null),e&&!this.caption)for(var o of(null==(r=this.carousel)?void 0:r.slides)||[])o.captionEl&&(o.captionEl.remove(),o.captionEl=void 0,y(o.el,gt),null!=(o=o.el))&&o.removeAttribute("aria-labelledby");if((t=t||this.getSlide())&&(!e||this.isCurrentSlide(t))){var a=t.el,r=this.optionFor(t,"caption","");if(r){let e=null;s?(e=t.captionEl||null,a&&!e&&(s=i+`_${this.id}_`+t.index,e=document.createElement("div"),w(e,i),e.setAttribute("id",s),t.captionEl=a.appendChild(e),w(a,gt),a.setAttribute("aria-labelledby",s))):((e=(e=this.caption)||n.querySelector("."+i))||((e=document.createElement("div")).dataset.fancyboxCaption="",w(e,i),(this.footer||n).prepend(e)),w(n,gt),this.caption=e),e&&(e.innerHTML="",z(r)||"number"==typeof r?e.innerHTML=r+"":r instanceof HTMLElement&&e.appendChild(r))}else e&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")})}}}checkFocus(e){this.focus(e)}focus(n){if(!this.ignoreFocusChange){var s=document.activeElement||null,o=(null==n?void 0:n.target)||null,a=this.container,r=null==(h=this.carousel)?void 0:h.viewport;if(a&&r&&(n||!s||!a.contains(s))){var l,h=this.getSlide(),c=h&&h.state===m.Ready?h.el:null;if(c&&!c.contains(s)&&a!==s){n&&n.cancelable&&n.preventDefault(),this.ignoreFocusChange=!0;let e=[],t=null;for(l of Array.from(a.querySelectorAll(ye))){var d=!l.offsetParent||!!l.closest('[aria-hidden="true"]'),u=c&&c.contains(l),p=!r.contains(l);l===a||(u||p)&&!d?(e.push(l),void 0!==(u=l.dataset.origTabindex)&&u&&(l.tabIndex=parseFloat(u)),l.removeAttribute("data-orig-tabindex"),!l.hasAttribute("autoFocus")&&t||(t=l)):((p=void 0===l.dataset.origTabindex?l.getAttribute("tabindex")||"":l.dataset.origTabindex)&&(l.dataset.origTabindex=p),l.tabIndex=-1)}let i=null;n?(!o||e.indexOf(o)<0)&&(i=t||a,e.length)&&(s===k?i=e[0]:this.lastFocus!==a&&s!==R||(i=e[e.length-1])):i=(!h||"image"!==h.type)&&t||a,i&&we(i),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}}}}next(){var e=this.carousel;e&&1<e.pages.length&&e.slideNext()}prev(){var e=this.carousel;e&&1<e.pages.length&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return(null==(e=D.getInstance())?void 0:e.id)==this.id}animate(i=null,n="",s){if(i&&n){this.stop(i);let t=e=>{e.target===i&&i.dataset.animationName&&(i.removeEventListener("animationend",t),delete i.dataset.animationName,s&&s(),y(i,n))};i.dataset.animationName=n,i.addEventListener("animationend",t),w(i,n)}else s&&s()}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(t,i="",n=!0){if(!this.isClosing()){var s=t.el;if(s){let e=null;c(i)?e=i:(e=d(i+""),c(e)||((e=document.createElement("div")).innerHTML=i+"")),["img","picture","iframe","video","audio"].includes(e.nodeName.toLowerCase())&&((i=document.createElement("div")).appendChild(e),e=i),(e=c(e)&&t.filter&&!t.error?e.querySelector(t.filter):e)&&c(e)?(w(e,"fancybox__content"),t.id&&e.setAttribute("id",t.id),s.classList.add("has-"+(t.error?"error":t.type||"unknown")),s.prepend(e),"none"===e.style.display&&(e.style.display=""),"none"===getComputedStyle(e).getPropertyValue("display")&&(e.style.display=t.display||this.option("defaultDisplay")||"flex"),t.contentEl=e,n&&this.revealContent(t),this.manageCloseBtn(t),this.manageCaption(t)):this.setError(t,"{{ELEMENT_NOT_FOUND}}")}}}revealContent(e,t){var i=e.el,n=e.contentEl;i&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=m.Opening,(t=this.isOpeningSlide(e)?void 0===t?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,()=>{this.done(e)}):this.done(e))}done(t){this.isClosing()||(t.state=m.Ready,this.emit("done",t),w(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask(()=>{var e;null!=(e=t.panzoom)&&e.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(t)&&(y(this.container,pt),!this.isCompact)&&this.option("idle")&&this.setIdle())}isCurrentSlide(e){var t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t;return null===(null==(t=this.carousel)?void 0:t.prevPage)&&e&&e.index===(null==(t=this.getSlide())?void 0:t.index)}showLoading(t){t.state=m.Loading;let i=t.el;i&&(w(i,ut),this.emit("loading",t),t.spinnerEl||setTimeout(()=>{var e;this.isClosing()||t.spinnerEl||t.state!==m.Loading||(e=d(G),w(e,"fancybox-spinner"),t.spinnerEl=e,i.prepend(e),this.animate(e,"f-fadeIn"))},250))}hideLoading(t){var i=t.el;if(i){let e=t.spinnerEl;this.isClosing()?null!=e&&e.remove():(y(i,ut),e&&this.animate(e,"f-fadeOut",()=>{e.remove()}),t.state===m.Loading&&(this.emit("loaded",t),t.state=m.Ready))}}setError(e,t){var i;this.isClosing()||(i=new Event("error",{bubbles:!0,cancelable:!0}),this.emit("error",i,e),i.defaultPrevented)||(e.error=t,this.hideLoading(e),this.clearContent(e),(i=document.createElement("div")).classList.add("fancybox-error"),i.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,i))}clearContent(e){var t;void 0!==e.state&&(this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0),(t=e.el)&&(y(t,"has-error"),y(t,"has-unknown"),y(t,"has-"+(e.type||"unknown"))),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0)}getSlide(){var e=this.carousel;return(null==(e=null==e?void 0:e.pages[null==e?void 0:e.page])?void 0:e.slides[0])||void 0}close(t,i){if(!this.isClosing()){var e=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",e,t),!e.defaultPrevented){t&&t.cancelable&&(t.preventDefault(),t.stopPropagation());let e=()=>{this.proceedClose(t,i)};this.startedFs&&l&&l.isFullscreen()?Promise.resolve(l.exit()).then(()=>e()):e()}}}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){var t=()=>{this.clearIdle(),this.idle=!0,w(this.container,"is-idle"),this.emit("setIdle")};this.clearIdle(),this.isClosing()||(e?t():(e=this.option("idle"))&&(this.idleTimer=setTimeout(t,e)))}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,y(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){l&&(l.isFullscreen()?l.exit():l.request().then(()=>{this.startedFs=!0}))}isClosing(){return[g.Closing,g.CustomClosing,g.Destroy].includes(this.state)}proceedClose(e,t){var i;this.state=g.Closing,this.clearIdle(),this.detachEvents();let n=this.container,s=this.carousel,o=this.getSlide(),a=o&&this.option("placeFocusBack")?o.triggerEl||this.option("triggerEl"):null;if(a&&(fe(a)?we(a):a.focus()),n&&(y(n,pt),w(n,"is-closing"),n.setAttribute(lt,"true"),this.option("animated")&&w(n,ct),n.style.pointerEvents="none"),s){s.clearTransitions(),null!=(i=s.panzoom)&&i.destroy(),null!=(i=s.plugins.Navigation)&&i.detach();for(var r of s.slides){r.state=m.Closing,this.hideLoading(r);var l=r.contentEl;l&&this.stop(l),(l=null==r?void 0:r.panzoom)&&(l.stop(),l.detachEvents(),l.detachObserver()),this.isCurrentSlide(r)||s.emit("removeSlide",r)}}yt=window.scrollX,wt=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==g.CustomClosing?(t=void 0===t&&o?this.optionFor(o,"hideClass"):t)&&o?(this.animate(o.contentEl,t,()=>{s&&s.emit("removeSlide",o)}),setTimeout(()=>{this.destroy()},500)):this.destroy():setTimeout(()=>{this.destroy()},500)}destroy(){var e,t;this.state!==g.Destroy&&(window.removeEventListener("scroll",this.onScroll),this.state=g.Destroy,null!=(e=this.carousel)&&e.destroy(),(e=this.container)&&e.remove(),I.delete(this.id),(e=D.getInstance())?e.focus():(R&&(R.remove(),R=null),k&&(k.remove(),k=null),y(document.documentElement,st),ve&&((t=(e=document).body).classList.remove(ot),t.style.setProperty(rt,""),e.documentElement.style.setProperty(at,"")),this.emit("destroy")))}static bind(n,s,o){if(ve){let e,t="",i={};void 0===n?e=document.body:z(n)?(e=document.body,t=n,"object"==typeof s&&(i=s||{})):(e=n,z(s)&&(t=s),"object"==typeof o&&(i=o||{})),e&&c(e)&&(t=t||"[data-fancybox]",(n=D.openers.get(e)||new Map).set(t,i),D.openers.set(e,n),1===n.size)&&e.addEventListener("click",D.fromEvent)}}static unbind(e,t){let i,n="";z(e)?(i=document.body,n=e):(i=e,z(t)&&(n=t)),i&&((e=D.openers.get(i))&&n&&e.delete(n),n&&e||(D.openers.delete(i),i.removeEventListener("click",D.fromEvent)))}static destroy(){for(var e,t;e=D.getInstance();)e.destroy();for(t of D.openers.keys())t.removeEventListener("click",D.fromEvent);D.openers=new Map}static fromEvent(d){if(!d.defaultPrevented&&!(d.button&&0!==d.button||d.ctrlKey||d.metaKey||d.shiftKey)){let h=d.composedPath()[0],c=h.closest("[data-fancybox-trigger]"),e,t;if(c&&(e=c.dataset.fancyboxTrigger||"",e=document.querySelectorAll(`[data-fancybox="${e}"]`),t=parseInt(c.dataset.fancyboxIndex||"",10)||0,h=e[t]||h),h&&h instanceof Element){let o,a,r,l;if([...D.openers].reverse().find(([n,e])=>!(!n.contains(h)||![...e].reverse().find(([e,t])=>{var i=h.closest(e);return!!i&&(o=n,a=e,r=i,l=t,!0)}))),o&&a&&r){l=l||{},d.preventDefault(),h=r;let e=[],t=u({},Ee,l),i=(t.event=d,t.triggerEl=h,t.delegate=c,t.groupAll),n=t.groupAttr,s=n&&h?h.getAttribute(""+n):"";return h&&!s&&!i||(e=[].slice.call(o.querySelectorAll(a))),!(e=h&&!i?s?e.filter(e=>e.getAttribute(""+n)===s):[h]:e).length||(d=D.getInstance())&&d.options.triggerEl&&-1<e.indexOf(d.options.triggerEl)?void 0:(h&&(t.startIndex=e.indexOf(h)),D.fromNodes(e,t))}}}}static fromSelector(e,t,i){let n=null,s="",o={};return z(e)?(n=document.body,s=e,"object"==typeof t&&(o=t||{})):e instanceof HTMLElement&&z(t)&&(n=e,s=t,"object"==typeof i)&&(o=i||{}),!!(n&&s&&(e=D.openers.get(n))&&(o=u({},e.get(s)||{},o)))&&D.fromNodes(Array.from(n.querySelectorAll(s)),o)}static fromNodes(e,t){t=u({},Ee,t||{});var i,n=[];for(i of e){var s=i.dataset||{},o=s.src||i.getAttribute(ft)||i.getAttribute("currentSrc")||i.getAttribute("src")||void 0,a=t.delegate;let e;(a=(a&&n.length===t.startIndex?a instanceof HTMLImageElement?a:a.querySelector("img:not([aria-hidden])"):void 0)||(i instanceof HTMLImageElement?i:i.querySelector("img:not([aria-hidden])")))&&!(e=a.currentSrc||a.src||void 0)&&a.dataset&&(e=a.dataset.lazySrc||a.dataset.src||void 0);var r,l={src:o,triggerEl:i,thumbEl:a,thumbElSrc:e,thumbSrc:e};for(r in s){var h="false"!=(h=s[r]+"")&&("true"==h||h);l[r]=h}n.push(l)}return new D(n,t)}static getInstance(e){return e?I.get(e):Array.from(I.values()).reverse().find(e=>!e.isClosing()&&e)||null}static getSlide(){var e;return(null==(e=D.getInstance())?void 0:e.getSlide())||null}static show(e=[],t={}){return new D(e,t)}static next(){var e=D.getInstance();e&&e.next()}static prev(){var e=D.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(var i of I.values())i.close(...t);else(e=D.getInstance())&&e.close(...t)}}Object.defineProperty(D,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(D,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ee}),Object.defineProperty(D,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:nt}),Object.defineProperty(D,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),F.Carousel=r,F.Fancybox=D,F.Panzoom=S});