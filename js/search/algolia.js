window.addEventListener("load",()=>{let t=document.getElementById("search-mask"),a=document.querySelector("#algolia-search .search-dialog"),e=()=>{var e=document.body.style;e.width="100%",e.overflow="hidden",btf.animateIn(t,"to_show 0.5s"),btf.animateIn(a,"titleScale 0.5s"),setTimeout(()=>{document.querySelector("#algolia-search .ais-SearchBox-input").focus()},100),document.addEventListener("keydown",function e(t){"Escape"===t.code&&(i(),document.removeEventListener("keydown",e))}),n(),window.addEventListener("resize",n)},i=()=>{var e=document.body.style;e.width="",e.overflow="",btf.animateOut(a,"search_close .5s"),btf.animateOut(t,"to_hide 0.5s"),window.removeEventListener("resize",n)},n=()=>{window.innerWidth<768&&a.style.setProperty("--search-height",window.innerHeight+"px")},s=()=>{btf.addEventListenerPjax(document.querySelector("#search-button > .search"),"click",e)},l=e=>{if(""===e)return"";let t=e.indexOf("<mark>"),a=t-30,i=t+120,n="",s="";return a<=0?(a=0,i=140):n="...",i>e.length?i=e.length:s="...",n+e.substring(a,i)+s};if(!((o=GLOBAL_CONFIG.algolia).appId&&o.apiKey&&o.indexName))return console.error("Algolia setting is invalid!");var o=instantsearch({indexName:o.indexName,searchClient:algoliasearch(o.appId,o.apiKey),searchFunction(e){e.state.query&&e.search()}}),r=instantsearch.widgets.configure({hitsPerPage:5}),c=instantsearch.widgets.searchBox({container:"#algolia-search-input",showReset:!1,showSubmit:!1,placeholder:GLOBAL_CONFIG.algolia.languages.input_placeholder,showLoadingIndicator:!0}),d=instantsearch.widgets.hits({container:"#algolia-hits",templates:{item(e){var t=e.permalink||GLOBAL_CONFIG.root+e.path,a=(e=e._highlightResult).contentStripTruncate?l(e.contentStripTruncate.value):e.contentStrip?l(e.contentStrip.value):e.content?l(e.content.value):"";return`
          <a href="${t}" class="algolia-hit-item-link">
          <span class="algolia-hits-item-title">${e.title.value||"no-title"}</span>
          <p class="algolia-hit-item-content">${a}</p>
          </a>`},empty:function(e){return'<div id="algolia-hits-empty">'+GLOBAL_CONFIG.algolia.languages.hits_empty.replace(/\$\{query}/,e.query)+"</div>"}}}),h=instantsearch.widgets.stats({container:"#algolia-info > .algolia-stats",templates:{text:function(e){return"<hr>"+GLOBAL_CONFIG.algolia.languages.hits_stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS)}}}),g=instantsearch.widgets.poweredBy({container:"#algolia-info > .algolia-poweredBy"}),u=instantsearch.widgets.pagination({container:"#algolia-pagination",totalPages:5,templates:{first:'<i class="fas fa-angle-double-left"></i>',last:'<i class="fas fa-angle-double-right"></i>',previous:'<i class="fas fa-angle-left"></i>',next:'<i class="fas fa-angle-right"></i>'}});o.addWidgets([r,c,d,h,g,u]),o.start(),s(),t.addEventListener("click",i),document.querySelector("#algolia-search .search-close-button").addEventListener("click",i),window.addEventListener("pjax:complete",()=>{btf.isHidden(t)||i(),s()}),window.pjax&&o.on("render",()=>{window.pjax.refresh(document.getElementById("algolia-hits"))})});